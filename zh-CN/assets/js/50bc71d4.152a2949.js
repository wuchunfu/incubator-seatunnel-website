"use strict";(self.webpackChunkseatunnel_website=self.webpackChunkseatunnel_website||[]).push([[6406],{32885:function(n){n.exports=JSON.parse('{"blogPosts":[{"id":"Upcoming API Connector Development Analysis","metadata":{"permalink":"/zh-CN/blog/Upcoming API Connector Development Analysis","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2022-06-23-New_Connector.md","source":"@site/blog/2022-06-23-New_Connector.md","title":"Upcoming API Connector Development Analysis","description":"After days of community development, the preliminary development of the new Connector API of SeaTunnel is completed. The next step is to adapt this new connector. In order to aid the developers to use this connector, this article provides guide to develop a new API.","date":"2022-06-23T00:00:00.000Z","formattedDate":"2022\u5e746\u670823\u65e5","tags":[{"label":"Meetup","permalink":"/zh-CN/blog/tags/meetup"}],"readingTime":3.28,"truncated":false,"authors":[],"frontMatter":{"slug":"Upcoming API Connector Development Analysis","title":"Upcoming API Connector Development Analysis","tags":["Meetup"]},"nextItem":{"title":"Apache SeaTunnel \u4e0e\u8ba1\u7b97\u5f15\u64ce\u7684\u89e3\u8026\u4e4b\u9053\uff0c\u91cd\u6784API\u6211\u4eec\u505a\u4e86\u4e9b\u4ec0\u4e48","permalink":"/zh-CN/blog/2022/05/31/engine"}},"content":"After days of community development, the preliminary development of the new Connector API of SeaTunnel is completed. The next step is to adapt this new connector. In order to aid the developers to use this connector, this article provides guide to develop a new API.\\n\\n## Priliminary Setup\\n- Environment configuration: JDK8 and Scala2.11 are recommended.\\n- As before, we need to download the latest code locally through git and import it into the IDE, project address: https://github.com/apache/incubator-seatunnel . At the same time, switch the branch to api-draft, and currently use this branch to develop the new version of the API and the corresponding Connector. The project structure is as follows:\\n\\n  ![Project Structure](/image/20220623/en/0.png)\\n\\n## Prerequisites\\n- At present, in order to distinguish different Connectors, we put the connectors that support\\n    - Flink/Spark under the ``seatunnel-connectors/seatunnel-connectors-flink(spark)`` module.\\n    - New version of the Connector is placed under the ``seatunnel-connectors/seatunnel-connectors-seatunnel`` module.\\n\\n  As we can see from the above figure, we have implemented Fake, Console, Kafka Connector, and Clickhouse Connector is also being implemented.\\n- At present, the data type we support is SeaTunnelRow, so no matter the type of data generated by the Source or the type of data consumed by the Sink, it should be SeaTunnelRow.\\n\\n# Development of Connector\\nTaking Fake Connector as an example, let\'s introduce how to implement a new Connector:\\n\\n- Create a corresponding module with a path under ``seatunnel-connectors-seatunnel``, which is at the same level as other new connectors.\\n- Modify the ``seatunnel-connectors-seatunnel/pom.xml`` file, add a new module to modules, modify ``seatunnel-connectors-seatunnel/seatunnel-connector-seatunnel-fake/pom.xml``, add seatunnel-api dependencies, and correct parent Quote. The resulting style is as follows:\\n\\n  ![Style](/image/20220623/en/1.png)\\n\\n- The next step is to create the corresponding package and related classes, create FakeSource, and need to inherit SeaTunnel Source.\\n\\n    - Note : The Source of SeaTunnel adopts the design of stream and batch integration. The Source of SeaTunnel determines whether current Source is a stream or batch through attribute getBoundedness.\\n\\n  So you can specify a Source as a stream or batch by dynamic configuration (refer to the default method). The configuration defined by the user in the configuration file can be obtained through the prepare method to realize the customized configuration.\\n\\n  Then create FakeSourceReader, FakeSource SplitEnumerator, and FakeSourceSplit to inherit the corresponding abstract classes (which can be found in the corresponding classes). As long as we implement the corresponding methods of these classes, then our SeaTunnel Source Connector is basically completed.\\n- Next, just follow the existing example to write the corresponding code. The most important one is the FakeSource Reader, which defines how we obtain data from the outside, which is the most critical part of the Source Connector. Every time a piece of data is generated, we need to place it in the collector as shown:\\n\\n  ![Source](/image/20220623/en/2.png)\\n- After the code development is complete, we need to configure the configuration file ``plugin-mapping.properties`` located under ``seatunnel-connectors/modules``. Adding a seatunnel\\n  ``.source.FakeSource = seatunnel-connector-fake``\\n  means that SeaTunnel can find the jar package corresponding to the project by looking for a Source named FakeSource. This allows the Connector to be used in the normal configuration file.\\n- For a detailed description of writing Source and Sink and SeaTunnel API, please refer to the introduction at ``seatunnel-connectors/seatunnel-connectors-seatunnel/ README.zh.md``.\\n\\n## Connector Testing\\n- For testing, we can find the ``seatunnel-flink(spark)-new-connector-example`` module in seatunnel-examples, and test it against different engines to ensure that the performance of the Connector is as consistent as possible. If you find any discrepancies, you can mark them in the document, modify the configuration file under resource, add our Connector to the configuration, and introduce ``seatunnel-flink(spark)-new-connector-example/pom.xml`` dependency, you can execute ``SeaTunnelApiExample`` to test.\\n- The default is stream processing mode, and the execution mode is switched to batch mode by modifying ``job.mode=BATCH`` in the environment of the configuration file.\\n\\n## Submit PR\\nWhen our Connector is ready, we can submit PR to github. After reviewing by other partners, our contributed Connector will become part of SeaTunnel!"},{"id":"/2022/05/31/engine","metadata":{"permalink":"/zh-CN/blog/2022/05/31/engine","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2022-05-31-engine.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2022-05-31-engine.md","title":"Apache SeaTunnel \u4e0e\u8ba1\u7b97\u5f15\u64ce\u7684\u89e3\u8026\u4e4b\u9053\uff0c\u91cd\u6784API\u6211\u4eec\u505a\u4e86\u4e9b\u4ec0\u4e48","description":"Apache SeaTunnel (Incubating) \u4e0e Apache Inlong (Incubating) \u76845\u6708\u8054\u5408Meetup\u4e2d\uff0c\u7b2c\u4e8c\u4f4d\u5206\u4eab\u7684\u5609\u5bbe\u662f\u6765\u81ea\u767d\u9cb8\u5f00\u6e90\u7684\u9ad8\u7ea7\u5de5\u7a0b\u5e08\u674e\u5b97\u6587\u3002\u5728\u4f7f\u7528Apache SeaTunnel (Incubating) \u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ed6\u53d1\u73b0\u4e86 Apache SeaTunnel (Incubating) \u5b58\u5728\u7684\u56db\u5927\u95ee\u9898\uff1aConnector\u5b9e\u73b0\u6b21\u6570\u591a\u3001\u53c2\u6570\u4e0d\u7edf\u4e00\u3001\u96be\u4ee5\u652f\u6301\u591a\u4e2a\u7248\u672c\u7684\u5f15\u64ce\u4ee5\u53ca\u5f15\u64ce\u5347\u7ea7\u96be\u7684\u95ee\u9898\u3002\u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u7684\u96be\u9898\uff0c\u674e\u5b97\u6587\u5c06\u76ee\u6807\u653e\u5728\u5c06Apache SeaTunnel (Incubating)\u4e0e\u8ba1\u7b97\u5f15\u64ce\u8fdb\u884c\u89e3\u8026\uff0c\u91cd\u6784\u5176\u4e2dSource\u4e0eSink API\uff0c\u5b9e\u73b0\u6539\u826f\u4e86\u5f00\u53d1\u4f53\u9a8c\u3002","date":"2022-05-31T00:00:00.000Z","formattedDate":"2022\u5e745\u670831\u65e5","tags":[],"readingTime":15.505,"truncated":false,"authors":[],"frontMatter":{},"prevItem":{"title":"Upcoming API Connector Development Analysis","permalink":"/zh-CN/blog/Upcoming API Connector Development Analysis"},"nextItem":{"title":"\u767e\u4ebf\u7ea7\u6570\u636e\u540c\u6b65\uff0c\u5982\u4f55\u57fa\u4e8e SeaTunnel \u7684 ClickHouse \u5b9e\u73b0\uff1f","permalink":"/zh-CN/blog/2022/05/10/ClickHouse"}},"content":"![](/image/20220531/ch/0.jpg)\\n\\n\\n\\nApache SeaTunnel (Incubating) \u4e0e Apache Inlong (Incubating) \u76845\u6708\u8054\u5408Meetup\u4e2d\uff0c\u7b2c\u4e8c\u4f4d\u5206\u4eab\u7684\u5609\u5bbe\u662f\u6765\u81ea\u767d\u9cb8\u5f00\u6e90\u7684\u9ad8\u7ea7\u5de5\u7a0b\u5e08\u674e\u5b97\u6587\u3002\u5728\u4f7f\u7528Apache SeaTunnel (Incubating) \u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ed6\u53d1\u73b0\u4e86 Apache SeaTunnel (Incubating) \u5b58\u5728\u7684\u56db\u5927\u95ee\u9898\uff1aConnector\u5b9e\u73b0\u6b21\u6570\u591a\u3001\u53c2\u6570\u4e0d\u7edf\u4e00\u3001\u96be\u4ee5\u652f\u6301\u591a\u4e2a\u7248\u672c\u7684\u5f15\u64ce\u4ee5\u53ca\u5f15\u64ce\u5347\u7ea7\u96be\u7684\u95ee\u9898\u3002\u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u7684\u96be\u9898\uff0c\u674e\u5b97\u6587\u5c06\u76ee\u6807\u653e\u5728\u5c06Apache SeaTunnel (Incubating)\u4e0e\u8ba1\u7b97\u5f15\u64ce\u8fdb\u884c\u89e3\u8026\uff0c\u91cd\u6784\u5176\u4e2dSource\u4e0eSink API\uff0c\u5b9e\u73b0\u6539\u826f\u4e86\u5f00\u53d1\u4f53\u9a8c\u3002\\n\\n\u672c\u6b21\u6f14\u8bb2\u4e3b\u8981\u5305\u542b\u56db\u4e2a\u90e8\u5206\uff1a\\n\\n1.  Apache SeaTunnel (Incubating)**\u91cd\u6784\u7684\u80cc\u666f\u548c\u52a8\u673a**\\n    \\n2.  Apache SeaTunnel (Incubating)**\u91cd\u6784\u7684\u76ee\u6807**\\n    \\n3.  Apache SeaTunnel (Incubating)**\u91cd\u6784\u6574\u4f53\u7684\u8bbe\u8ba1**\\n    \\n4.  Apache SeaTunnel (Incubating) **Source API\u7684\u8bbe\u8ba1**\\n    \\n5.  Apache SeaTunnel (Incubating) **Sink API\u7684\u8bbe\u8ba1**\\n    \\n\\n\\n![](/image/20220531/ch/1.jpg)\\n\\n\\n\\n**\u674e\u5b97\u6587**\\n\\n\u767d\u9cb8\u5f00\u6e90 \u9ad8\u7ea7\u5de5\u7a0b\u5e08\\n\\nApache SeaTunnel(Incubating)\\n\\n& Flink Contributor, Flink CDC & Debezium Contributor\\n\\n## **01** \u91cd\u6784\u7684\u80cc\u666f\u4e0e\u52a8\u673a\\n\\n### 01 Apache SeaTunnel(Incubating)\u4e0e\u5f15\u64ce\u8026\u5408\\n\\n\u7528\u8fc7Apache SeaTunnel (Incubating) \u7684\u5c0f\u4f19\u4f34\u6216\u8005\u5f00\u53d1\u8005\u5e94\u8be5\u77e5\u9053\uff0c\u76ee\u524dApache SeaTunnel (Incubating) \u4e0e\u5f15\u64ce\u5b8c\u5168\u8026\u5408\uff0c\u5b8c\u5168\u57fa\u4e8eSpark\u3001Flink\u5f00\u53d1\uff0c\u5176\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\u90fd\u57fa\u4e8eFlink\u3001Spark\u5f15\u64ce\u3002\u4ece\u8d21\u732e\u8005\u548c\u7528\u6237\u7684\u89d2\u5ea6\u51fa\u53d1\uff0c\u6211\u4eec\u80fd\u53d1\u73b0\u4e00\u4e9b\u95ee\u9898\u3002\\n\\n**\u4ece\u8d21\u732e\u8005\u7684\u89d2\u5ea6**\uff1a\u53cd\u590d\u5b9e\u73b0Connector\uff0c\u6ca1\u6709\u6536\u83b7\u611f\uff1b\u6f5c\u5728\u8d21\u732e\u8005\u7531\u4e8e\u5f15\u64ce\u7248\u672c\u4e0d\u4e00\u81f4\u65e0\u6cd5\u8d21\u732e\u793e\u533a\uff1b\\n\\n**\u4ece\u7528\u6237\u7684\u89d2\u5ea6**\uff1a\u76ee\u524d\u5f88\u591a\u516c\u53f8\u91c7\u7528Lambda\u67b6\u6784\uff0c\u79bb\u7ebf\u4f5c\u4e1a\u4f7f\u7528Spark\uff0c\u5b9e\u65f6\u4f5c\u4e1a\u4f7f\u7528Flink\uff0c \u4f7f\u7528\u4e2d\u5c31\u4f1a\u53d1\u73b0SeaTunnel \u7684Connector\u53ef\u80fdSpark\u6709\uff0c\u4f46\u662fFlink\u6ca1\u6709\uff0c\u4ee5\u53ca\u4e24\u4e2a\u5f15\u64ce\u5bf9\u4e8e\u540c\u4e00\u5b58\u50a8\u5f15\u64ce\u7684Connector\u7684\u53c2\u6570\u4e5f\u4e0d\u7edf\u4e00\uff0c\u6709\u8f83\u9ad8\u7684\u4f7f\u7528\u6210\u672c\uff0c\u8131\u79bb\u4e86SeaTunnel\u7b80\u5355\u6613\u7528\u7684\u521d\u8877\uff1b\u8fd8\u6709\u7528\u6237\u63d0\u95ee\u8bf4\u76ee\u524d\u652f\u4e0d\u652f\u6301Flink\u76841.14\u7248\u672c\uff0c\u6309\u7167\u76ee\u524dSeaTunnel\u7684\u67b6\u6784\uff0c\u60f3\u8981\u652f\u6301Flink\u76841.14\u5c31\u5fc5\u987b\u629b\u5f03\u4e4b\u524d\u7684\u7248\u672c\uff0c\u56e0\u6b64\u8fd9\u4e5f\u4f1a\u5bf9\u4e4b\u524d\u7248\u672c\u7684\u7528\u6237\u9020\u6210\u5f88\u5927\u7684\u95ee\u9898\u3002\\n\\n\u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u7ba1\u662f\u505a\u5f15\u64ce\u5347\u7ea7\u6216\u8005\u652f\u6301\u66f4\u591a\u7684\u7248\u672c\u7684\u7528\u6237\u90fd\u5f88\u56f0\u96be\u3002\\n\\n\u53e6\u5916Spark\u548cFlink\u90fd\u91c7\u7528\u4e86Chandy-lamport\u7b97\u6cd5\u5b9e\u73b0\u7684Checkpoint\u5bb9\u9519\u673a\u5236\uff0c\u4e5f\u5728\u5185\u90e8\u8fdb\u884c\u4e86DataSet\u4e0eDataStream\u7684\u7edf\u4e00\uff0c\u4ee5\u6b64\u4e3a\u524d\u63d0\u6211\u4eec\u8ba4\u4e3a\u89e3\u8026\u662f\u53ef\u884c\u7684\u3002\\n\\n## **02** Apache SeaTunnel(Incubating)\u4e0e\u5f15\u64ce\u89e3\u8026\\n\\n\u56e0\u6b64\u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u63d0\u51fa\u7684\u95ee\u9898\uff0c\u6211\u4eec\u6709\u4e86\u4ee5\u4e0b\u7684\u76ee\u6807\uff1a\\n\\n1.  **Connector\u53ea\u5b9e\u73b0\u4e00\u6b21**\uff1a\u9488\u5bf9\u53c2\u6570\u4e0d\u7edf\u4e00\u3001Connector\u591a\u6b21\u5b9e\u73b0\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5e0c\u671b\u5b9e\u73b0\u4e00\u4e2a\u7edf\u4e00\u7684Source \u4e0eSink API;\\n    \\n2.  **\u652f\u6301\u591a\u4e2a\u7248\u672c\u7684Spark\u4e0eFlink\u5f15\u64ce**\uff1a\u5728Source\u4e0eSink API\u4e0a\u518d\u52a0\u5165\u7ffb\u8bd1\u5c42\u53bb\u652f\u6301\u591a\u4e2a\u7248\u672c\u4e0eSpark\u548cFlink\u5f15\u64ce\uff0c\u89e3\u8026\u540e\u8fd9\u4e2a\u4ee3\u4ef7\u4f1a\u5c0f\u5f88\u591a\u3002\\n    \\n3.  **\u660e\u786eSource\u7684\u5206\u7247\u5e76\u884c\u903b\u8f91\u548cSink\u7684\u63d0\u4ea4\u903b\u8f91**\uff1a\u6211\u4eec\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u826f\u597d\u7684API\u53bb\u652f\u6301Connector\u5f00\u53d1\uff1b\\n    \\n4.  **\u652f\u6301\u5b9e\u65f6\u573a\u666f\u4e0b\u7684\u6570\u636e\u5e93\u6574\u5e93\u540c\u6b65**\uff1a\u8fd9\u4e2a\u662f\u76ee\u524d\u5f88\u591a\u7528\u6237\u63d0\u5230**\u9700\u8981CDC**\u652f\u6301\u884d\u751f\u7684\u9700\u6c42\u3002\u6211\u4e4b\u524d\u53c2\u4e0e\u8fc7Flink CDC\u793e\u533a\uff0c\u5f53\u65f6\u6709\u8bb8\u591a\u7528\u6237\u63d0\u51fa\u5728CDC\u7684\u573a\u666f\u4e2d\uff0c\u5982\u679c\u76f4\u63a5\u4f7f\u7528Flink CDC\u7684\u8bdd\u4f1a\u5bfc\u81f4\u6bcf\u4e00\u4e2a\u8868\u90fd\u6301\u6709\u4e00\u4e2a\u94fe\u63a5\uff0c\u5f53\u9047\u5230\u9700\u8981\u6574\u5e93\u540c\u6b65\u9700\u6c42\u65f6\uff0c\u5343\u5f20\u8868\u5c31\u6709\u5343\u4e2a\u94fe\u63a5\uff0c\u8be5\u60c5\u51b5\u65e0\u8bba\u662f\u5bf9\u4e8e\u6570\u636e\u5e93\u8fd8\u662fDBA\u90fd\u662f\u4e0d\u80fd\u63a5\u53d7\u7684\uff0c\u5982\u679c\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u5f15\u5165Canal\u3001Debezium\u7b49\u7ec4\u4ef6\uff0c\u4f7f\u7528\u5176\u62c9\u53d6\u589e\u91cf\u6570\u636e\u5230Kafka\u7b49MQ\u505a\u4e2d\u95f4\u5b58\u50a8\uff0c\u518d\u4f7f\u7528Flink SQL\u8fdb\u884c\u540c\u6b65\uff0c\u8fd9\u5b9e\u9645\u5df2\u7ecf\u8fdd\u80cc\u4e86Flink CDC\u6700\u65e9\u51cf\u5c11\u94fe\u8def\u7684\u60f3\u6cd5\uff0c\u4f46\u662fFlink CDC\u7684\u5b9a\u4f4d\u53ea\u662f\u4e00\u4e2aConnector\uff0c\u65e0\u6cd5\u505a\u5168\u94fe\u8def\u7684\u9700\u6c42\uff0c\u6240\u4ee5\u8be5proposal\u5728Flink CDC\u793e\u533a\u4e2d\u6ca1\u6709\u88ab\u63d0\u51fa\uff0c\u6211\u4eec\u501f\u7740\u672c\u6b21\u91cd\u6784\uff0c\u5c06proposa\u63d0\u4ea4\u5230\u4e86SeaTunnel\u793e\u533a\u4e2d\u3002\\n    \\n5.  **\u652f\u6301\u5143\u4fe1\u606f\u7684\u81ea\u52a8\u53d1\u73b0\u4e0e\u5b58\u50a8**\uff1a\u8fd9\u4e00\u90e8\u5206\u7528\u6237\u5e94\u8be5\u6709\u6240\u4f53\u9a8c\uff0c\u5982Kafka\u8fd9\u7c7b\u5b58\u50a8\u5f15\u64ce\uff0c\u6ca1\u6709\u8bb0\u5f55\u6570\u636e\u7ed3\u6784\u7684\u529f\u80fd\uff0c\u4f46\u6211\u4eec\u5728\u8bfb\u53d6\u6570\u636e\u65f6\u53c8\u5fc5\u987b\u662f\u7ed3\u6784\u5316\u7684\uff0c\u5bfc\u81f4\u6bcf\u6b21\u8bfb\u53d6\u4e00\u4e2atopic\u4e4b\u524d\uff0c\u7528\u6237\u90fd\u5fc5\u987b\u5b9a\u4e49topic\u7684\u7ed3\u6784\u5316\u6570\u636e\u7c7b\u578b\uff0c\u6211\u4eec\u5e0c\u671b\u505a\u5230\u7528\u6237\u53ea\u9700\u8981\u5b8c\u6210\u4e00\u6b21\u914d\u7f6e\uff0c\u51cf\u5c11\u91cd\u590d\u7684\u64cd\u4f5c\u3002\\n    \\n\\n\u53ef\u80fd\u4e5f\u6709\u540c\u5b66\u6709\u7591\u60d1\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u76f4\u63a5\u4f7f\u7528Apache Beam\uff0cBeam\u7684Source\u5206\u4e3aBOUNDED\u4e0eUNBOUNDED\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u5b9e\u73b0\u4e24\u904d\uff0c\u5e76\u4e14\u6709\u4e9bSource\u4e0eSink\u7684\u7279\u6027\u4e5f\u4e0d\u652f\u6301\uff0c\u5177\u4f53\u6240\u9700\u7684\u7279\u6027\u5728\u540e\u9762\u4f1a\u63d0\u5230\uff1b\\n\\n## **03** Apache SeaTunnel(Incubating)\u91cd\u6784\u6574\u4f53\u7684\u8bbe\u8ba1\\n\\n\\n![](/image/20220531/ch/1.jpg)\\n\\n\\nApache SeaTunnel(Incubating) API\u603b\u4f53\u7ed3\u6784\u7684\u8bbe\u8ba1\u5982\u4e0a\u56fe\uff1b\\n\\n**Source & Sink API**\uff1a\u6570\u636e\u96c6\u6210\u7684\u6838\u5fc3API\u4e4b\u4e00\uff0c\u660e\u786eSource\u7684\u5206\u7247\u5e76\u884c\u903b\u8f91\u548cSink\u7684\u63d0\u4ea4\u903b\u8f91\uff0c\u7528\u4e8e\u5b9e\u73b0Connector\uff1b\\n\\n**Engine API**\uff1a\\n\\nTranslation: \u7ffb\u8bd1\u5c42\uff0c\u7528\u4e8e\u5c06SeaTunnel\u7684Souce\u4e0eSink API\u7ffb\u8bd1\u6210\u5f15\u64ce\u5185\u90e8\u53ef\u4ee5\u8fd0\u884c\u7684Connector\uff1b\\n\\n**Execution**\uff1a\u6267\u884c\u903b\u8f91\uff0c\u7528\u4e8e\u5b9a\u4e49Source\u3001Transform\u3001Sink\u7b49\u64cd\u4f5c\u5728\u5f15\u64ce\u5185\u90e8\u7684\u6267\u884c\u903b\u8f91\uff1b\\n\\n**Table API**\uff1a\\n\\n**Table SPI**\uff1a\u4e3b\u8981\u7528\u4e8e\u4ee5SPI\u7684\u65b9\u5f0f\u66b4\u9732Source\u4e0eSink\u63a5\u53e3\uff0c\u5e76\u660e\u786eConnector\u7684\u5fc5\u586b\u4e0e\u53ef\u9009\u53c2\u6570\u7b49\uff1b\\n\\n**DataType**\uff1aSeaTunnel\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u9694\u79bb\u5f15\u64ce\uff0c\u58f0\u660eTable Schema\u7b49\uff1b\\n\\n**Catalog**\uff1a\u7528\u4e8e\u83b7\u53d6Table Scheme\u3001Options\u7b49\uff1b\\n\\n**Catalog Storage**: \u7528\u4e8e\u5b58\u50a8\u7528\u6237\u5b9a\u4e49Kafka\u7b49\u975e\u7ed3\u6784\u5316\u5f15\u64ce\u7684Table Scheme\u7b49\uff1b\\n\\n\\n![](/image/20220531/ch/2.jpg)\\n\\n\\n**\u4ece\u4e0a\u56fe\u662f\u6211\u4eec\u73b0\u5728\u8bbe\u60f3\u7684\u6267\u884c\u6d41\u7a0b**\uff1a\\n\\n1.  \u4ece\u914d\u7f6e\u6587\u4ef6\u6216UI\u7b49\u65b9\u5f0f\u83b7\u53d6\u4efb\u52a1\u53c2\u6570\uff1b\\n    \\n2.  \u901a\u8fc7\u53c2\u6570\u4eceCatalog\u4e2d\u89e3\u6790\u5f97\u5230Table Schema\u3001Option\u7b49\u4fe1\u606f\uff1b\\n    \\n3.  \u4ee5SPI\u65b9\u5f0f\u62c9\u8d77SeaTunnel\u7684Connector\uff0c\u5e76\u6ce8\u5165Table\u4fe1\u606f\u7b49\uff1b\\n    \\n4.  \u5c06SeaTunnel\u7684Connector\u7ffb\u8bd1\u4e3a\u5f15\u64ce\u5185\u90e8\u7684Connector\uff1b\\n    \\n5.  \u6267\u884c\u5f15\u64ce\u7684\u4f5c\u4e1a\u903b\u8f91\uff0c\u56fe\u4e2d\u7684\u591a\u8868\u5206\u53d1\u76ee\u524d\u53ea\u5b58\u5728CDC\u6574\u5e93\u540c\u6b65\u573a\u666f\u4e0b\uff0c\u5176\u4ed6Connector\u90fd\u662f\u5355\u8868\uff0c\u4e0d\u9700\u8981\u5206\u53d1\u903b\u8f91\uff1b\\n    \\n\\n\u4ece\u4ee5\u4e0a\u53ef\u4ee5\u770b\u51fa\uff0c\u6700\u96be\u7684\u90e8\u5206\u662f**\u5982\u4f55\u5c06Apache SeaTunnel(Incubating) \u7684Source\u548cSink\u7ffb\u8bd1\u6210\u5f15\u64ce\u5185\u90e8\u7684Source\u548cSink\u3002**\\n\\n\u5f53\u4e0b\u8bb8\u591a\u7528\u6237\u4e0d\u4ec5\u628aApache SeaTunnel (Incubating) \u5f53\u505a\u4e00\u4e2a\u6570\u636e\u96c6\u6210\u65b9\u5411\u7684\u5de5\u5177\uff0c\u4e5f\u5f53\u505a\u6570\u4ed3\u65b9\u5411\u7684\u5de5\u5177\uff0c\u4f1a\u4f7f\u7528\u5f88\u591aSpark\u548cFlink\u7684SQL\uff0c\u6211\u4eec\u76ee\u524d\u5e0c\u671b\u80fd\u591f\u4fdd\u7559\u8fd9\u6837\u7684SQL\u80fd\u529b\uff0c\u8ba9\u7528\u6237\u5b9e\u73b0\u65e0\u7f1d\u5347\u7ea7\u3002\\n\\n\\n![](/image/20220531/ch/3.jpg)\\n\\n\\n\u6839\u636e\u6211\u4eec\u7684\u8c03\u7814\uff0c\u5982\u4e0a\u56fe\uff0c\u662f\u5bf9Source\u4e0eSink\u7684\u7406\u60f3\u6267\u884c\u903b\u8f91\uff0c\u7531\u4e8eSeaTunnel\u4ee5WaterDrop\u5b75\u5316\uff0c\u6240\u4ee5\u56fe\u4e0a\u7684\u672f\u8bed\u504f\u5411Spark\uff1b\\n\\n\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u5728Driver\u4e0a\u53ef\u4ee5\u8fd0\u884cSource\u548cSink\u7684\u534f\u8c03\u5668\uff0c\u7136\u540eWorker\u4e0a\u8fd0\u884cSource\u7684Reader\u548cSink\u7684Writer\u3002\u5728Source\u534f\u8c03\u5668\u65b9\u9762\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u80fd\u652f\u6301\u51e0\u4e2a\u80fd\u529b\u3002\\n\\n**\u4e00\u3001\u662f\u6570\u636e\u7684\u5206\u7247\u903b\u8f91**\uff0c\u53ef\u4ee5\u5c06\u5206\u7247\u52a8\u6001\u6dfb\u52a0\u5230Reader\u4e2d\u3002\\n\\n**\u4e8c\u3001\u662f\u53ef\u4ee5\u652f\u6301Reader\u7684\u534f\u8c03**\u3002SourceReader\u7528\u4e8e\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5c06\u6570\u636e\u53d1\u9001\u5230\u5f15\u64ce\u4e2d\u6d41\u8f6c\uff0c\u6700\u7ec8\u6d41\u8f6c\u5230Source Writer\u4e2d\u8fdb\u884c\u6570\u636e\u5199\u5165\uff0c\u540c\u65f6Writer\u53ef\u4ee5\u652f\u6301\u4e8c\u9636\u6bb5\u4e8b\u52a1\u63d0\u4ea4\uff0c\u5e76\u7531Sink\u7684\u534f\u8c03\u5668\u652f\u6301Iceberg\u7b49Connector\u7684\u805a\u5408\u63d0\u4ea4\u9700\u6c42\uff1b\\n\\n## **04** Source API\\n\\n\u901a\u8fc7\u6211\u4eec\u7684\u8c03\u7814\uff0c\u53d1\u73b0Source\u6240\u9700\u8981\u7684\u4ee5\u4e0b\u7279\u6027\uff1a\\n\\n1.  **\u7edf\u4e00\u79bb\u7ebf\u548c\u5b9e\u65f6API**\uff1aSource\u53ea\u5b9e\u73b0\u4e00\u6b21\uff0c\u540c\u65f6\u652f\u6301\u79bb\u7ebf\u548c\u5b9e\u65f6\uff1b\\n    \\n2.  **\u80fd\u591f\u652f\u6301\u5e76\u884c\u8bfb\u53d6**\uff1a\u6bd4\u5982Kafka\u6bcf\u4e00\u4e2a\u5206\u533a\u90fd\u751f\u6210\u4e00\u4e2a\u7684\u8bfb\u53d6\u5668\uff0c\u5e76\u884c\u7684\u6267\u884c\uff1b\\n    \\n3.  **\u652f\u6301\u52a8\u6001\u6dfb\u52a0\u5206\u7247**\uff1a\u6bd4\u5982Kafka\u5b9a\u4e8e\u4e00\u4e2atopic\u6b63\u5219\uff0c\u7531\u4e8e\u4e1a\u52a1\u91cf\u7684\u9700\u6c42\uff0c\u9700\u8981\u65b0\u589e\u4e00\u4e2atopic\uff0c\u8be5Source API\u53ef\u4ee5\u652f\u6301\u6211\u4eec\u52a8\u6001\u6dfb\u52a0\u5230\u4f5c\u4e1a\u4e2d\u3002\\n    \\n4.  **\u652f\u6301\u534f\u8c03\u8bfb\u53d6\u5668\u7684\u5de5\u4f5c**\uff1a\u8fd9\u4e2a\u76ee\u524d\u53ea\u53d1\u73b0\u5728CDC\u8fd9\u79cdConnector\u9700\u8981\u652f\u6301\u3002CDC\u76ee\u524d\u90fd\u662f\u57fa\u4e8eNetfilx\u7684DBlog\u5e76\u884c\u7b97\u6cd5\u53bb\u652f\u6301\uff0c\u8be5\u60c5\u51b5\u5728\u5168\u91cf\u540c\u6b65\u548c\u589e\u91cf\u540c\u6b65\u4e24\u4e2a\u9636\u6bb5\u7684\u5207\u6362\u65f6\u9700\u8981\u534f\u8c03\u8bfb\u53d6\u5668\u7684\u5de5\u4f5c\u3002\\n    \\n5.  **\u652f\u6301\u5355\u4e2a\u8bfb\u53d6\u5668\u5904\u7406\u591a\u5f20\u8868**\uff1a\u5373\u7531\u524d\u9762\u63d0\u5230\u7684\u652f\u6301\u5b9e\u65f6\u573a\u666f\u4e0b\u7684\u6570\u636e\u5e93\u6574\u5e93\u540c\u6b65\u9700\u6c42\uff1b\\n    \\n\\n\\n![](/image/20220531/ch/4.jpg)\\n\\n\\n\u5bf9\u5e94\u4ee5\u4e0a\u9700\u6c42\uff0c\u6211\u4eec\u505a\u51fa\u4e86\u57fa\u7840\u7684API\uff0c\u5982\u4e0a\u56fe\uff0c\u76ee\u524d\u4ee3\u7801\u4ee5\u63d0\u4ea4\u5230Apache SeaTunnel(Incubating)\u7684\u793e\u533a\u4e2dapi-draft\u5206\u652f\uff0c\u611f\u5174\u8da3\u7684\u53ef\u4ee5\u67e5\u770b\u4ee3\u7801\u8be6\u7ec6\u4e86\u89e3\u3002\\n\\n### **\u5982\u4f55\u9002\u914dSpark\u548cFlink\u5f15\u64ce**\\n\\nFlink\u4e0eSpark\u90fd\u5728\u540e\u9762\u7edf\u4e00\u4e86DataSet\u4e0eDataStream API\uff0c\u5373\u80fd\u591f\u652f\u6301\u524d\u4e24\u4e2a\u7279\u6027\uff0c\u90a3\u4e48\u5bf9\u4e8e\u5269\u4e0b\u76843\u4e2a\u7279\u6027\uff1a\\n\\n-   \u5982\u4f55\u652f\u6301\u52a8\u6001\u6dfb\u52a0\u5206\u7247\uff1f\\n    \\n-   \u5982\u4f55\u652f\u6301\u534f\u8c03\u8bfb\u53d6\u5668\uff1f\\n    \\n-   \u5982\u4f55\u652f\u6301\u5355\u4e2a\u8bfb\u53d6\u5668\u5904\u7406\u591a\u5f20\u8868\uff1f\\n    \\n\\n\u5e26\u7740\u95ee\u9898\uff0c\u8fdb\u5165\u76ee\u524d\u7684\u8bbe\u8ba1\u3002\\n\\n\\n![](/image/20220531/ch/5.jpg)\\n\\n\\n\u6211\u4eec\u53d1\u73b0\u9664\u4e86**CDC**\u4e4b\u5916\uff0c\u5176\u4ed6Connector\u662f\u4e0d\u9700\u8981\u534f\u8c03\u5668\u7684\uff0c\u9488\u5bf9\u4e0d\u9700\u8981\u534f\u8c03\u5668\u7684\uff0c\u6211\u4eec\u4f1a\u6709\u4e00\u4e2a\u652f\u6301\u5e76\u884c\u7684Source\uff0c\u5e76\u8fdb\u884c\u5f15\u64ce\u7ffb\u8bd1\u3002\\n\\n\u5982\u4e0a\u56fe\u4e2d\u5de6\u8fb9\u662f\u4e00\u4e2a**\u5206\u7247\u7684enumerator**\uff0c\u53ef\u4ee5\u5217\u4e3esource\u9700\u8981\u54ea\u4e9b\u5206\u7247\uff0c\u6709\u54ea\u4e9b\u5206\u7247\uff0c\u5b9e\u65f6\u8fdb\u884c\u5206\u7247\u7684\u679a\u4e3e\uff0c\u968f\u540e\u5c06\u6bcf\u4e2a\u5206\u7247\u5206\u53d1\u5230\u771f\u6b63\u7684\u6570\u636e\u8bfb\u53d6\u6a21\u5757SourceReader\u4e2d\u3002**\u5bf9\u4e8e\u79bb\u7ebf\u4e0e\u5b9e\u65f6\u4f5c\u4e1a\u7684\u533a\u5206\u4f7f\u7528Boundedness\u6807\u8bb0**\uff0cConnector\u53ef\u4ee5\u5728\u5206\u7247\u4e2d\u6807\u8bb0\u662f\u5426\u6709\u505c\u6b62\u7684Offset\uff0c\u5982Kafka\u53ef\u4ee5\u652f\u6301\u5b9e\u65f6\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u652f\u6301\u79bb\u7ebf\u3002ParallelSource\u53ef\u4ee5\u5728\u5f15\u64ce\u8bbe\u7f6e\u4efb\u610f\u5e76\u884c\u5ea6\uff0c\u4ee5\u652f\u6301\u5e76\u884c\u8bfb\u53d6\u3002\\n\\n\\n![](/image/20220531/ch/6.jpg)\\n\\n\\n\u5728\u9700\u8981\u534f\u8c03\u5668\u7684\u573a\u666f\uff0c\u5982\u4e0a\u56fe\uff0c\u9700\u8981\u5728Reader\u548cEnumerator\u4e4b\u95f4\u8fdb\u884cEvent\u4f20\u8f93\uff0c** Enumerator**\u901a\u8fc7Reader\u53d1\u9001\u7684Event\u8fdb\u884c\u534f\u8c03\u5de5\u4f5c\u3002**Coordinated Source**\u9700\u8981\u5728\u5f15\u64ce\u5c42\u9762\u4fdd\u8bc1\u5355\u5e76\u884c\u5ea6\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\uff1b\u5f53\u7136\u8fd9\u4e5f\u4e0d\u80fd\u826f\u597d\u7684\u4f7f\u7528\u5f15\u64ce\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff0c\u4f46\u662f\u53d6\u820d\u662f\u5fc5\u8981\u7684\uff1b\\n\\n**\u5bf9\u4e8e\u6700\u540e\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5982\u4f55\u652f\u6301\u5355\u4e2a\u8bfb\u53d6\u5668\u5904\u7406\u591a\u5f20\u8868\u3002\u8fd9\u4f1a\u6d89\u53ca\u5230Table API\u5c42**\uff0c\u901a\u8fc7Catalog\u8bfb\u53d6\u5230\u4e86\u6240\u6709\u9700\u8981\u7684\u8868\u540e\uff0c\u6709\u4e9b\u8868\u53ef\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u94fe\u63a5\u53bb\u8bfb\u53d6\uff0c\u6709\u4e9b\u53ef\u80fd\u9700\u8981\u5206\u5f00\uff0c\u8fd9\u4e2a\u4f9d\u8d56\u4e8eSource\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u3002\u57fa\u4e8e\u8fd9\u662f\u4e00\u4e2a\u7279\u6b8a\u9700\u6c42\uff0c\u6211\u4eec\u60f3\u8981\u51cf\u5c11\u666e\u901a\u5f00\u53d1\u8005\u7684\u96be\u5ea6\uff0c\u5728Table API\u8fd9\u4e00\u5c42\uff0c\u6211\u4eec\u4f1a\u63d0\u4f9b\u4e00\u4e2aSupportMultipleTable\u63a5\u53e3\uff0c\u7528\u4e8e\u58f0\u660eSource\u652f\u6301\u591a\u8868\u7684\u8bfb\u53d6\u3002Source\u5728\u5b9e\u73b0\u65f6\uff0c\u8981\u6839\u636e\u591a\u5f20\u8868\u5b9e\u73b0\u5bf9\u5e94\u7684\u53cd\u5e8f\u5217\u5316\u5668\u3002\u9488\u5bf9\u884d\u751f\u7684\u591a\u8868\u6570\u636e\u5982\u4f55\u5206\u79bb\uff0cFlink\u5c06\u91c7\u7528Side Output\u673a\u5236\uff0cSpark\u9884\u60f3\u4f7f\u7528Filter\u6216Partition\u673a\u5236\u3002\\n\\n## **05** Sink API\\n\\n\u76ee\u524dSink\u6240\u9700\u7684\u7279\u6027\u5e76\u4e0d\u662f\u5f88\u591a\uff0c**\u7ecf\u8fc7\u8c03\u7814\u76ee\u524d\u53d1\u73b0\u6709\u4e09\u4e2a\u9700\u6c42**\uff1a\\n\\n1.  \u5e42\u7b49\u5199\u5165\uff0c\u8fd9\u4e2a\u4e0d\u9700\u8981\u5199\u4ee3\u7801\uff0c\u4e3b\u8981\u770b\u5b58\u50a8\u5f15\u64ce\u662f\u5426\u80fd\u652f\u6301\u3002\\n    \\n2.  \u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u4e3b\u6d41\u662f\u4e8c\u9636\u6bb5\u63d0\u4ea4\uff0c\u5982Kafka\u90fd\u662f\u53ef\u4ee5\u652f\u6301\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u3002\\n    \\n3.  \u805a\u5408\u63d0\u4ea4\uff0c\u5bf9\u4e8eIceberg\u3001hoodie\u7b49\u5b58\u50a8\u5f15\u64ce\u800c\u8a00\uff0c\u6211\u4eec\u4e0d\u5e0c\u671b\u6709\u5c0f\u6587\u4ef6\u95ee\u9898\uff0c\u4e8e\u662f\u671f\u671b\u5c06\u8fd9\u4e9b\u6587\u4ef6\u805a\u5408\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u518d\u8fdb\u884c\u63d0\u4ea4\u3002\\n    \\n\\n\u57fa\u4e8e\u4ee5\u4e0a\u4e09\u4e2a\u9700\u6c42\uff0c\u6211\u4eec\u6709\u5bf9\u5e94\u7684**\u4e09\u4e2aAPI**\uff0c\u5206\u522b\u662f**SinkWriter\u3001SinkCommitter\u3001SinkAggregated Committer**\u3002SinkWriter\u662f\u4f5c\u4e3a\u57fa\u7840\u5199\u5165\uff0c\u53ef\u80fd\u662f\u5e42\u7b49\u5199\u5165\uff0c\u4e5f\u53ef\u80fd\u4e0d\u662f\u3002SinkCommitter\u652f\u6301\u4e8c\u9636\u6bb5\u63d0\u4ea4\u3002SinkAggregatedCommitter\u652f\u6301\u805a\u5408\u63d0\u4ea4\u3002\\n\\n\\n![](/image/20220531/ch/7.jpg)\\n\\n\\n\u7406\u60f3\u72b6\u6001\u4e0b\uff0c**AggregatedCommitter**\u5355\u5e76\u884c\u7684\u5728Driver\u4e2d\u8fd0\u884c\uff0cWriter\u4e0eCommitter\u8fd0\u884c\u5728Worker\u4e2d\uff0c\u53ef\u80fd\u6709\u591a\u4e2a\u5e76\u884c\u5ea6\uff0c\u6bcf\u4e2a\u5e76\u884c\u5ea6\u90fd\u6709\u81ea\u5df1\u7684\u9884\u63d0\u4ea4\u5de5\u4f5c\uff0c\u7136\u540e\u628a\u81ea\u5df1\u63d0\u4ea4\u7684\u4fe1\u606f\u53d1\u9001\u7ed9Aggregated Committer\u518d\u8fdb\u884c\u805a\u5408\u3002\\n\\n**\u76ee\u524dSpark\u548cFlink\u7684\u9ad8\u7248\u672c\u90fd\u652f\u6301\u5728Driver**(Job Manager)\u8fd0\u884cAggregatedCommitter\uff0cworker(Job Manager)\u8fd0\u884cwriter\u548cCommitter\u3002\\n\\n\\n![](/image/20220531/ch/8.jpg)\\n\\n\\n\u4f46\u662f\u5bf9\u4e8e**Flink\u4f4e\u7248\u672c**\uff0c\u65e0\u6cd5\u652f\u6301AggregatedCommitter\u5728JM\u4e2d\u8fd0\u884c\uff0c\u6211\u4eec\u4e5f\u8fdb\u884c\u7ffb\u8bd1\u9002\u914d\u7684\u8bbe\u8ba1\u3002Writer\u4e0eCommitter\u4f1a\u4f5c\u4e3a\u524d\u7f6e\u7684\u7b97\u5b50\uff0c\u4f7f\u7528Flink\u7684ProcessFunction\u8fdb\u884c\u5305\u88f9\uff0c\u652f\u6301\u5e76\u53d1\u7684\u9884\u63d0\u4ea4\u4e0e\u5199\u5165\u5de5\u4f5c\uff0c\u57fa\u4e8eFlink\u7684Checkpoint\u673a\u5236\u5b9e\u73b0\u4e8c\u9636\u6bb5\u63d0\u4ea4\uff0c\u8fd9\u4e5f\u662f\u76ee\u524dFlink\u7684\u5f88\u591aConnector\u76842PC\u5b9e\u73b0\u65b9\u5f0f\u3002\u8fd9\u4e2aProcessFunction\u4f1a\u5c06\u9884\u63d0\u4ea4\u4fe1\u606f\u53d1\u9001\u5230\u4e0b\u6e38\u7684Aggregated Committer\u4e2d\uff0cAggregated Committer\u53ef\u4ee5\u91c7\u7528SinkFunction\u6216Process Function\u7b49\u7b97\u5b50\u5305\u88f9\uff0c\u5f53\u7136\uff0c**\u6211\u4eec\u9700\u8981\u4fdd\u8bc1AggregatedCommitter\u53ea\u4f1a\u542f\u52a8\u4e00\u4e2a\uff0c\u5373\u5355\u5e76\u884c\u5ea6**\uff0c\u5426\u5219\u805a\u5408\u63d0\u4ea4\u7684\u903b\u8f91\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\\n\\n\u611f\u8c22\u5404\u4f4d\u7684\u89c2\u770b\uff0c\u5982\u679c\u5927\u5bb6\u5bf9\u5177\u4f53\u5b9e\u73b0\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u53bb Apache SeaTunnel (Incubating) \u7684\u793e\u533a\u67e5\u770b**api-draft**\u5206\u652f\u4ee3\u7801\uff0c\u8c22\u8c22\u5927\u5bb6\u3002"},{"id":"/2022/05/10/ClickHouse","metadata":{"permalink":"/zh-CN/blog/2022/05/10/ClickHouse","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2022-05-10-ClickHouse.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2022-05-10-ClickHouse.md","title":"\u767e\u4ebf\u7ea7\u6570\u636e\u540c\u6b65\uff0c\u5982\u4f55\u57fa\u4e8e SeaTunnel \u7684 ClickHouse \u5b9e\u73b0\uff1f","description":"\u4f5c\u8005 | Apache SeaTunnel(Incubating) Contributor \u8303\u4f73","date":"2022-05-10T00:00:00.000Z","formattedDate":"2022\u5e745\u670810\u65e5","tags":[],"readingTime":9.77,"truncated":false,"authors":[],"frontMatter":{},"prevItem":{"title":"Apache SeaTunnel \u4e0e\u8ba1\u7b97\u5f15\u64ce\u7684\u89e3\u8026\u4e4b\u9053\uff0c\u91cd\u6784API\u6211\u4eec\u505a\u4e86\u4e9b\u4ec0\u4e48","permalink":"/zh-CN/blog/2022/05/31/engine"},"nextItem":{"title":"SeaTunnel \u5728\u5b69\u5b50\u738b\u7684\u9009\u578b\u8fc7\u7a0b\u53ca\u5e94\u7528\u6539\u9020\u5b9e\u8df5","permalink":"/zh-CN/blog/2022/05/01/_Kidswant"}},"content":"![](/image/20220510/ch/0.jpg)\\n\\n\\n\\n\u4f5c\u8005 | Apache SeaTunnel(Incubating) Contributor \u8303\u4f73\\n\\n\u6574\u7406 | \u6d4b\u8bd5\u5de5\u7a0b\u5e08 \u51af\u79c0\u5170\\n\\n\u5bf9\u4e8e\u767e\u4ebf\u7ea7\u6279\u6570\u636e\u7684\u5bfc\u5165\uff0c\u4f20\u7edf\u7684 JDBC \u65b9\u5f0f\u5728\u4e00\u4e9b\u6d77\u91cf\u6570\u636e\u540c\u6b65\u573a\u666f\u4e0b\u7684\u8868\u73b0\u5e76\u4e0d\u5c3d\u5982\u4eba\u610f\u3002\u4e3a\u4e86\u63d0\u4f9b\u66f4\u5feb\u7684\u5199\u5165\u901f\u5ea6\uff0cApache SeaTunnel(Incubating) \u5728\u521a\u521a\u53d1\u5e03\u7684 2.1.1 \u7248\u672c\u4e2d\u63d0\u4f9b\u4e86 ClickhouseFile-Connector \u7684\u652f\u6301\uff0c\u4ee5\u5b9e\u73b0 Bulk load \u6570\u636e\u5199\u5165\u3002\\n\\nBulk load \u6307\u628a\u6d77\u91cf\u6570\u636e\u540c\u6b65\u5230\u76ee\u6807 DB \u4e2d\uff0c\u76ee\u524d SeaTunnel \u5df2\u5b9e\u73b0\u6570\u636e\u540c\u6b65\u5230 ClickHouse \u4e2d\u3002\\n\\n\u5728 Apache SeaTunnel(Incubating) 4 \u6708 Meetup \u4e0a\uff0cApache SeaTunnel(Incubating) Contributor \u8303\u4f73\u5206\u4eab\u4e86\u300a\u57fa\u4e8e SeaTunnel \u7684 ClickHouse bulk load \u5b9e\u73b0\u300b\uff0c\u8be6\u7ec6\u8bb2\u89e3\u4e86 ClickHouseFile \u9ad8\u6548\u5904\u7406\u6d77\u91cf\u6570\u636e\u7684\u5177\u4f53\u5b9e\u73b0\u539f\u7406\u548c\u6d41\u7a0b\u3002\\n\\n\u611f\u8c22\u672c\u6587\u6574\u7406\u5fd7\u613f\u8005 \u6d4b\u8bd5\u5de5\u7a0b\u5e08 \u51af\u79c0\u5170 \u5bf9 Apache SeaTunnel(Incubating) \u9879\u76ee\u7684\u652f\u6301\uff01\\n\\n\u672c\u6b21\u6f14\u8bb2\u4e3b\u8981\u5305\u542b\u4e03\u4e2a\u90e8\u5206\uff1a\\n\\n- ClickHouse Sink \u73b0\u72b6\\n    \\n- ClickHouse Sink \u5f31\u573a\u666f\\n    \\n- ClickHouseFile \u63d2\u4ef6\u4ecb\u7ecd\\n    \\n- ClickHouseFile \u6838\u5fc3\u6280\u672f\u70b9\\n    \\n- ClickHouseFile \u63d2\u4ef6\u7684\u5b9e\u73b0\u89e3\u6790\\n    \\n- \u63d2\u4ef6\u80fd\u529b\u5bf9\u6bd4\\n    \\n- \u540e\u671f\u4f18\u5316\u65b9\u5411\\n   \\n\\n\\n![](/image/20220510/ch/0-1.png)\\n\\n\\n\\n\u200b\u8303 \u4f73\u767d\u9cb8\u5f00\u6e90 \u9ad8\u7ea7\u5de5\u7a0b\u5e08\\n\\n# 01 ClickHouse Sink \u73b0\u72b6\\n\\n\u73b0\u9636\u6bb5\uff0cSeaTunnel \u628a\u6570\u636e\u540c\u6b65\u5230 ClickHouse \u7684\u6d41\u7a0b\u662f\uff1a\u53ea\u8981\u662f SeaTunnel \u652f\u6301\u7684\u6570\u636e\u6e90\uff0c\u90fd\u53ef\u4ee5\u628a\u6570\u636e\u62bd\u53d6\u51fa\u6765\uff0c\u62bd\u53d6\u51fa\u6765\u4e4b\u540e\uff0c\u7ecf\u8fc7\u8f6c\u6362\uff08\u4e5f\u53ef\u4ee5\u4e0d\u8f6c\u6362\uff09\uff0c\u76f4\u63a5\u628a\u6e90\u6570\u636e\u5199\u5165 ClickHouse sink connector \u4e2d\uff0c\u518d\u901a\u8fc7 JDBC \u5199\u5165\u5230 ClickHouse \u7684\u670d\u52a1\u5668\u4e2d\u3002\\n\\n\\n![](/image/20220510/ch/1.png)\\n\\n\\n\u4f46\u662f\uff0c\u901a\u8fc7\u4f20\u7edf\u7684 JDBC \u5199\u5165\u5230 ClickHouse \u670d\u52a1\u5668\u4e2d\u4f1a\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\u3002\\n\\n\u9996\u5148\uff0c\u73b0\u9636\u6bb5\u4f7f\u7528\u7684\u5de5\u5177\u662f ClickHouse \u63d0\u4f9b\u7684\u9a71\u52a8\uff0c\u5b9e\u73b0\u65b9\u5f0f\u662f\u901a\u8fc7 HTTP\uff0c\u7136\u800c HTTP \u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u5b9e\u73b0\u6548\u7387\u4e0d\u9ad8\u3002\u5176\u6b21\u662f\u6d77\u91cf\u6570\u636e\uff0c\u5982\u679c\u6709\u91cd\u590d\u6570\u636e\u6216\u8005\u4e00\u6b21\u6027\u5199\u5165\u5927\u91cf\u6570\u636e\uff0c\u4f7f\u7528\u4f20\u7edf\u7684\u65b9\u5f0f\u662f\u751f\u6210\u5bf9\u5e94\u7684\u63d2\u5165\u8bed\u53e5\uff0c\u901a\u8fc7 HTTP \u53d1\u9001\u5230 ClickHouse \u670d\u52a1\u5668\u7aef\uff0c\u5728\u670d\u52a1\u5668\u7aef\u6765\u8fdb\u884c\u9010\u6761\u6216\u5206\u6279\u6b21\u89e3\u6790\u3001\u6267\u884c\uff0c\u65e0\u6cd5\u5b9e\u73b0\u6570\u636e\u538b\u7f29\u3002\\n\\n\u6700\u540e\u5c31\u662f\u6211\u4eec\u901a\u5e38\u4f1a\u9047\u5230\u7684\u95ee\u9898\uff0c\u6570\u636e\u91cf\u8fc7\u5927\u53ef\u80fd\u5bfc\u81f4 SeaTunnel \u7aef OOM\uff0c\u6216\u8005\u670d\u52a1\u5668\u7aef\u56e0\u4e3a\u5199\u5165\u6570\u636e\u91cf\u8fc7\u5927\uff0c\u9891\u7387\u8fc7\u9ad8\uff0c\u5bfc\u81f4\u670d\u52a1\u5668\u7aef\u6302\u6389\u3002\\n\\n\u4e8e\u662f\u6211\u4eec\u601d\u8003\uff0c\u662f\u5426\u6709\u6bd4 HTTP \u66f4\u5feb\u7684\u53d1\u9001\u65b9\u5f0f\uff1f\u5982\u679c\u53ef\u4ee5\u5728 SeaTunnel \u7aef\u505a\u6570\u636e\u9884\u5904\u7406\u6216\u6570\u636e\u538b\u7f29\uff0c\u90a3\u4e48\u7f51\u7edc\u5e26\u5bbd\u538b\u529b\u4f1a\u964d\u4f4e\uff0c\u4f20\u8f93\u901f\u7387\u4e5f\u4f1a\u63d0\u9ad8\u3002\\n\\n# 02 ClickHouse Sink \u7684\u5f31\u573a\u666f\\n\\n\u5982\u679c\u4f7f\u7528 HTTP \u4f20\u8f93\u534f\u8bae\uff0c\u5f53\u6570\u636e\u91cf\u8fc7\u5927\uff0c\u6279\u5904\u7406\u4ee5\u5fae\u6279\u7684\u5f62\u5f0f\u53d1\u9001\u8bf7\u6c42\uff0cHTTP \u53ef\u80fd\u5904\u7406\u4e0d\u8fc7\u6765\uff1b\\n\\n\u592a\u591a\u7684 insert \u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u538b\u529b\u5927\u3002\u5047\u8bbe\u5e26\u5bbd\u53ef\u4ee5\u627f\u53d7\u5927\u91cf\u7684\u8bf7\u6c42\uff0c\u4f46\u670d\u52a1\u5668\u7aef\u4e0d\u4e00\u5b9a\u80fd\u627f\u8f7d\u3002\u7ebf\u4e0a\u7684\u670d\u52a1\u5668\u4e0d\u4ec5\u9700\u8981\u6570\u636e\u63d2\u5165\uff0c\u66f4\u91cd\u8981\u7684\u662f\u67e5\u8be2\u6570\u636e\u4e3a\u5176\u4ed6\u4e1a\u52a1\u56e2\u961f\u4f7f\u7528\u3002\u82e5\u56e0\u4e3a\u63d2\u5165\u6570\u636e\u8fc7\u591a\u5bfc\u81f4\u670d\u52a1\u5668\u96c6\u7fa4\u5b95\u673a\uff0c\u662f\u5f97\u4e0d\u507f\u5931\u7684\u3002\\n\\n# 03 ClickHouse File \u6838\u5fc3\u6280\u672f\u70b9\\n\\n\u9488\u5bf9\u8fd9\u4e9b ClickHouse \u7684\u5f31\u573a\u666f\uff0c\u6211\u4eec\u60f3\uff0c\u6709\u6ca1\u6709\u4e00\u79cd\u65b9\u5f0f\uff0c\u65e2\u80fd\u5728 Spark \u7aef\u5c31\u80fd\u5b8c\u6210\u6570\u636e\u538b\u7f29\uff0c\u8fd8\u53ef\u4ee5\u5728\u6570\u636e\u5199\u5165\u65f6\u4e0d\u589e\u52a0 Server \u7684\u8d44\u6e90\u8d1f\u8f7d\uff0c\u5e76\u4e14\u80fd\u5feb\u901f\u5199\u5165\u6d77\u91cf\u6570\u636e\uff1f\u4e8e\u662f\u6211\u4eec\u5f00\u53d1\u4e86 ClickHouseFile \u63d2\u4ef6\u6765\u6ee1\u8db3\u8fd9\u4e9b\u9700\u6c42\u3002\\n\\nClickHouseFile \u63d2\u4ef6\u7684\u5173\u952e\u6280\u672f\u662f ClickHouse -local\u3002ClickHouse-local \u6a21\u5f0f\u53ef\u4ee5\u8ba9\u7528\u6237\u80fd\u591f\u5bf9\u672c\u5730\u6587\u4ef6\u6267\u884c\u5feb\u901f\u5904\u7406\uff0c\u800c\u65e0\u9700\u90e8\u7f72\u548c\u914d\u7f6e ClickHouse \u670d\u52a1\u5668\u3002ClickHouse-local \u4f7f\u7528\u4e0e ClickHouse Server \u76f8\u540c\u7684\u6838\u5fc3\uff0c\u56e0\u6b64\u5b83\u652f\u6301\u5927\u591a\u6570\u529f\u80fd\u4ee5\u53ca\u76f8\u540c\u7684\u683c\u5f0f\u548c\u8868\u5f15\u64ce\u3002\\n\\n\u56e0\u4e3a\u6709\u8fd9 2 \u4e2a\u7279\u70b9,\u8fd9\u610f\u5473\u7740\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u5904\u7406\u672c\u5730\u6587\u4ef6\uff0c\u800c\u65e0\u9700\u5728 ClickHouse \u670d\u52a1\u5668\u7aef\u505a\u5904\u7406\u3002\u7531\u4e8e\u662f\u76f8\u540c\u7684\u683c\u5f0f\uff0c\u6211\u4eec\u5728\u8fdc\u7aef\u6216\u8005 SeaTunnel \u7aef\u8fdb\u884c\u7684\u64cd\u4f5c\u6240\u4ea7\u751f\u7684\u6570\u636e\u548c\u670d\u52a1\u5668\u7aef\u662f\u65e0\u7f1d\u517c\u5bb9\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528 ClickHouse local \u6765\u8fdb\u884c\u6570\u636e\u5199\u5165\u3002ClickHouse local \u662f\u5b9e\u73b0 ClickHouseFile \u7684\u6838\u5fc3\u6280\u672f\u70b9\uff0c\u56e0\u4e3a\u6709\u4e86\u8fd9\u4e2a\u63d2\u4ef6\uff0c\u73b0\u9636\u6bb5\u624d\u80fd\u591f\u5b9e\u73b0 ClickHouse file \u8fde\u63a5\u5668\u3002\\n\\nClickHouse local \u6838\u5fc3\u4f7f\u7528\u65b9\u5f0f\uff1a\\n\\n\\n![](/image/20220510/ch/2.png)\\n\\n\\n\u7b2c\u4e00\u884c\uff1a\u5c06\u6570\u636e\u901a\u8fc7 Linux \u7ba1\u9053\u4f20\u9012\u7ed9 ClickHouse-local \u7a0b\u5e8f\u7684 test_table \u8868\u3002\\n\\n\u7b2c\u4e8c\u81f3\u4e94\u884c\uff1a\u521b\u5efa\u4e00\u4e2a result_table \u8868\u7528\u4e8e\u63a5\u6536\u6570\u636e\u3002\\n\\n\u7b2c\u516d\u884c\uff1a\u5c06\u6570\u636e\u4ece test\\\\_table \u5230 result\\\\_table \u8868\u3002\\n\\n\u7b2c\u4e03\u884c\uff1a\u5b9a\u4e49\u6570\u636e\u5904\u7406\u7684\u78c1\u76d8\u8def\u5f84\u3002\\n\\n\u901a\u8fc7\u8c03\u7528 Clickhouse-local \u7ec4\u4ef6\uff0c\u5b9e\u73b0\u5728 Apache SeaTunnel(Incubating) \u7aef\u5b8c\u6210\u6570\u636e\u6587\u4ef6\u7684\u751f\u6210\uff0c\u4ee5\u53ca\u6570\u636e\u538b\u7f29\u7b49\u4e00\u7cfb\u5217\u64cd\u4f5c\u3002\u518d\u901a\u8fc7\u548c Server \u8fdb\u884c\u901a\u4fe1\uff0c\u5c06\u751f\u6210\u7684\u6570\u636e\u76f4\u63a5\u53d1\u9001\u5230 Clickhouse \u7684\u4e0d\u540c\u8282\u70b9\uff0c\u518d\u5c06\u6570\u636e\u6587\u4ef6\u63d0\u4f9b\u7ed9\u8282\u70b9\u67e5\u8be2\u3002\\n\\n\u539f\u9636\u6bb5\u548c\u73b0\u9636\u6bb5\u5b9e\u73b0\u65b9\u5f0f\u5bf9\u6bd4\uff1a\\n\\n\\n![](/image/20220510/ch/3.png)\\n\\n\\n\u539f\u6765\u662f Spark \u628a\u6570\u636e\u5305\u62ec insert \u8bed\u53e5\uff0c\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\uff0c\u670d\u52a1\u5668\u7aef\u505a SQL \u7684\u89e3\u6790\uff0c\u8868\u7684\u6570\u636e\u6587\u4ef6\u751f\u6210\u3001\u538b\u7f29\uff0c\u751f\u6210\u5bf9\u5e94\u7684\u6587\u4ef6\u3001\u5efa\u7acb\u5bf9\u5e94\u7d22\u5f15\u3002\u82e5\u4f7f\u7528 ClickHouse local \u6280\u672f\uff0c\u5219\u7531 SeaTunnel \u7aef\u505a\u6570\u636e\u6587\u4ef6\u7684\u751f\u6210\u3001\u6587\u4ef6\u538b\u7f29\uff0c\u4ee5\u53ca\u7d22\u5f15\u7684\u521b\u5efa\uff0c\u6700\u7ec8\u4ea7\u51fa\u5c31\u662f\u7ed9\u670d\u52a1\u5668\u7aef\u4f7f\u7528\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\uff0c\u540c\u6b65\u7ed9\u670d\u52a1\u5668\u540e\uff0c\u670d\u52a1\u5668\u5c31\u53ea\u9700\u5bf9\u6570\u636e\u67e5\u8be2\uff0c\u4e0d\u9700\u8981\u505a\u989d\u5916\u7684\u64cd\u4f5c\u3002\\n\\n# 04 \u6838\u5fc3\u6280\u672f\u70b9\\n\\n\\n![](/image/20220510/ch/4.png)\\n\\n\\n\u4ee5\u4e0a\u6d41\u7a0b\u53ef\u4ee5\u4fc3\u4f7f\u6570\u636e\u540c\u6b65\u66f4\u52a0\u9ad8\u6548\uff0c\u5f97\u76ca\u4e8e\u6211\u4eec\u5bf9\u5176\u4e2d\u7684\u4e09\u70b9\u4f18\u5316\u3002\\n\\n\u7b2c\u4e00\uff0c\u6570\u636e\u5b9e\u9645\u4e0a\u5e08\u4ece\u7ba1\u9053\u4f20\u8f93\u5230 ClickHouseFile\uff0c\u5728\u957f\u5ea6\u548c\u5185\u5b58\u4e0a\u4f1a\u6709\u9650\u5236\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06 ClickHouse connector\uff0c\u4e5f\u5c31\u662f sink \u7aef\u6536\u5230\u7684\u6570\u636e\u901a\u8fc7 MMAP \u6280\u672f\u5199\u5165\u4e34\u65f6\u6587\u4ef6\uff0c\u518d\u7531 ClickHouse local \u8bfb\u53d6\u4e34\u65f6\u6587\u4ef6\u7684\u6570\u636e\uff0c\u751f\u6210\u6211\u4eec\u7684\u76ee\u6807 local file\uff0c\u4ee5\u8fbe\u5230\u589e\u91cf\u8bfb\u53d6\u6570\u636e\u7684\u6548\u679c\uff0c\u89e3\u51b3 OM \u7684\u95ee\u9898\u3002\\n\\n\\n![](/image/20220510/ch/5.png)\\n\\n\\n\u7b2c\u4e8c\uff0c\u652f\u6301\u5206\u7247\u3002\u56e0\u4e3a\u5982\u679c\u5728\u96c6\u7fa4\u4e2d\u4f7f\u7528\uff0c\u5982\u679c\u53ea\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u6216\u6587\u4ef6\u5939\uff0c\u5b9e\u9645\u4e0a\u6587\u4ef6\u53ea\u5206\u53d1\u5230\u4e00\u4e2a\u8282\u70b9\u4e0a\uff0c\u4f1a\u5927\u5927\u964d\u4f4e\u67e5\u8be2\u7684\u6027\u80fd\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u5206\u7247\u652f\u6301\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u5939\u4e2d\u8bbe\u7f6e\u5206\u7247\u7684 key\uff0c\u7b97\u6cd5\u4f1a\u5c06\u6570\u636e\u5206\u4e3a\u591a\u4e2a log file\uff0c\u5199\u5165\u5230\u4e0d\u540c\u7684\u96c6\u7fa4\u8282\u70b9\u4e2d\uff0c\u5927\u5e45\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\u3002\\n\\n\\n![](/image/20220510/ch/6.png)\\n\\n\\n\u7b2c\u4e09\u4e2a\u91cd\u8981\u7684\u4f18\u5316\u662f\u6587\u4ef6\u4f20\u8f93\uff0c\u76ee\u524d SeaTunnel \u652f\u6301\u4e24\u79cd\u6587\u4ef6\u4f20\u8f93\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f SCP\uff0c\u5176\u7279\u70b9\u662f\u5b89\u5168\u3001\u901a\u7528\u3001\u65e0\u9700\u989d\u5916\u914d\u7f6e\uff1b\u53e6\u4e00\u79cd\u662f RSYNC\uff0c\u5176\u6709\u70b9\u4e8b\u5feb\u901f\u9ad8\u6548\uff0c\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff0c\u4f46\u9700\u8981\u989d\u5916\u914d\u7f6e\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u9002\u5408\u81ea\u5df1\u7684\u65b9\u5f0f\u3002\\n\\n# 05 \u63d2\u4ef6\u5b9e\u73b0\u89e3\u6790\\n\\n\u6982\u62ec\u800c\u8a00\uff0cClickHouseFile \u7684\u603b\u4f53\u5b9e\u73b0\u6d41\u7a0b\u5982\u4e0b\uff1a\\n\\n\\n![](/image/20220510/ch/7.png)\\n\\n\\n- \u7f13\u5b58\u6570\u636e\uff0c\u7f13\u5b58\u5230 ClickHouse sink \u7aef\uff1b\\n    \\n- \u8c03\u7528\u672c\u5730\u7684 ClickHouse-local \u751f\u6210\u6587\u4ef6\uff1b\\n    \\n- \u5c06\u6570\u636e\u53d1\u9001\u5230 ClickHouse \u670d\u52a1\u7aef\uff1b\\n    \\n- \u6267\u884c ATTACH \u547d\u4ee4\\n    \\n\\n\u901a\u8fc7\u4ee5\u4e0a\u56db\u4e2a\u6b65\u9aa4\uff0c\u751f\u6210\u7684\u6570\u636e\u8fbe\u5230\u53ef\u67e5\u8be2\u7684\u72b6\u6001\u3002\\n\\n# 06 \u63d2\u4ef6\u80fd\u529b\u5bf9\u6bd4\\n\\n\\n![](/image/20220510/ch/8.png)\\n\\n\\n\u4ece\u6570\u636e\u4f20\u8f93\u89d2\u5ea6\u6765\u8bf4\uff0cClickHouseFile \u66f4\u9002\u7528\u4e8e\u6d77\u91cf\u6570\u636e\uff0c\u4f18\u52bf\u5728\u4e8e\u4e0d\u9700\u8981\u989d\u5916\u7684\u914d\u7f6e\uff0c\u901a\u7528\u6027\u5f3a\uff0c\u800c ClickHouseFile \u914d\u7f6e\u6bd4\u8f83\u590d\u6742\uff0c\u76ee\u524d\u652f\u6301\u7684 engine \u8f83\u5c11\uff1b\\n\\n\u5c31\u73af\u5883\u590d\u6742\u5ea6\u6765\u8bf4\uff0cClickHouse \u66f4\u9002\u5408\u73af\u5883\u590d\u6742\u5ea6\u9ad8\u7684\u60c5\u51b5\uff0c\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\u5c31\u80fd\u76f4\u63a5\u8fd0\u884c\uff1b\\n\\n\u5728\u901a\u7528\u6027\u4e0a\uff0cClickHouse \u7531\u4e8e\u662f SeaTunnel \u5b98\u65b9\u652f\u6301\u7684 JDBC diver\uff0c\u57fa\u672c\u4e0a\u652f\u6301\u6240\u6709\u7684 engine \u7684\u6570\u636e\u5199\u5165\uff0cClickHouseFile \u652f\u6301\u7684 engine \u76f8\u5bf9\u8f83\u5c11\uff1b\u4ece\u670d\u52a1\u5668\u538b\u529b\u65b9\u9762\u6765\u8bf4\uff0cClickHouseFile \u7684\u4f18\u52bf\u5728\u6d77\u91cf\u6570\u636e\u4f20\u8f93\u65f6\u5c31\u4f53\u73b0\u51fa\u6765\u4e86\uff0c\u4e0d\u4f1a\u5bf9\u670d\u52a1\u5668\u9020\u6210\u592a\u5927\u7684\u538b\u529b\u3002\\n\\n\u4f46\u8fd9\u4e8c\u8005\u5e76\u4e0d\u662f\u7ade\u4e89\u5173\u7cfb\uff0c\u9700\u8981\u6839\u636e\u4f7f\u7528\u573a\u666f\u6765\u9009\u62e9\u3002\\n\\n# 07 \u540e\u7eed\u8ba1\u5212\\n\\n\u76ee\u524d\u867d\u7136 SeaTunnel \u652f\u6301 ClickHouseFile \u63d2\u4ef6\uff0c\u4f46\u662f\u8fd8\u6709\u5f88\u591a\u5730\u65b9\u9700\u8981\u4f18\u5316\uff0c\u4e3b\u8981\u5305\u62ec\uff1a\\n\\n- Rsync \u652f\u6301\uff1b\\n    \\n- Exactly-Once \u652f\u6301\uff1b\\n    \\n- \u652f\u6301 Zero Copy \u4f20\u8f93\u6570\u636e\u6587\u4ef6\uff1b\\n    \\n- \u66f4\u591a Engine \u7684\u652f\u6301"},{"id":"/2022/05/01/_Kidswant","metadata":{"permalink":"/zh-CN/blog/2022/05/01/_Kidswant","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2022-05-01_Kidswant.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2022-05-01_Kidswant.md","title":"SeaTunnel \u5728\u5b69\u5b50\u738b\u7684\u9009\u578b\u8fc7\u7a0b\u53ca\u5e94\u7528\u6539\u9020\u5b9e\u8df5","description":"\u5728Apache SeaTunnel(Incubating) 4 \u6708Meetup\u4e0a\uff0c\u5b69\u5b50\u738b\u5927\u6570\u636e\u4e13\u5bb6\u3001OLAP\u5e73\u53f0\u67b6\u6784\u5e08 \u8881\u6d2a\u519b \u4e3a\u6211\u4eec\u5e26\u6765\u4e86\u300aApache SeaTunnel (Incubating)\u5728\u5b69\u5b50\u738b\u7684\u5e94\u7528\u5b9e\u8df5\u300b\u3002","date":"2022-05-01T00:00:00.000Z","formattedDate":"2022\u5e745\u67081\u65e5","tags":[],"readingTime":13.685,"truncated":false,"authors":[],"frontMatter":{},"prevItem":{"title":"\u767e\u4ebf\u7ea7\u6570\u636e\u540c\u6b65\uff0c\u5982\u4f55\u57fa\u4e8e SeaTunnel \u7684 ClickHouse \u5b9e\u73b0\uff1f","permalink":"/zh-CN/blog/2022/05/10/ClickHouse"},"nextItem":{"title":"\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","permalink":"/zh-CN/blog/\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0"}},"content":"![](/image/20220501/ch/0.png)\\n\\n\\n\\n\u5728Apache SeaTunnel(Incubating) 4 \u6708Meetup\u4e0a\uff0c\u5b69\u5b50\u738b\u5927\u6570\u636e\u4e13\u5bb6\u3001OLAP\u5e73\u53f0\u67b6\u6784\u5e08 \u8881\u6d2a\u519b \u4e3a\u6211\u4eec\u5e26\u6765\u4e86\u300aApache SeaTunnel (Incubating)\u5728\u5b69\u5b50\u738b\u7684\u5e94\u7528\u5b9e\u8df5\u300b\u3002\\n\\n\\n\u672c\u6b21\u6f14\u8bb2\u4e3b\u8981\u5305\u542b\u4e94\u4e2a\u90e8\u5206\uff1a\\n\\n- \u5b69\u5b50\u738b\u5f15\u5165Apache SeaTunnel (Incubating)\u7684\u80cc\u666f\u4ecb\u7ecd\\n\\n- \u5927\u6570\u636e\u5904\u7406\u4e3b\u6d41\u5de5\u5177\u5bf9\u6bd4\u5206\u6790\\n\\n- Apache SeaTunnel (Incubating)\u7684\u843d\u5730\u5b9e\u8df5\\n\\n- Apache SeaTunnel (Incubating)\u6539\u9020\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\\n\\n- \u5bf9\u5b69\u5b50\u738b\u672a\u6765\u53d1\u5c55\u65b9\u5411\u7684\u9884\u6d4b\u5c55\u671b\\n\\n\\n![](/image/20220501/ch/0-1.png)\\n\\n\\n\u8881\u6d2a\u519b\\n\\n\u5b69\u5b50\u738b \u5927\u6570\u636e\u4e13\u5bb6\u3001OLAP \u5e73\u53f0\u67b6\u6784\u5e08\u3002\u591a\u5e74\u5927\u6570\u636e\u5e73\u53f0\u7814\u53d1\u7ba1\u7406\u7ecf\u9a8c\uff0c\u5728\u6570\u636e\u8d44\u4ea7\u3001\u8840\u7f18\u56fe\u8c31\u3001\u6570\u636e\u6cbb\u7406\u3001OLAP \u7b49\u9886\u57df\u6709\u7740\u4e30\u5bcc\u7684\u7814\u7a76\u7ecf\u9a8c\u3002\\n\\n\\n## 01 \u80cc\u666f\u4ecb\u7ecd\\n\\n\\n![](/image/20220501/ch/1.png)\\n\\n\\n\u76ee\u524d\u5b69\u5b50\u738b\u7684OLAP\u5e73\u53f0\u4e3b\u8981\u5305\u542b\u5143\u6570\u636e\u5c42\u3001\u4efb\u52a1\u5c42\u3001\u5b58\u50a8\u5c42\u3001SQL\u5c42\u3001\u8c03\u5ea6\u5c42\u3001\u670d\u52a1\u5c42\u4ee5\u53ca\u76d1\u63a7\u5c42\u4e03\u90e8\u5206\uff0c\u672c\u6b21\u5206\u4eab\u4e3b\u8981\u5173\u6ce8\u4efb\u52a1\u5c42\u4e2d\u7684\u79bb\u7ebf\u4efb\u52a1\u3002\\n\\n\\n\u5176\u5b9e\u5b69\u5b50\u738b\u5185\u90e8\u6709\u4e00\u5957\u5b8c\u6574\u7684\u91c7\u96c6\u63a8\u9001\u7cfb\u7edf\uff0c\u4f46\u7531\u4e8e\u4e00\u4e9b\u5386\u53f2\u9057\u7559\u95ee\u9898\uff0c\u516c\u53f8\u73b0\u6709\u7684\u5e73\u53f0\u65e0\u6cd5\u5feb\u901f\u652f\u6301OLAP\u5e73\u53f0\u4e0a\u7ebf\uff0c\u56e0\u6b64\u5f53\u65f6\u516c\u53f8\u53ea\u80fd\u9009\u62e9\u653e\u5f03\u81ea\u8eab\u7684\u5e73\u53f0\uff0c\u8f6c\u800c\u7740\u624b\u7814\u53d1\u65b0\u7684\u7cfb\u7edf\u3002\\n\\n\\n\u5f53\u65f6\u6446\u5728OLAP\u9762\u524d\u7684\u6709\u4e09\u4e2a\u9009\u62e9\uff1a\\n\\n\\n1\u3001\u7ed9\u4e88\u91c7\u96c6\u63a8\u9001\u7cfb\u7edf\u505a\u4e8c\u6b21\u7814\u53d1\uff1b\\n\\n2\u3001\u5b8c\u5168\u81ea\u7814\uff1b\\n\\n3\u3001\u53c2\u4e0e\u5f00\u6e90\u9879\u76ee\u3002\\n\\n\\n## 02 \u5927\u6570\u636e\u5904\u7406\u4e3b\u6d41\u5de5\u5177\u5bf9\u6bd4\u5206\u6790\\n\\n\\n\u800c\u8fd9\u4e09\u9879\u9009\u62e9\u5374\u5404\u6709\u4f18\u52a3\u3002\u82e5\u91c7\u57fa\u4e8e\u91c7\u96c6\u63a8\u9001\u505a\u4e8c\u6b21\u7814\u53d1\uff0c\u5176\u4f18\u70b9\u662f\u6709\u524d\u4eba\u7684\u7ecf\u9a8c\uff0c\u80fd\u591f\u907f\u514d\u91cd\u590d\u8e29\u5751\u3002\u4f46\u7f3a\u70b9\u662f\u4ee3\u7801\u91cf\u5927\uff0c\u7814\u8bfb\u65f6\u95f4\u3001\u7814\u8bfb\u5468\u671f\u8f83\u957f\uff0c\u800c\u4e14\u62bd\u8c61\u4ee3\u7801\u8f83\u5c11\uff0c\u4e0e\u4e1a\u52a1\u7ed1\u5b9a\u7684\u5b9a\u5236\u5316\u529f\u80fd\u8f83\u591a\uff0c\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u5176\u4e8c\u5f00\u7684\u96be\u5ea6\u8f83\u5927\u3002\\n\\n\\n\u82e5\u5b8c\u5168\u81ea\u7814\uff0c\u5176\u4f18\u70b9\u7b2c\u4e00\u662f\u5f00\u53d1\u8fc7\u7a0b\u81ea\u4e3b\u53ef\u63a7\uff0c\u7b2c\u4e8c\u662f\u53ef\u4ee5\u901a\u8fc7Spark\u7b49\u4e00\u4e9b\u5f15\u64ce\u505a\u8d34\u5408\u6211\u4eec\u81ea\u8eab\u7684\u67b6\u6784\uff0c\u4f46\u7f3a\u70b9\u662f\u53ef\u80fd\u4f1a\u906d\u9047\u4e00\u4e9b\u672a\u77e5\u7684\u95ee\u9898\u3002\\n\\n\\n\u6700\u540e\u5982\u679c\u4f7f\u7528\u5f00\u6e90\u6846\u67b6\uff0c\u5176\u4f18\u70b9\u4e00\u662f\u62bd\u8c61\u4ee3\u7801\u8f83\u591a\uff0c\u4e8c\u662f\u7ecf\u8fc7\u5176\u4ed6\u5927\u5382\u6216\u516c\u53f8\u7684\u9a8c\u8bc1\uff0c\u6846\u67b6\u5728\u6027\u80fd\u548c\u7a33\u5b9a\u65b9\u9762\u80fd\u591f\u5f97\u5230\u4fdd\u969c\u3002\u56e0\u6b64\u5b69\u5b50\u738b\u5728OLAP\u6570\u636e\u540c\u6b65\u521d\u671f\uff0c\u6211\u4eec\u4e3b\u8981\u7814\u7a76\u4e86DATAX\u3001Sqoop\u548cSeaTunnel\u8fd9\u4e09\u4e2a\u5f00\u6e90\u6570\u636e\u540c\u6b65\u5de5\u5177\u3002\\n\\n\\n\\n![](/image/20220501/ch/2.png)\\n\\n\\n\u4ece\u8111\u56fe\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cSqoop\u7684\u4e3b\u8981\u529f\u80fd\u662f\u9488\u5bf9RDB\u7684\u6570\u636e\u540c\u6b65\uff0c\u5176\u5b9e\u73b0\u65b9\u5f0f\u662f\u57fa\u4e8eMAP/REDUCE\u3002Sqoop\u62e5\u6709\u4e30\u5bcc\u7684\u53c2\u6570\u548c\u547d\u4ee4\u884c\u53ef\u4ee5\u53bb\u6267\u884c\u5404\u79cd\u64cd\u4f5c\u3002Sqoop\u7684\u4f18\u70b9\u5728\u4e8e\u5b83\u9996\u5148\u8d34\u5408Hadoop\u751f\u6001\uff0c\u5e76\u5df2\u7ecf\u652f\u6301\u5927\u90e8\u5206RDB\u5230HIVE\u4efb\u610f\u6e90\u7684\u8f6c\u6362\uff0c\u62e5\u6709\u5b8c\u6574\u7684\u547d\u4ee4\u96c6\u548cAPI\u7684\u5206\u5e03\u5f0f\u6570\u636e\u540c\u6b65\u5de5\u5177\u3002\\n\\n\\n\u4f46\u5176\u7f3a\u70b9\u662fSqoop\u53ea\u652f\u6301RDB\u7684\u6570\u636e\u540c\u6b65\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6570\u636e\u6587\u4ef6\u6709\u4e00\u5b9a\u7684\u9650\u5236\uff0c\u4ee5\u53ca\u8fd8\u6ca1\u6709\u6570\u636e\u6e05\u6d17\u7684\u6982\u5ff5\u3002\\n\\n\\n\\n![](/image/20220501/ch/3.png)\\n\\n\\n\\nDataX\u7684\u4e3b\u8981\u529f\u80fd\u662f\u4efb\u610f\u6e90\u7684\u6570\u636e\u540c\u6b65\uff0c\u901a\u8fc7\u914d\u7f6e\u5316\u6587\u4ef6+\u591a\u7ebf\u7a0b\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u6d41\u7a0b\uff1aReader\u3001Framework\u548cWriter\uff0c\u5176\u4e2dFramework\u4e3b\u8981\u8d77\u5230\u901a\u4fe1\u548c\u7559\u7a7a\u7684\u4f5c\u7528\u3002\\n\\n\\nDataX\u7684\u4f18\u70b9\u662f\u5b83\u91c7\u7528\u4e86\u63d2\u4ef6\u5f0f\u7684\u5f00\u53d1\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u6d41\u63a7\u548c\u6570\u636e\u7ba1\u63a7\uff0c\u5728\u793e\u533a\u6d3b\u8dc3\u5ea6\u4e0a\uff0cDataX\u7684\u5b98\u7f51\u4e0a\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u6e90\u7684\u6570\u636e\u63a8\u9001\u3002\u4f46DataX\u7684\u7f3a\u70b9\u5728\u4e8e\u5b83\u57fa\u4e8e\u5185\u5b58\uff0c\u5bf9\u6570\u636e\u91cf\u53ef\u80fd\u5b58\u5728\u9650\u5236\u3002\\n\\n\\n\\n![](/image/20220501/ch/4.png)\\n\\n\\n\\nApache SeaTunnel (Incubating)\u505a\u7684\u4e5f\u662f\u4efb\u610f\u6e90\u7684\u6570\u636e\u540c\u6b65\uff0c\u5b9e\u73b0\u6d41\u7a0b\u5206\u4e3asource\u3001transform\u548csink\u4e09\u6b65\uff0c\u57fa\u4e8e\u914d\u7f6e\u6587\u4ef6\u3001Spark\u6216Flink\u5b9e\u73b0\u3002\u5176\u4f18\u70b9\u662f\u76ee\u524d\u5b98\u7f512.1.0\u6709\u975e\u5e38\u591a\u7684\u63d2\u4ef6\u548c\u6e90\u7684\u63a8\u9001\uff0c\u57fa\u4e8e\u63d2\u4ef6\u5f0f\u7684\u601d\u60f3\u4e5f\u4f7f\u5176\u975e\u5e38\u5bb9\u6613\u6269\u5c55\uff0c\u62e5\u62b1Spark\u548cFlink\u7684\u540c\u65f6\u4e5f\u505a\u5230\u4e86\u5206\u5e03\u5f0f\u7684\u67b6\u6784\u3002\u8981\u8bf4Apache SeaTunnel (Incubating)\u552f\u4e00\u7684\u7f3a\u70b9\u53ef\u80fd\u662f\u76ee\u524d\u7f3a\u5c11IP\u7684\u8c03\u7528\uff0cUI\u754c\u9762\u9700\u8981\u81ea\u5df1\u505a\u7ba1\u63a7\u3002\\n\\n\\n\u7efc\u4e0a\u6240\u8ff0\uff0cSqoop\u867d\u7136\u662f\u5206\u5e03\u5f0f\uff0c\u4f46\u662f\u4ec5\u652f\u6301RDB\u548cHIVE\u3001Hbase\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\u4e14\u6269\u5c55\u80fd\u529b\u5dee\uff0c\u4e0d\u5229\u4e8e\u4e8c\u5f00\u3002DataX\u6269\u5c55\u6027\u597d\uff0c\u6574\u4f53\u6027\u7a33\u5b9a\uff0c\u4f46\u7531\u4e8e\u662f\u5355\u673a\u7248\uff0c\u65e0\u6cd5\u5206\u5e03\u5f0f\u96c6\u7fa4\u90e8\u7f72\uff0c\u4e14\u6570\u636e\u62bd\u53d6\u80fd\u529b\u548c\u673a\u5668\u6027\u80fd\u6709\u5f3a\u4f9d\u8d56\u5173\u7cfb\u3002\u800cSeaTunnel\u548cDataX\u7c7b\u4f3c\u5e76\u5f25\u8865\u4e86DataX\u975e\u5206\u5e03\u5f0f\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u5b9e\u65f6\u6d41\u4e5f\u505a\u4e86\u5f88\u597d\u7684\u652f\u6301\uff0c\u867d\u7136\u662f\u65b0\u4ea7\u54c1\uff0c\u4f46\u793e\u533a\u6d3b\u8dc3\u5ea6\u9ad8\u3002\u57fa\u4e8e\u662f\u5426\u652f\u6301\u5206\u5e03\u5f0f\u3001\u662f\u5426\u9700\u8981\u5355\u72ec\u673a\u5668\u90e8\u7f72\u7b49\u8bf8\u591a\u56e0\u7d20\u7684\u8003\u91cf\uff0c\u6700\u540e\u6211\u4eec\u9009\u62e9\u4e86SeaTunnel\u3002\\n\\n\\n## 03 Apache SeaTunnel (Incubating)\u7684\u843d\u5730\u5b9e\u8df5\\n\\n\\n\u5728Apache SeaTunnel (Incubating)\u7684\u5b98\u7f51\u6211\u4eec\u53ef\u4ee5\u770b\u5230Apache SeaTunnel (Incubating)\u7684\u57fa\u7840\u6d41\u7a0b\u5305\u62ecsource\u3001transform\u548csink\u4e09\u90e8\u5206\u3002\u6839\u636e\u5b98\u7f51\u7684\u6307\u5357\uff0cApache SeaTunnel (Incubating)\u7684\u542f\u52a8\u9700\u8981\u914d\u7f6e\u811a\u672c\uff0c\u4f46\u7ecf\u8fc7\u6211\u4eec\u7684\u7814\u7a76\u53d1\u73b0\uff0cApache SeaTunnel (Incubating)\u7684\u6700\u7ec8\u6267\u884c\u662f\u4f9d\u8d56config\u6587\u4ef6\u7684spark-submit\u63d0\u4ea4\u7684\u4e00\u4e2aApplication\u5e94\u7528\u3002\\n\\n\\n\u8fd9\u79cd\u521d\u59cb\u5316\u65b9\u5f0f\u867d\u7136\u7b80\u5355\uff0c\u4f46\u5b58\u5728\u5fc5\u987b\u4f9d\u8d56Config\u6587\u4ef6\u7684\u95ee\u9898\uff0c\u6bcf\u6b21\u8fd0\u884c\u4efb\u52a1\u540e\u90fd\u4f1a\u751f\u6210\u518d\u8fdb\u884c\u6e05\u9664\uff0c\u867d\u7136\u53ef\u4ee5\u5728\u8c03\u5ea6\u811a\u672c\u4e2d\u52a8\u6001\u751f\u6210\uff0c\u4f46\u4e5f\u4ea7\u751f\u4e86\u4e24\u4e2a\u95ee\u9898\u30021\u3001\u9891\u7e41\u7684\u78c1\u76d8\u64cd\u4f5c\u662f\u5426\u6709\u610f\u4e49\uff1b2\u3001\u662f\u5426\u5b58\u5728\u66f4\u4e3a\u9ad8\u6548\u7684\u65b9\u5f0f\u652f\u6301Apache SeaTunnel (Incubating)\u7684\u8fd0\u884c\u3002\\n\\n\\n\\n![](/image/20220501/ch/5.png)\\n\\n\\n\\n\u57fa\u4e8e\u4ee5\u4e0a\u8003\u91cf\uff0c\u5728\u6700\u7ec8\u7684\u8bbe\u8ba1\u65b9\u6848\u4e2d\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u4e00\u4e2a\u7edf\u4e00\u914d\u7f6e\u6a21\u677f\u5e73\u53f0\u6a21\u5757\u3002\u8c03\u5ea6\u65f6\u53ea\u9700\u8981\u53d1\u8d77\u4e00\u4e2a\u63d0\u4ea4\u547d\u4ee4\uff0c\u7531Apache SeaTunnel (Incubating)\u81ea\u8eab\u53bb\u7edf\u4e00\u914d\u7f6e\u6a21\u677f\u5e73\u53f0\u4e2d\u62c9\u53d6\u914d\u7f6e\u4fe1\u606f\uff0c\u518d\u53bb\u88c5\u8f7d\u548c\u521d\u59cb\u5316\u53c2\u6570\u3002\\n\\n\\n\\n![](/image/20220501/ch/5-1.png)\\n\\n\\n\\n\u4e0a\u56fe\u5c55\u793a\u7684\u4fbf\u662f\u5b69\u5b50\u738bOLAP\u7684\u4e1a\u52a1\u6d41\u7a0b\uff0c\u4e3b\u8981\u5206\u4e3a\u4e09\u5757\u3002\u6570\u636e\u4eceParquet\uff0c\u5373Hive\uff0c\u901a\u8fc7Parquet\u8868\u7684\u65b9\u5f0f\u5230KYLIN\u548cCK source\u7684\u6574\u4f53\u6d41\u7a0b\u3002\\n\\n\\n\\n![](/image/20220501/ch/7.png)\\n\\n\\n\\n\u8fd9\u662f\u6211\u4eec\u5efa\u6a21\u7684\u9875\u9762\uff0c\u4e3b\u8981\u901a\u8fc7\u62d6\u62c9\u62fd\u7684\u65b9\u5f0f\u751f\u6210\u6700\u7ec8\u6a21\u578b\uff0c\u6bcf\u4e2a\u8868\u4e4b\u95f4\u901a\u8fc7\u4e00\u4e9b\u4ea4\u6613\u64cd\u4f5c\uff0c\u53f3\u4fa7\u662f\u9488\u5bf9Apache SeaTunnel (Incubating)\u7684\u5fae\u5904\u7406\u3002\\n\\n\\n\\n![](/image/20220501/ch/8.jpg)\\n\\n\\n\\n\u56e0\u6b64\u6211\u4eec\u6700\u7ec8\u63d0\u4ea4\u7684\u547d\u4ee4\u5982\u4e0a\uff0c\u5176\u4e2d\u6807\u7ea2\u7684\u9996\u5148\u662f\u3010-conf customconfig/jars\u3011\uff0c\u6307\u7528\u6237\u53ef\u4ee5\u518d\u7edf\u4e00\u914d\u7f6e\u6a21\u677f\u5e73\u53f0\u8fdb\u884c\u5904\u7406\uff0c\u6216\u8005\u5efa\u6a21\u65f6\u5355\u72ec\u6307\u5b9a\u3002\u6700\u540e\u6807\u7ea2\u7684\u3010421 $start_time $end_time $taskType\u3011Unicode\uff0c\u5c5e\u4e8e\u552f\u4e00\u7f16\u7801\u3002\\n\\n\\n\u4e0b\u65b9\u56fe\u5de6\u5c31\u662f\u6211\u4eec\u6700\u7ec8\u8c03\u5ea6\u811a\u672c\u63d0\u4ea4\u768438\u4e2a\u547d\u4ee4\uff0c\u4e0b\u65b9\u56fe\u53f3\u662f\u9488\u5bf9Apache SeaTunnel (Incubating)\u505a\u7684\u6539\u9020\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u8f83\u4e3a\u7279\u6b8a\u7684\u540d\u4e3aWaterdropContext\u7684\u5de5\u5177\u7c7b\u3002\u53ef\u4ee5\u9996\u5148\u5224\u65adUnicode\u662f\u5426\u5b58\u5728\uff0c\u518d\u901a\u8fc7Unicode_code\u6765\u83b7\u53d6\u4e0d\u540c\u6a21\u677f\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u907f\u514d\u4e86config\u6587\u4ef6\u7684\u64cd\u4f5c\u3002\\n\\n\\n\u5728\u6700\u540e\u7684reportMeta\u5219\u662f\u7528\u4e8e\u5728\u4efb\u52a1\u6267\u884c\u5b8c\u6210\u540e\u4e0a\u62a5\u4e00\u4e9b\u4fe1\u606f\uff0c\u8fd9\u4e5f\u4f1a\u5728Apache SeaTunnel (Incubating)\u4e2d\u5b8c\u6210\u3002\\n\\n\\n\\n![](/image/20220501/ch/9.png)\\n\\n\\n\\n![](/image/20220501/ch/10.png)\\n\\n\\n\\n![](/image/20220501/ch/11.png)\\n\\n\\n\\n\u5728\u6700\u7ec8\u5b8c\u6210\u7684config\u6587\u4ef6\u5982\u4e0a\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\u5728transform\u65b9\u9762\uff0c\u5b69\u5b50\u738b\u505a\u4e86\u4e00\u4e9b\u6539\u9020\u3002\u9996\u5148\u662f\u9488\u5bf9\u624b\u673a\u6216\u8005\u8eab\u4efd\u8bc1\u53f7\u7b49\u505a\u8131\u654f\u5904\u7406\uff0c\u5982\u679c\u7528\u6237\u6307\u5b9a\u5b57\u6bb5\uff0c\u5c31\u6309\u7167\u5b57\u6bb5\u505a\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5b57\u6bb5\u5c31\u626b\u63cf\u6240\u6709\u5b57\u6bb5\uff0c\u7136\u540e\u6839\u636e\u6a21\u5f0f\u5339\u914d\uff0c\u8fdb\u884c\u8131\u654f\u52a0\u5bc6\u3002\\n\\n\\n\u7b2c\u4e8ctransform\u8fd8\u652f\u6301\u81ea\u5b9a\u4e49\u5904\u7406\uff0c\u5982\u4e0a\u6587\u8bf4\u9053OLAP\u5efa\u6a21\u7684\u65f6\u5019\u8bf4\u5230\u3002\u52a0\u5165\u4e86HideStr\uff0c\u53ef\u4ee5\u4fdd\u7559\u4e00\u4e32\u5b57\u7b26\u7684\u524d\u5341\u4e2a\u5b57\u6bb5\uff0c\u52a0\u5bc6\u540e\u65b9\u7684\u6240\u6709\u5b57\u7b26\uff0c\u5728\u6570\u636e\u5b89\u5168\u4e0a\u6709\u6240\u4fdd\u969c\u3002\\n\\n\\n\u7136\u540e\uff0c\u5728sink\u7aef\uff0c\u6211\u4eec\u4e3a\u4e86\u652f\u6301\u4efb\u52a1\u7684\u5e42\u7b49\u6027\uff0c\u6211\u4eec\u52a0\u5165\u4e86pre_sql\uff0c\u8fd9\u4e3b\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u662f\u6570\u636e\u7684\u5220\u9664\uff0c\u6216\u5206\u533a\u7684\u5220\u9664\uff0c\u56e0\u4e3a\u4efb\u52a1\u5728\u751f\u4ea7\u8fc7\u7a0b\u4e2d\u4e0d\u53ef\u80fd\u53ea\u8fd0\u884c\u4e00\u6b21\uff0c\u4e00\u65e6\u51fa\u73b0\u91cd\u8dd1\u6216\u8865\u6570\u7b49\u64cd\u4f5c\uff0c\u5c31\u9700\u8981\u8fd9\u4e00\u90e8\u5206\u4e3a\u6570\u636e\u7684\u4e0d\u540c\u548c\u6b63\u786e\u6027\u505a\u8003\u91cf\u3002\\n\\n\\n\u5728\u56fe\u53f3\u65b9\u7684\u4e00\u4e2aClickhouse\u7684Sink\u7aef\uff0c\u8fd9\u91cc\u6211\u4eec\u52a0\u5165\u4e86\u4e00\u4e2ais_senseless_mode\uff0c\u5b83\u7ec4\u6210\u4e86\u4e00\u4e2a\u8bfb\u5199\u5206\u79bb\u7684\u65e0\u611f\u6a21\u5f0f\uff0c\u7528\u6237\u5728\u67e5\u8be2\u548c\u8865\u6570\u7684\u65f6\u5019\u4e0d\u611f\u77e5\u6574\u4f53\u533a\u57df\uff0c\u800c\u662f\u7528\u5230CK\u7684\u5206\u533a\u8f6c\u6362\uff0c\u5373\u540d\u4e3aMOVE PARTITION TO TABLE\u7684\u547d\u4ee4\u8fdb\u884c\u64cd\u4f5c\u7684\u3002\\n\\n\\n\\n\u6b64\u5904\u7279\u522b\u8bf4\u660eKYLIN\u7684Sink\u7aef\uff0cKYLIN\u662f\u4e00\u4e2a\u975e\u5e38\u7279\u6b8a\u7684\u6e90\uff0c\u62e5\u6709\u81ea\u5df1\u4e00\u6574\u5957\u6570\u636e\u5f55\u5165\u7684\u903b\u8f91\uff0c\u800c\u4e14\uff0c\u4ed6\u6709\u81ea\u5df1\u7684\u76d1\u63a7\u9875\u9762\uff0c\u56e0\u6b64\u6211\u4eec\u7ed9\u4e88KYLIN\u7684\u6539\u9020\u53ea\u662f\u7b80\u5355\u5730\u8c03\u7528\u5176API\u64cd\u4f5c\uff0c\u5728\u4f7f\u7528KYLIN\u65f6\u4e5f\u53ea\u662f\u7b80\u5355\u7684API\u8c03\u7528\u548c\u4e0d\u65ad\u8f6e\u8be2\u7684\u72b6\u6001\uff0c\u6240\u4ee5KYLIN\u8fd9\u5757\u7684\u8d44\u6e90\u5728\u7edf\u4e00\u6a21\u677f\u914d\u7f6e\u5e73\u53f0\u5c31\u88ab\u9650\u5236\u5730\u5f88\u5c0f\u3002\\n\\n\\n\\n![](/image/20220501/ch/12.jpg)\\n\\n\\n\\n## 04 Apache SeaTunnel (Incubating)\u6539\u9020\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\\n\\n\\n1\u3001OOM&Too many Parts\\n\\n\\n\u95ee\u9898\u901a\u5e38\u4f1a\u51fa\u73b0\u5728Hive\u5230Hive\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5373\u4f7f\u6211\u4eec\u901a\u8fc7\u4e86\u81ea\u52a8\u8d44\u6e90\u7684\u5206\u914d\uff0c\u4f46\u4e5f\u5b58\u5728\u6570\u636e\u7a81\u7136\u95f4\u53d8\u5927\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u5728\u4e3e\u529e\u4e86\u591a\u6b21\u6d3b\u52a8\u4e4b\u540e\u3002\u8fd9\u6837\u7684\u95ee\u9898\u5176\u5b9e\u53ea\u80fd\u901a\u8fc7\u624b\u52a8\u52a8\u6001\u5730\u8c03\u53c2\uff0c\u8c03\u6574\u6570\u636e\u540c\u6b65\u6279\u91cf\u65f6\u95f4\u6765\u907f\u514d\u3002\u672a\u6765\u6211\u4eec\u53ef\u80fd\u5c3d\u529b\u53bb\u5b8c\u6210\u5bf9\u4e8e\u6570\u636e\u91cf\u7684\u638c\u63e1\uff0c\u505a\u5230\u7cbe\u7ec6\u7684\u63a7\u5236\u3002\\n\\n\\n2\u3001\u5b57\u6bb5\u3001\u7c7b\u578b\u4e0d\u4e00\u81f4\u95ee\u9898\\n\\n\\n\u6a21\u578b\u4e0a\u7ebf\u540e\uff0c\u4efb\u52a1\u4f9d\u8d56\u7684\u4e0a\u6e38\u8868\u6216\u8005\u5b57\u6bb5\uff0c\u7528\u6237\u90fd\u4f1a\u505a\u4e00\u4e9b\u4fee\u6539\uff0c\u8fd9\u4e9b\u4fee\u6539\u82e5\u65e0\u6cd5\u611f\u77e5\uff0c\u53ef\u80fd\u5bfc\u81f4\u4efb\u52a1\u7684\u5931\u8d25\u3002\u76ee\u524d\u89e3\u51b3\u65b9\u6cd5\u662f\u4f9d\u6258\u8840\u7f18+\u5feb\u7167\u7684\u65b9\u5f0f\u8fdb\u884c\u63d0\u524d\u611f\u77e5\u6765\u907f\u514d\u9519\u8bef\u3002\\n\\n\\n3\u3001\u81ea\u5b9a\u4e49\u6570\u636e\u6e90&\u81ea\u5b9a\u4e49\u5206\u9694\u7b26\\n\\n\\n\u5982\u8d22\u52a1\u90e8\u95e8\u9700\u8981\u5355\u72ec\u4f7f\u7528\u7684\u5206\u5272\u7b26\uff0c\u6216\u662fjar\u4fe1\u606f\uff0c\u73b0\u5728\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u5728\u7edf\u4e00\u914d\u7f6e\u6a21\u677f\u5e73\u53f0\u6307\u5b9a\u52a0\u8f7d\u989d\u5916jar\u4fe1\u606f\u4ee5\u53ca\u5206\u5272\u7b26\u4fe1\u606f\u3002\\n\\n\\n4\u3001\u6570\u636e\u503e\u659c\u95ee\u9898\\n\\n\\n\u8fd9\u53ef\u80fd\u56e0\u4e3a\u7528\u6237\u81ea\u5df1\u8bbe\u7f6e\u4e86\u5e76\u884c\u5ea6\uff0c\u4f46\u65e0\u6cd5\u505a\u5230\u5c3d\u5584\u5c3d\u7f8e\u3002\u8fd9\u4e00\u5757\u6211\u4eec\u6682\u65f6\u8fd8\u6ca1\u6709\u5b8c\u6210\u5904\u7406\uff0c\u540e\u7eed\u7684\u601d\u8def\u53ef\u80fd\u5728Source\u6a21\u5757\u4e2d\u6dfb\u52a0post\u5904\u7406\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u6253\u6563\uff0c\u5b8c\u6210\u503e\u659c\u3002\\n\\n\\n5\u3001KYLIN\u5168\u5c40\u5b57\u5178\u9501\u95ee\u9898\\n\\n\\n\u968f\u7740\u4e1a\u52a1\u53d1\u5c55\uff0c\u4e00\u4e2acube\u65e0\u6cd5\u6ee1\u8db3\u7528\u6237\u4f7f\u7528\uff0c\u5c31\u80fd\u9700\u8981\u5efa\u7acb\u591a\u4e2acube\uff0c\u5982\u679c\u591a\u4e2acube\u4e4b\u95f4\u7528\u4e86\u76f8\u540c\u7684\u5b57\u6bb5\uff0c\u5c31\u4f1a\u9047\u5230KYLIN\u5168\u5c40\u5b57\u5178\u9501\u7684\u95ee\u9898\u3002\u76ee\u524d\u89e3\u51b3\u7684\u601d\u8def\u662f\u628a\u4e24\u4e2a\u6216\u591a\u4e2a\u4efb\u52a1\u4e4b\u95f4\u7684\u8c03\u5ea6\u65f6\u95f4\u8fdb\u884c\u9694\u5f00\uff0c\u5982\u679c\u65e0\u6cd5\u9694\u5f00\uff0c\u53ef\u4ee5\u505a\u4e00\u4e2a\u5206\u5e03\u5f0f\u9501\u7684\u63a7\u5236\u3002KYLIN\u7684sink\u7aef\u5fc5\u987b\u8981\u62ff\u5230\u9501\u624d\u80fd\u8fd0\u884c\u3002\\n\\n\\n05 \u5bf9\u5b69\u5b50\u738b\u672a\u6765\u53d1\u5c55\u65b9\u5411\u7684\u9884\u6d4b\u5c55\u671b\\n\\n\\n- \u591a\u6e90\u6570\u636e\u540c\u6b65\uff0c\u672a\u6765\u53ef\u80fd\u9488\u5bf9RDB\u6e90\u8fdb\u884c\u5904\u7406\\n\\n- \u57fa\u4e8e\u5b9e\u65f6Flink\u7684\u5b9e\u73b0\\n\\n- \u63a5\u7ba1\u5df2\u6709\u91c7\u96c6\u8c03\u5ea6\u5e73\u53f0\uff08\u4e3b\u8981\u89e3\u51b3\u5206\u5e93\u5206\u8868\u7684\u95ee\u9898\uff09\\n\\n- \u6570\u636e\u8d28\u91cf\u6821\u9a8c\uff0c\u50cf\u4e00\u4e9b\u7a7a\u503c\u3001\u6574\u4e2a\u6570\u636e\u7684\u7a7a\u7f6e\u7387\u3001\u4e3b\u65f6\u95f4\u7684\u5224\u65ad\u7b49\\n\\n\\n\u6211\u7684\u5206\u4eab\u5c31\u5230\u8fd9\u91cc\uff0c\u5e0c\u671b\u4ee5\u540e\u53ef\u4ee5\u548c\u793e\u533a\u591a\u591a\u4ea4\u6d41\uff0c\u5171\u540c\u8fdb\u6b65\uff0c\u8c22\u8c22\uff01"},{"id":"\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","metadata":{"permalink":"/zh-CN/blog/\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2022-04-08-Innovation_of_Data_Integration_Technology_in_Intelligent_Era.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2022-04-08-Innovation_of_Data_Integration_Technology_in_Intelligent_Era.md","title":"\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","description":"1","date":"2022-04-08T00:00:00.000Z","formattedDate":"2022\u5e744\u67088\u65e5","tags":[{"label":"Meetup","permalink":"/zh-CN/blog/tags/meetup"}],"readingTime":4.19,"truncated":false,"authors":[],"frontMatter":{"slug":"\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","title":"\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","tags":["Meetup"]},"prevItem":{"title":"SeaTunnel \u5728\u5b69\u5b50\u738b\u7684\u9009\u578b\u8fc7\u7a0b\u53ca\u5e94\u7528\u6539\u9020\u5b9e\u8df5","permalink":"/zh-CN/blog/2022/05/01/_Kidswant"},"nextItem":{"title":"2.1.0 Released! Apache SeaTunnel(Incubating) First Apache Release Refactors Kernel and Supports Flink Overall","permalink":"/zh-CN/blog/2.1.0-Released-Apache-SeaTunnel-Incubating-First-Apache-Release-Refactors-Kernel-and-Supports-Flink-Overall"}},"content":"![1](/image/20220416/1.png)\\n\\n\\n\u53ef\u7ba1\u7406\uff0c\u53ef\u8c03\u7528\uff0c\u53ef\u8ba1\u7b97\uff0c\u53ef\u53d8\u73b0\u7684\u6570\u636e\u8d44\u6e90\u624d\u80fd\u6210\u4e3a\u8d44\u4ea7\uff0c\u4fe1\u606f\u7cfb\u7edf\u7684\u4e92\u8054\u4e92\u901a\u4f7f\u5f97\u591a\u6e90\u548c\u591a\u7ef4\u5ea6\u7684\u6570\u636e\u96c6\u6210\u9700\u6c42\u5de8\u5927\uff0c\u8fd9\u5c31\u5bf9\u6570\u636e\u5904\u7406\u548c\u96c6\u6210\u7684\u5de5\u5177\u63d0\u51fa\u4e86\u4e25\u82db\u7684\u8981\u6c42\u3002\\n\\n\u667a\u80fd\u5316\u65f6\u4ee3\uff0c\u5728\u201c\u667a\u6167\u57ce\u5e02\u201d\u3001\u201c\u667a\u6167\u6cbb\u7406\u201d\u3001\u201c\u4ea7\u54c1\u667a\u80fd\u5316\u201d\u7b49\u7684\u8d8b\u52bf\u4e0b\uff0c\u4f01\u4e1a\u5927\u591a\u9762\u4e34\u5982\u4f55\u5b9e\u73b0\u9ad8\u6548\u6570\u636e\u63a8\u9001\uff0c\u63d0\u9ad8\u5e73\u53f0\u8d28\u91cf\uff0c\u4ee5\u53ca\u4fdd\u969c\u6570\u636e\u5b89\u5168\u7684\u6311\u6218\u3002\u9009\u5bf9\u6570\u636e\u96c6\u6210\u5de5\u5177\u548c\u5e73\u53f0\uff0c\u6570\u636e\u624d\u80fd\u53d1\u6325\u51fa\u505a\u5927\u7684\u4f5c\u7528\u3002\\n\\nApache SeaTunnel (Incubating) \u4f5c\u4e3a\u4e0b\u4e00\u4ee3\u9ad8\u6027\u80fd\u3001\u5206\u5e03\u5f0f\u3001\u6d77\u91cf\u6570\u636e\u96c6\u6210\u6846\u67b6\uff0c\u81f4\u529b\u4e8e\u8ba9\u6570\u636e\u540c\u6b65\u66f4\u7b80\u5355\uff0c\u66f4\u9ad8\u6548\uff0c\u52a0\u5feb\u5206\u5e03\u5f0f\u6570\u636e\u5904\u7406\u80fd\u529b\u5728\u751f\u4ea7\u73af\u5883\u843d\u5730\u3002\\n\\n\u5728 Apache SeaTunnel(Incubating) Meetup\uff082022\xa0\u5e74\xa04\xa0\u6708\xa016\u65e5\uff09\uff0cApache SeaTunnel(Incubating) \u793e\u533a\u5c06\u9080\u8bf7\u4e86 Apache SeaTunnel(Incubating)\u7684\u8d44\u6df1\u7528\u6237\uff0c\u5206\u4eab Apache SeaTunnel(Incubating)\u5728\u667a\u80fd\u5316\u751f\u4ea7\u73af\u5883\u4e2d\u843d\u5730\u7684\u6700\u4f73\u5b9e\u8df5\u3002\u6b64\u5916\uff0c\u8fd8\u4f1a\u6709\u8d21\u732e\u8005\u73b0\u573a\u8fdb\u884c Apache SeaTunnel(Incubating)\u7684\u6e90\u7801\u89e3\u6790\uff0c\u8ba9\u4f60\u5bf9 Apache SeaTunnel(Incubating)\u6709\u4e00\u4e2a\u66f4\u52a0\u5168\u9762\u800c\u6df1\u5165\u7684\u4e86\u89e3\u3002\\n\\n\u65e0\u8bba\u4f60\u662f\u5bf9 Apache SeaTunnel(Incubating)\u62b1\u6709\u5174\u8da3\u7684\u521d\u5b66\u8005\uff0c\u8fd8\u662f\u5728\u65e5\u5e38\u7684\u751f\u4ea7\u5b9e\u8df5\u4e2d\u906d\u9047\u4e86\u590d\u6742\u68d8\u624b\u7684\u90e8\u7f72\u95ee\u9898\uff0c\u90fd\u53ef\u4ee5\u6765\u5230\u8fd9\u91cc\uff0c\u4e0e\u6211\u4eec\u7684\u8bb2\u5e08\u8fd1\u8ddd\u79bb\u6c9f\u901a\uff0c\u5f97\u5230\u4f60\u60f3\u8981\u7684\u7b54\u6848\u3002\\n\\n## 01 \u62a5 \u540d \u901a \u9053\\n\\nApache SeaTunnel (Incubating) Meetup | 4 \u6708\u7ebf\u4e0a\u76f4\u64ad\u62a5\u540d\u901a\u9053\u5df2\u5f00\u542f\uff0c\u8d76\u5feb\u9884\u7ea6\u5427\uff01\\n\\n\u65f6\u95f4\uff1a2022-4-16 14:00-17:00\\n\\n\u5f62\u5f0f\uff1a\u7ebf\u4e0a\u76f4\u64ad\\n\\n\u70b9\u51fb\u94fe\u63a5\u6216\u626b\u7801\u9884\u7ea6\u62a5\u540d\uff08\u514d\u8d39\uff09\uff1a\\n\\n![2](/image/20220416/2.png)\\n\\n\\n\u626b\u7801\u9884\u7ea6\u62a5\u540d\\n\\n![3](/image/20220416/4.png)\\n\\n\\n\u626b\u7801\u8fdb\u76f4\u64ad\u7fa4\\n\\n\\n## 02 \u6d3b \u52a8 \u4eae \u70b9\\n\\n* \u884c\u4e1a\u6848\u4f8b\u8be6\u89e3\\n* \u7279\u8272\u529f\u80fd\u5206\u6790\\n* \u4e00\u7ebf\u4f01\u4e1a\u8e29\u5751\u5fc3\u5f97\\n* \u5f00\u6e90\u793e\u533a\u5b9e\u6218\u653b\u7565\\n* \u884c\u4e1a\u6280\u672f\u4e13\u5bb6\u9762\u5bf9\u9762 Q&A\\n* \u60ca\u559c\u793c\u54c1\u9001\u4e0d\u505c\\n## 03 \u6d3b \u52a8 \u8bae \u7a0b\\n\\n\u6d3b\u52a8\u5f53\u5929\uff0c\u5c06\u6709\u6765\u81ea\u5b69\u5b50\u738b\u3001oppo \u7684\u5de5\u7a0b\u5e08\u73b0\u573a\u5206\u4eab\u6765\u81ea\u5382\u5546\u7684\u4e00\u7ebf\u524d\u6cbf\u5b9e\u8df5\u7ecf\u9a8c\uff0c\u8fd8\u6709\u6765\u81ea\u767d\u9cb8\u5f00\u6e90\u7684\u9ad8\u7ea7\u5de5\u7a0b\u5e08\u5bf9 Apache SeaTunnel(Incubating)\u7684\u91cd\u8981\u529f\u80fd\u66f4\u65b0\u8fdb\u884c\u201c\u786c\u6838\u201d\u8bb2\u89e3\uff0c\u5e72\u8d27\u6ee1\u6ee1\u3002\\n\\n![4](/image/20220416/5.png)\\n\\n\\n\u8881\u6d2a\u519b\xa0\u5b69\u5b50\u738b \u5927\u6570\u636e\u4e13\u5bb6\u3001OLAP \u5e73\u53f0\u67b6\u6784\u5e08\\n\\n\u591a\u5e74\u5927\u6570\u636e\u5e73\u53f0\u7814\u53d1\u7ba1\u7406\u7ecf\u9a8c\uff0c\u5728\u6570\u636e\u8d44\u4ea7\u3001\u8840\u7f18\u56fe\u8c31\u3001\u6570\u636e\u6cbb\u7406\u3001OLAP \u7b49\u9886\u57df\u6709\u7740\u4e30\u5bcc\u7684\u7814\u7a76\u7ecf\u9a8c\\n\\n\u6f14\u8bb2\u65f6\u95f4\uff1a14:00-14:40\\n\\n\u6f14\u8bb2\u9898\u76ee\uff1aApache SeaTunnel(Incubating) \u5728\u5b69\u5b50\u738b\u7684\u5e94\u7528\u5b9e\u8df5\\n\\n\u6f14\u8bb2\u6982\u8981\uff1a \u5982\u4f55\u5b9e\u73b0\u9ad8\u6548\u6570\u636e\u63a8\u9001\uff1f\u5982\u4f55\u63d0\u9ad8\u5e73\u53f0\u8d28\u91cf\uff1f\u5982\u4f55\u4fdd\u969c\u6570\u636e\u5b89\u5168\uff1f\u5b69\u5b50\u738b\u53c8\u5bf9 Apache SeaTunnel(Incubating)\u505a\u4e86\u54ea\u4e9b\u6539\u9020\uff1f\\n\\n![6](/image/20220416/6.png)\\n\\n\\n\u8303\u4f73\xa0\u767d\u9cb8\u5f00\u6e90\xa0 \u9ad8\u7ea7\u5de5\u7a0b\u5e08 Apache SeaTunnel Contributor\\n\\n\u6f14\u8bb2\u65f6\u95f4\uff1a 14:40-15:20\\n\\n\u6f14\u8bb2\u9898\u76ee\uff1a \u57fa\u4e8e Apache SeaTunnel(Incubating)\u7684 Clickhouse Bulk Load \u5b9e\u73b0\\n\\n\u6f14\u8bb2\u6982\u8981\uff1a \u901a\u8fc7\u6269\u5c55 Apache SeaTunnel(Incubating)\u7684 Connector\u5b9e\u73b0 Clickhouse\u7684 bulk load \u6570\u636e\u540c\u6b65\u529f\u80fd\u3002\\n\\n\\n![7](/image/20220416/7.png)\\n\\n\\n\u738b\u5b50\u8d85\xa0oppo\xa0\u9ad8\u7ea7\u540e\u7aef\u5de5\u7a0b\u5e08\\n\\n\u6f14\u8bb2\u65f6\u95f4\uff1a 15:50-16:30\\n\\n\u6f14\u8bb2\u9898\u76ee\uff1a oppo\u667a\u80fd\u63a8\u8350\u6837\u672c\u4e2d\u5fc3\u57fa\u4e8e Apache SeaTunnel(Incubating)\u7684\u6280\u672f\u9769\u65b0\\n\\n\u6f14\u8bb2\u6982\u8981\uff1a \u4ecb\u7ecd oppo \u667a\u80fd\u63a8\u8350\u673a\u5668\u5b66\u4e60\u6837\u672c\u6d41\u7a0b\u7684\u6f14\u8fdb\u53ca Apache \xa0SeaTunnel(Incubating)\xa0\u5728\u5176\u4e2d\u53d1\u6325\u7684\u4f5c\u7528\u3002\\n\\n\u9664\u4e86\u7cbe\u5f69\u7684\u6f14\u8bb2\u4e4b\u5916\uff0c\u73b0\u573a\u8fd8\u8bbe\u7f6e\u4e86\u591a\u4e2a\u62bd\u5956\u73af\u8282\uff0c\u53c2\u4e0e\u62bd\u5956\u6709\u673a\u4f1a\u83b7\u5f97\xa0Apache\xa0SeaTunnel(Incubating)\xa0\u7cbe\u7f8e\u5b9a\u5236\u793c\u54c1\uff0c\u656c\u8bf7\u671f\u5f85~"},{"id":"2.1.0-Released-Apache-SeaTunnel-Incubating-First-Apache-Release-Refactors-Kernel-and-Supports-Flink-Overall","metadata":{"permalink":"/zh-CN/blog/2.1.0-Released-Apache-SeaTunnel-Incubating-First-Apache-Release-Refactors-Kernel-and-Supports-Flink-Overall","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2022-03-18-2-1-0-release.md","source":"@site/blog/2022-03-18-2-1-0-release.md","title":"2.1.0 Released! Apache SeaTunnel(Incubating) First Apache Release Refactors Kernel and Supports Flink Overall","description":"On December 9, 2021, Apache SeaTunnel(Incubating) entered the Apache Incubator, and after nearly four months of endeavor by the community contributors, we passed the first Apache version control in one go and released it on March 18, 2022. This means that version 2.1.0 is an official release that is safe for corporate and individual users to use, which has been voted on by the Apache SeaTunnel(Incubating) community and the Apache Incubator.","date":"2022-03-18T00:00:00.000Z","formattedDate":"2022\u5e743\u670818\u65e5","tags":[{"label":"2.1.0","permalink":"/zh-CN/blog/tags/2-1-0"},{"label":"Release","permalink":"/zh-CN/blog/tags/release"}],"readingTime":5.005,"truncated":false,"authors":[],"frontMatter":{"slug":"2.1.0-Released-Apache-SeaTunnel-Incubating-First-Apache-Release-Refactors-Kernel-and-Supports-Flink-Overall","title":"2.1.0 Released! Apache SeaTunnel(Incubating) First Apache Release Refactors Kernel and Supports Flink Overall","tags":["2.1.0","Release"]},"prevItem":{"title":"\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0","permalink":"/zh-CN/blog/\u667a\u80fd\u5316\u65f6\u4ee3\u7684\u6570\u636e\u96c6\u6210\u6280\u672f\u9769\u65b0"},"nextItem":{"title":"\u5982\u4f55\u5feb\u901f\u5730\u628a HDFS \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","permalink":"/zh-CN/blog/hdfs-to-clickhouse"}},"content":"On December 9, 2021, Apache SeaTunnel(Incubating) entered the Apache Incubator, and after nearly four months of endeavor by the community contributors, we passed the first Apache version control in one go and released it on March 18, 2022. This means that version 2.1.0 is an official release that is safe for corporate and individual users to use, which has been voted on by the Apache SeaTunnel(Incubating) community and the Apache Incubator.\\n\\n**Note:** A\xa0**software license**\xa0is a legal instrument governing the use or redistribution of software. A typical software license grants the\xa0licensee, typically an\xa0end-user, permission to use one or more copies of the software in ways where such a use would otherwise potentially constitute copyright infringement of the software owner\'s\xa0exclusive rights\xa0under copyright. Effectively, a software license is a contract between the software developer and the user that guarantees the user will not be sued within the scope of the license. \\n\\nBefore and after entering the incubator, we spent a lot of time sorting through the external dependencies of the entire project to ensure compliance. It is important to note that the choice of License for open source software does not necessarily mean that the project itself is compliant. While the stringent version control process of ASF ensures compliance and legal distribution of the software license maximumly.\\n\\n## Release Note\\n\\nWe bring the following **key features**to this release:\\n\\n1. The kernel of the microkernel plug-in architecture is overall optimized, which is mainly in Java. And a lot of improvements are made to command line parameter parsing, plug-in loading, etc. At the same time, the users (or contributors) can choose the language to develop plug-in extensions, which greatly reduces the development threshold of plug-ins.\\n2. Overall support for Flink, while the users are free to choose the underlying engine. This version also brings a large number of Flink plug-ins and welcomes anyone to contribute more.\\n3. Provide local development fast startup environment support (example), allow contributors or users quickly and smoothly start without changing any code to facilitate rapid local development debugging. This is certainly exciting news for contributors or users who need to customize their plugins. In fact, we\'ve had a large number of contributors use this approach to quickly test the plugin in our pre-release testing.\\n4. With Docker container installation provided, users can deploy and install Apache SeaTunnel(Incubating) via Docker extremely fast, and we will iterate around Docker & K8s in the future, any interesting proposal on this is welcomed.\\n## Specific release notes\uff1a\\n\\n### [Features]\\n\\n* Use JCommander to do command line parameter parsing, making developers focus on the logic itself.\\n* Flink is upgraded from 1.9 to 1.13.5, keeping compatibility with older versions and preparing for subsequent CDC.\\n* Support for Doris, Hudi, Phoenix, Druid, and other Connector plugins, and you can find complete plugin support here [plugins-supported-by-seatunnel]([https://github.com/apache/incubator-seatunnel#plugins-supported-by-seatunnel](https://github.com/apache/incubator-seatunnel#plugins-supported-by-seatunnel)).\\n* Local development extremely fast starts environment support. It can be achieved by using the example module without modifying any code, which is convenient for local debugging.\\n* Support for installing and trying out Apache SeaTunnel(Incubating) via Docker containers.\\n* SQL component supports SET statements and configuration variables.\\n* Config module refactoring to facilitate understanding for the contributors while ensuring code compliance (License) of the project.\\n* Project structure realigned to fit the new Roadmap.\\n* CI&CD support, code quality automation control (more plans will be carried out to support CI&CD development).\\n\\n## Acknowledgments\\n\\nThanks to the following contributors who participated in this version release (GitHub IDs, in no particular order).\\n\\nAl-assad, BenJFan, CalvinKirs, JNSimba, JiangTChen, Rianico, TyrantLucifer, Yves-yuan, ZhangchengHu0923, agendazhang, an-shi-chi-fan, asdf2014, bigdataf, chaozwn, choucmei, dailidong, dongzl, felix-thinkingdata, fengyuceNv, garyelephant, kalencaya, kezhenxu94, legendtkl, leo65535, liujinhui1994, mans2singh, marklightning, mosence, nielifeng, ououtt, ruanwenjun, simon824, totalo, wntp, wolfboys, wuchunfu, xbkaishui, xtr1993, yx91490, zhangbutao, zhaomin1423, zhongjiajie, zhuangchong, zixi0825.\\n\\nAlso sincere gratitude to our Mentors: Zhenxu Ke, Willem Jiang, William Guo, LiDong Dai, Ted Liu, Kevin, JB for their help!\\n\\n## Planning for the next few releases:\\n\\n* CDC support.\\n* Support for the monitoring system.\\n* UI system support.\\n* More Connector and efficient Sink support, such as ClickHouse support will be available in the next release soon.\\nThe follow-up **Features** are decided by the community consensus, and we sincerely appeal to more participation in the community construction.\\n\\nWe need your attention and contributions:)\\n\\n## Community Status\\n\\n### Recent Development\\n\\nSince entering the Apache incubator, the contributor group has grown from 13 to 55 and continues to grow, with the average weekly community commits remaining at 20+. \\n\\nThree contributors from different companies (Lei Xie, HuaJie Wang, Chunfu Wu) have been invited to become Committers on account of their contributions to the community. \\n\\nWe held two Meetups, where instructors from Bilibili, OPPO, Vipshop, and other companies shared their large-scale production practices based on SeaTunnel in their companies (we will hold one meetup monthly in the future, and welcome SeaTunnel users or contributors to come and share their stories about SeaTunnel).\\n\\n### Users of Apache SeaTunnel(Incubating)\\n\\nNote: Only registered users are included.\\n\\nRegistered users of Apache SeaTunnel(Incubating) are shown below. If you are also using Apache SeaTunnel(Incubating), too, welcome to register on [Who is using SeaTunne](https://github.com/apache/incubator-seatunnel/issues/686)!\\n\\n<div align=\\"center\\">\\n\\n<img src=\\"/image/20220321/1.png\\"/>\\n\\n</div>\\n\\n## PPMC\'s Word\\n\\nLiFeng Nie, PPMC of Apache SeaTunnel(Incubating), commented on the first Apache version release. \\n\\nFrom the first day entering Apache Incubating, we have been working hard to learn the Apache Way and various Apache policies. Although the first release took a lot of time (mainly for compliance), we think it was well worth it, and that\'s one of the reasons we chose to enter Apache. We need to give our users peace of mind, and Apache is certainly the best choice, with its almost demanding license control that allows users to avoid compliance issues as much as possible and ensure that the software is circulating reasonably and legally. In addition, its practice of the Apache Way, such as public service mission, pragmatism, community over code, openness and consensus decision-making, and meritocracy, can drive the Apache SeaTunnel(Incubating) community to become more open, transparent, and diverse."},{"id":"hdfs-to-clickhouse","metadata":{"permalink":"/zh-CN/blog/hdfs-to-clickhouse","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2021-12-30-hdfs-to-clickhouse.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2021-12-30-hdfs-to-clickhouse.md","title":"\u5982\u4f55\u5feb\u901f\u5730\u628a HDFS \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","description":"ClickHouse \u662f\u9762\u5411 OLAP \u7684\u5206\u5e03\u5f0f\u5217\u5f0f DBMS\u3002\u6211\u4eec\u90e8\u95e8\u76ee\u524d\u5df2\u7ecf\u628a\u6240\u6709\u6570\u636e\u5206\u6790\u76f8\u5173\u7684\u65e5\u5fd7\u6570\u636e\u5b58\u50a8\u81f3 ClickHouse \u8fd9\u4e2a\u4f18\u79c0\u7684\u6570\u636e\u4ed3\u5e93\u4e4b\u4e2d\uff0c\u5f53\u524d\u65e5\u6570\u636e\u91cf\u8fbe\u5230\u4e86 300 \u4ebf\u3002","date":"2021-12-30T00:00:00.000Z","formattedDate":"2021\u5e7412\u670830\u65e5","tags":[{"label":"HDFS","permalink":"/zh-CN/blog/tags/hdfs"},{"label":"ClickHouse","permalink":"/zh-CN/blog/tags/click-house"}],"readingTime":7.13,"truncated":false,"authors":[],"frontMatter":{"slug":"hdfs-to-clickhouse","title":"\u5982\u4f55\u5feb\u901f\u5730\u628a HDFS \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","tags":["HDFS","ClickHouse"]},"prevItem":{"title":"2.1.0 Released! Apache SeaTunnel(Incubating) First Apache Release Refactors Kernel and Supports Flink Overall","permalink":"/zh-CN/blog/2.1.0-Released-Apache-SeaTunnel-Incubating-First-Apache-Release-Refactors-Kernel-and-Supports-Flink-Overall"},"nextItem":{"title":"\u5982\u4f55\u5feb\u901f\u5730\u628a Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","permalink":"/zh-CN/blog/hive-to-clickhouse"}},"content":"ClickHouse \u662f\u9762\u5411 OLAP \u7684\u5206\u5e03\u5f0f\u5217\u5f0f DBMS\u3002\u6211\u4eec\u90e8\u95e8\u76ee\u524d\u5df2\u7ecf\u628a\u6240\u6709\u6570\u636e\u5206\u6790\u76f8\u5173\u7684\u65e5\u5fd7\u6570\u636e\u5b58\u50a8\u81f3 ClickHouse \u8fd9\u4e2a\u4f18\u79c0\u7684\u6570\u636e\u4ed3\u5e93\u4e4b\u4e2d\uff0c\u5f53\u524d\u65e5\u6570\u636e\u91cf\u8fbe\u5230\u4e86 300 \u4ebf\u3002\\n\\n\u4e4b\u524d\u4ecb\u7ecd\u7684\u6709\u5173\u6570\u636e\u5904\u7406\u5165\u5e93\u7684\u7ecf\u9a8c\u90fd\u662f\u57fa\u4e8e\u5b9e\u65f6\u6570\u636e\u6d41\uff0c\u6570\u636e\u5b58\u50a8\u5728 Kafka \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 Java \u6216\u8005 Golang \u5c06\u6570\u636e\u4ece Kafka \u4e2d\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u6e05\u6d17\u4e4b\u540e\u5199\u5165 ClickHouse \u4e2d\uff0c\u8fd9\u6837\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u7684\u5feb\u901f\u63a5\u5165\u3002\u7136\u800c\u5728\u5f88\u591a\u540c\u5b66\u7684\u4f7f\u7528\u573a\u666f\u4e2d\uff0c\u6570\u636e\u90fd\u4e0d\u662f\u5b9e\u65f6\u7684\uff0c\u53ef\u80fd\u9700\u8981\u5c06 HDFS \u6216\u8005\u662f Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse\u3002\u6709\u7684\u540c\u5b66\u901a\u8fc7\u7f16\u5199 Spark \u7a0b\u5e8f\u6765\u5b9e\u73b0\u6570\u636e\u7684\u5bfc\u5165\uff0c\u90a3\u4e48\u662f\u5426\u6709\u66f4\u7b80\u5355\u3001\u9ad8\u6548\u7684\u65b9\u6cd5\u5462\u3002\\n\\n\u76ee\u524d\u5f00\u6e90\u793e\u533a\u4e0a\u6709\u4e00\u6b3e\u5de5\u5177 **Seatunnel**\uff0c\u9879\u76ee\u5730\u5740 [https://github.com/apache/incubator-seatunnel](https://github.com/apache/incubator-seatunnel)\uff0c\u53ef\u4ee5\u5feb\u901f\u5730\u5c06 HDFS \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse\u3002\\n\\n## HDFS To ClickHouse\\n\\n\u5047\u8bbe\u6211\u4eec\u7684\u65e5\u5fd7\u5b58\u50a8\u5728 HDFS \u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5c06\u65e5\u5fd7\u8fdb\u884c\u89e3\u6790\u5e76\u7b5b\u9009\u51fa\u6211\u4eec\u5173\u5fc3\u7684\u5b57\u6bb5\uff0c\u5c06\u5bf9\u5e94\u7684\u5b57\u6bb5\u5199\u5165 ClickHouse \u7684\u8868\u4e2d\u3002\\n\\n### Log Sample\\n\\n\u6211\u4eec\u5728 HDFS \u4e2d\u5b58\u50a8\u7684\u65e5\u5fd7\u683c\u5f0f\u5982\u4e0b\uff0c \u662f\u5f88\u5e38\u89c1\u7684 Nginx \u65e5\u5fd7\\n\\n```shell\\n10.41.1.28 github.com 114.250.140.241 0.001s \\"127.0.0.1:80\\" [26/Oct/2018:03:09:32 +0800] \\"GET /Apache/Seatunnel HTTP/1.1\\" 200 0 \\"-\\" - \\"Dalvik/2.1.0 (Linux; U; Android 7.1.1; OPPO R11 Build/NMF26X)\\" \\"196\\" \\"-\\" \\"mainpage\\" \\"443\\" \\"-\\" \\"172.16.181.129\\"\\n```\\n\\n### ClickHouse Schema\\n\\n\u6211\u4eec\u7684 ClickHouse \u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff0c\u6211\u4eec\u7684\u8868\u6309\u65e5\u8fdb\u884c\u5206\u533a\\n\\n```shell\\nCREATE TABLE cms.cms_msg\\n(\\n    date Date, \\n    datetime DateTime, \\n    url String, \\n    request_time Float32, \\n    status String, \\n    hostname String, \\n    domain String, \\n    remote_addr String, \\n    data_size Int32, \\n    pool String\\n) ENGINE = MergeTree PARTITION BY date ORDER BY date SETTINGS index_granularity = 16384\\n```\\n\\n## Seatunnel with ClickHouse\\n\\n\u63a5\u4e0b\u6765\u4f1a\u7ed9\u5927\u5bb6\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u6211\u4eec\u5982\u4f55\u901a\u8fc7 Seatunnel \u6ee1\u8db3\u4e0a\u8ff0\u9700\u6c42\uff0c\u5c06 HDFS \u4e2d\u7684\u6570\u636e\u5199\u5165 ClickHouse \u4e2d\u3002\\n\\n### Seatunnel\\n\\n[Seatunnel](https://github.com/apache/incubator-seatunnel) \u662f\u4e00\u4e2a\u975e\u5e38\u6613\u7528\uff0c\u9ad8\u6027\u80fd\uff0c\u80fd\u591f\u5e94\u5bf9\u6d77\u91cf\u6570\u636e\u7684\u5b9e\u65f6\u6570\u636e\u5904\u7406\u4ea7\u54c1\uff0c\u5b83\u6784\u5efa\u5728Spark\u4e4b\u4e0a\u3002Seatunnel \u62e5\u6709\u7740\u975e\u5e38\u4e30\u5bcc\u7684\u63d2\u4ef6\uff0c\u652f\u6301\u4ece Kafka\u3001HDFS\u3001Kudu \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8fdb\u884c\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5904\u7406\uff0c\u5e76\u5c06\u7ed3\u679c\u5199\u5165 ClickHouse\u3001Elasticsearch \u6216\u8005 Kafka \u4e2d\u3002\\n\\n### Prerequisites\\n\\n\u9996\u5148\u6211\u4eec\u9700\u8981\u5b89\u88c5 Seatunnel\uff0c\u5b89\u88c5\u5341\u5206\u7b80\u5355\uff0c\u65e0\u9700\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\\n\\n1. \u51c6\u5907 Spark \u73af\u5883\\n2. \u5b89\u88c5 Seatunnel\\n3. \u914d\u7f6e Seatunnel\\n\\n\u4ee5\u4e0b\u662f\u7b80\u6613\u6b65\u9aa4\uff0c\u5177\u4f53\u5b89\u88c5\u53ef\u4ee5\u53c2\u7167 [Quick Start](/docs/quick-start)\\n\\n```shell\\ncd /usr/local\\n\\nwget https://archive.apache.org/dist/spark/spark-2.2.0/spark-2.2.0-bin-hadoop2.7.tgz\\ntar -xvf https://archive.apache.org/dist/spark/spark-2.2.0/spark-2.2.0-bin-hadoop2.7.tgz\\n\\nwget https://github.com/InterestingLab/seatunnel/releases/download/v1.1.1/seatunnel-1.1.1.zip\\n\\nunzip seatunnel-1.1.1.zip\\n\\ncd seatunnel-1.1.1\\nvim config/seatunnel-env.sh\\n\\n# \u6307\u5b9aSpark\u5b89\u88c5\u8def\u5f84\\nSPARK_HOME=${SPARK_HOME:-/usr/local/spark-2.2.0-bin-hadoop2.7}\\n```\\n\\n### seatunnel Pipeline\\n\\n\u6211\u4eec\u4ec5\u9700\u8981\u7f16\u5199\u4e00\u4e2a seatunnel Pipeline \u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\u3002\\n\\n\u914d\u7f6e\u6587\u4ef6\u5305\u62ec\u56db\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f Spark\u3001Input\u3001filter \u548c Output\u3002\\n\\n#### Spark\\n\\n\u8fd9\u4e00\u90e8\u5206\u662f Spark \u7684\u76f8\u5173\u914d\u7f6e\uff0c\u4e3b\u8981\u914d\u7f6e Spark \u6267\u884c\u65f6\u6240\u9700\u7684\u8d44\u6e90\u5927\u5c0f\u3002\\n\\n```shell\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n}\\n```\\n\\n#### Input\\n\\n\u8fd9\u4e00\u90e8\u5206\u5b9a\u4e49\u6570\u636e\u6e90\uff0c\u5982\u4e0b\u662f\u4ece HDFS \u6587\u4ef6\u4e2d\u8bfb\u53d6 text \u683c\u5f0f\u6570\u636e\u7684\u914d\u7f6e\u6848\u4f8b\u3002\\n\\n```shell\\ninput {\\n    hdfs {\\n        path = \\"hdfs://nomanode:8020/rowlog/accesslog\\"\\n        table_name = \\"access_log\\"\\n        format = \\"text\\"\\n    }\\n}\\n```\\n\\n#### Filter\\n\\n\u5728 Filter \u90e8\u5206\uff0c\u8fd9\u91cc\u6211\u4eec\u914d\u7f6e\u4e00\u7cfb\u5217\u7684\u8f6c\u5316\uff0c\u5305\u62ec\u6b63\u5219\u89e3\u6790\u5c06\u65e5\u5fd7\u8fdb\u884c\u62c6\u5206\u3001\u65f6\u95f4\u8f6c\u6362\u5c06 HTTPDATE \u8f6c\u5316\u4e3a ClickHouse \u652f\u6301\u7684\u65e5\u671f\u683c\u5f0f\u3001\u5bf9 Number \u7c7b\u578b\u7684\u5b57\u6bb5\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u4ee5\u53ca\u901a\u8fc7 SQL \u8fdb\u884c\u5b57\u6bb5\u7b5b\u51cf\u7b49\\n\\n```shell\\nfilter {\\n    # \u4f7f\u7528\u6b63\u5219\u89e3\u6790\u539f\u59cb\u65e5\u5fd7\\n    grok {\\n        source_field = \\"raw_message\\"\\n        pattern = \'%{IP:ha_ip}\\\\\\\\s%{NOTSPACE:domain}\\\\\\\\s%{IP:remote_addr}\\\\\\\\s%{NUMBER:request_time}s\\\\\\\\s\\\\\\"%{DATA:upstream_ip}\\\\\\"\\\\\\\\s\\\\\\\\[%{HTTPDATE:timestamp}\\\\\\\\]\\\\\\\\s\\\\\\"%{NOTSPACE:method}\\\\\\\\s%{DATA:url}\\\\\\\\s%{NOTSPACE:http_ver}\\\\\\"\\\\\\\\s%{NUMBER:status}\\\\\\\\s%{NUMBER:body_bytes_send}\\\\\\\\s%{DATA:referer}\\\\\\\\s%{NOTSPACE:cookie_info}\\\\\\\\s\\\\\\"%{DATA:user_agent}\\\\\\"\\\\\\\\s%{DATA:uid}\\\\\\\\s%{DATA:session_id}\\\\\\\\s\\\\\\"%{DATA:pool}\\\\\\"\\\\\\\\s\\\\\\"%{DATA:tag2}\\\\\\"\\\\\\\\s%{DATA:tag3}\\\\\\\\s%{DATA:tag4}\'\\n    }\\n\\n    # \u5c06\\"dd/MMM/yyyy:HH:mm:ss Z\\"\u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u4e3a\\n    # \\"yyyy/MM/dd HH:mm:ss\\"\u683c\u5f0f\u7684\u6570\u636e\\n    date {\\n        source_field = \\"timestamp\\"\\n        target_field = \\"datetime\\"\\n        source_time_format = \\"dd/MMM/yyyy:HH:mm:ss Z\\"\\n        target_time_format = \\"yyyy/MM/dd HH:mm:ss\\"\\n    }\\n\\n    # \u4f7f\u7528SQL\u7b5b\u9009\u5173\u6ce8\u7684\u5b57\u6bb5\uff0c\u5e76\u5bf9\u5b57\u6bb5\u8fdb\u884c\u5904\u7406\\n    # \u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u8fc7\u6ee4\u6761\u4ef6\u8fc7\u6ee4\u6389\u4e0d\u5173\u5fc3\u7684\u6570\u636e\\n    sql {\\n        table_name = \\"access\\"\\n        sql = \\"select substring(date, 1, 10) as date, datetime, hostname, url, http_code, float(request_time), int(data_size), domain from access\\"\\n    }\\n}\\n```\\n\\n#### Output\\n\\n\u6700\u540e\u6211\u4eec\u5c06\u5904\u7406\u597d\u7684\u7ed3\u6784\u5316\u6570\u636e\u5199\u5165 ClickHouse\\n\\n```shell\\noutput {\\n    clickhouse {\\n        host = \\"your.clickhouse.host:8123\\"\\n        database = \\"seatunnel\\"\\n        table = \\"access_log\\"\\n        fields = [\\"date\\", \\"datetime\\", \\"hostname\\", \\"uri\\", \\"http_code\\", \\"request_time\\", \\"data_size\\", \\"domain\\"]\\n        username = \\"username\\"\\n        password = \\"password\\"\\n    }\\n}\\n```\\n\\n### Running seatunnel\\n\\n\u6211\u4eec\u5c06\u4e0a\u8ff0\u56db\u90e8\u5206\u914d\u7f6e\u7ec4\u5408\u6210\u4e3a\u6211\u4eec\u7684\u914d\u7f6e\u6587\u4ef6 `config/batch.conf`\u3002\\n\\n```shell\\nvim config/batch.conf\\n```\\n\\n```shell\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n}\\n\\ninput {\\n    hdfs {\\n        path = \\"hdfs://nomanode:8020/rowlog/accesslog\\"\\n        table_name = \\"access_log\\"\\n        format = \\"text\\"\\n    }\\n}\\n\\nfilter {\\n    # \u4f7f\u7528\u6b63\u5219\u89e3\u6790\u539f\u59cb\u65e5\u5fd7\\n    grok {\\n        source_field = \\"raw_message\\"\\n        pattern = \'%{IP:ha_ip}\\\\\\\\s%{NOTSPACE:domain}\\\\\\\\s%{IP:remote_addr}\\\\\\\\s%{NUMBER:request_time}s\\\\\\\\s\\\\\\"%{DATA:upstream_ip}\\\\\\"\\\\\\\\s\\\\\\\\[%{HTTPDATE:timestamp}\\\\\\\\]\\\\\\\\s\\\\\\"%{NOTSPACE:method}\\\\\\\\s%{DATA:url}\\\\\\\\s%{NOTSPACE:http_ver}\\\\\\"\\\\\\\\s%{NUMBER:status}\\\\\\\\s%{NUMBER:body_bytes_send}\\\\\\\\s%{DATA:referer}\\\\\\\\s%{NOTSPACE:cookie_info}\\\\\\\\s\\\\\\"%{DATA:user_agent}\\\\\\"\\\\\\\\s%{DATA:uid}\\\\\\\\s%{DATA:session_id}\\\\\\\\s\\\\\\"%{DATA:pool}\\\\\\"\\\\\\\\s\\\\\\"%{DATA:tag2}\\\\\\"\\\\\\\\s%{DATA:tag3}\\\\\\\\s%{DATA:tag4}\'\\n    }\\n\\n    # \u5c06\\"dd/MMM/yyyy:HH:mm:ss Z\\"\u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u4e3a\\n    # \\"yyyy/MM/dd HH:mm:ss\\"\u683c\u5f0f\u7684\u6570\u636e\\n    date {\\n        source_field = \\"timestamp\\"\\n        target_field = \\"datetime\\"\\n        source_time_format = \\"dd/MMM/yyyy:HH:mm:ss Z\\"\\n        target_time_format = \\"yyyy/MM/dd HH:mm:ss\\"\\n    }\\n\\n    # \u4f7f\u7528SQL\u7b5b\u9009\u5173\u6ce8\u7684\u5b57\u6bb5\uff0c\u5e76\u5bf9\u5b57\u6bb5\u8fdb\u884c\u5904\u7406\\n    # \u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u8fc7\u6ee4\u6761\u4ef6\u8fc7\u6ee4\u6389\u4e0d\u5173\u5fc3\u7684\u6570\u636e\\n    sql {\\n        table_name = \\"access\\"\\n        sql = \\"select substring(date, 1, 10) as date, datetime, hostname, url, http_code, float(request_time), int(data_size), domain from access\\"\\n    }\\n}\\n\\noutput {\\n    clickhouse {\\n        host = \\"your.clickhouse.host:8123\\"\\n        database = \\"seatunnel\\"\\n        table = \\"access_log\\"\\n        fields = [\\"date\\", \\"datetime\\", \\"hostname\\", \\"uri\\", \\"http_code\\", \\"request_time\\", \\"data_size\\", \\"domain\\"]\\n        username = \\"username\\"\\n        password = \\"password\\"\\n    }\\n}\\n```\\n\\n\u6267\u884c\u547d\u4ee4\uff0c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd0\u884c Seatunnel\uff0c\u5373\u53ef\u5c06\u6570\u636e\u5199\u5165 ClickHouse\u3002\u8fd9\u91cc\u6211\u4eec\u4ee5\u672c\u5730\u6a21\u5f0f\u4e3a\u4f8b\u3002\\n\\n```shell\\n./bin/start-seatunnel.sh --config config/batch.conf -e client -m \'local[2]\'\\n```\\n\\n## Conclusion\\n\\n\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 Seatunnel \u5c06 HDFS \u4e2d\u7684 Nginx \u65e5\u5fd7\u6587\u4ef6\u5bfc\u5165 ClickHouse \u4e2d\u3002\u4ec5\u901a\u8fc7\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u4fbf\u53ef\u5feb\u901f\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\uff0c\u65e0\u9700\u7f16\u5199\u4efb\u4f55\u4ee3\u7801\u3002\u9664\u4e86\u652f\u6301 HDFS \u6570\u636e\u6e90\u4e4b\u5916\uff0cSeatunnel \u540c\u6837\u652f\u6301\u5c06\u6570\u636e\u4ece Kafka \u4e2d\u5b9e\u65f6\u8bfb\u53d6\u5904\u7406\u5199\u5165 ClickHouse \u4e2d\u3002\u6211\u4eec\u7684\u4e0b\u4e00\u7bc7\u6587\u7ae0\u5c06\u4f1a\u4ecb\u7ecd\uff0c\u5982\u4f55\u5c06 Hive \u4e2d\u7684\u6570\u636e\u5feb\u901f\u5bfc\u5165 ClickHouse \u4e2d\u3002\\n\\n\u5f53\u7136\uff0cSeatunnel \u4e0d\u4ec5\u4ec5\u662f ClickHouse \u6570\u636e\u5199\u5165\u7684\u5de5\u5177\uff0c\u5728 Elasticsearch \u4ee5\u53ca Kafka\u7b49 \u6570\u636e\u6e90\u7684\u5199\u5165\u4e0a\u540c\u6837\u53ef\u4ee5\u626e\u6f14\u76f8\u5f53\u91cd\u8981\u7684\u89d2\u8272\u3002\\n\\n\u5e0c\u671b\u4e86\u89e3 Seatunnel \u548c ClickHouse\u3001Elasticsearch\u3001Kafka \u7ed3\u5408\u4f7f\u7528\u7684\u66f4\u591a\u529f\u80fd\u548c\u6848\u4f8b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5b98\u7f51 [https://seatunnel.apache.org/](https://seatunnel.apache.org/)\\n\\n-- Power by [InterestingLab](https://github.com/InterestingLab)"},{"id":"hive-to-clickhouse","metadata":{"permalink":"/zh-CN/blog/hive-to-clickhouse","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2021-12-30-hive-to-clickhouse.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2021-12-30-hive-to-clickhouse.md","title":"\u5982\u4f55\u5feb\u901f\u5730\u628a Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","description":"ClickHouse\u662f\u9762\u5411OLAP\u7684\u5206\u5e03\u5f0f\u5217\u5f0fDBMS\u3002\u6211\u4eec\u90e8\u95e8\u76ee\u524d\u5df2\u7ecf\u628a\u6240\u6709\u6570\u636e\u5206\u6790\u76f8\u5173\u7684\u65e5\u5fd7\u6570\u636e\u5b58\u50a8\u81f3ClickHouse\u8fd9\u4e2a\u4f18\u79c0\u7684\u6570\u636e\u4ed3\u5e93\u4e4b\u4e2d\uff0c\u5f53\u524d\u65e5\u6570\u636e\u91cf\u8fbe\u5230\u4e86300\u4ebf\u3002","date":"2021-12-30T00:00:00.000Z","formattedDate":"2021\u5e7412\u670830\u65e5","tags":[{"label":"Hive","permalink":"/zh-CN/blog/tags/hive"},{"label":"ClickHouse","permalink":"/zh-CN/blog/tags/click-house"}],"readingTime":5.525,"truncated":false,"authors":[],"frontMatter":{"slug":"hive-to-clickhouse","title":"\u5982\u4f55\u5feb\u901f\u5730\u628a Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","tags":["Hive","ClickHouse"]},"prevItem":{"title":"\u5982\u4f55\u5feb\u901f\u5730\u628a HDFS \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","permalink":"/zh-CN/blog/hdfs-to-clickhouse"},"nextItem":{"title":"\u5982\u4f55\u4f7f\u7528 Spark \u5feb\u901f\u5c06\u6570\u636e\u5199\u5165 Elasticsearch","permalink":"/zh-CN/blog/spark-execute-elasticsearch"}},"content":"ClickHouse\u662f\u9762\u5411OLAP\u7684\u5206\u5e03\u5f0f\u5217\u5f0fDBMS\u3002\u6211\u4eec\u90e8\u95e8\u76ee\u524d\u5df2\u7ecf\u628a\u6240\u6709\u6570\u636e\u5206\u6790\u76f8\u5173\u7684\u65e5\u5fd7\u6570\u636e\u5b58\u50a8\u81f3ClickHouse\u8fd9\u4e2a\u4f18\u79c0\u7684\u6570\u636e\u4ed3\u5e93\u4e4b\u4e2d\uff0c\u5f53\u524d\u65e5\u6570\u636e\u91cf\u8fbe\u5230\u4e86300\u4ebf\u3002\\n\\n\u5728\u4e4b\u524d\u7684\u6587\u7ae0 [\u5982\u4f55\u5feb\u901f\u5730\u628aHDFS\u4e2d\u7684\u6570\u636e\u5bfc\u5165ClickHouse](i18n/zh-CN/docusaurus-plugin-content-blog/current/2021-12-30-hdfs-to-clickhouse.mdtent-blog/current/2021-12-30-hdfs-to-clickhouse.md) \u4e2d\u6211\u4eec\u63d0\u5230\u8fc7\u4f7f\u7528 Seatunnel [https://github.com/apache/incubator-seatunnel](https://github.com/apache/incubator-seatunnel) \u5bf9HDFS\u4e2d\u7684\u6570\u636e\u7ecf\u8fc7\u5f88\u7b80\u5355\u7684\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5c06\u6570\u636e\u5199\u5165ClickHouse\u3002HDFS\u4e2d\u7684\u6570\u636e\u4e00\u822c\u662f\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\uff0c\u90a3\u4e48\u9488\u5bf9\u5b58\u50a8\u5728Hive\u4e2d\u7684\u7ed3\u6784\u5316\u6570\u636e\uff0c\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u64cd\u4f5c\u5462\uff1f\\n\\n![](/doc/image_zh/hive-logo.png)\\n\\n## Hive to ClickHouse\\n\\n\u5047\u5b9a\u6211\u4eec\u7684\u6570\u636e\u5df2\u7ecf\u5b58\u50a8\u5728Hive\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8bfb\u53d6Hive\u8868\u4e2d\u7684\u6570\u636e\u5e76\u7b5b\u9009\u51fa\u6211\u4eec\u5173\u5fc3\u7684\u5b57\u6bb5\uff0c\u6216\u8005\u5bf9\u5b57\u6bb5\u8fdb\u884c\u8f6c\u6362\uff0c\u6700\u540e\u5c06\u5bf9\u5e94\u7684\u5b57\u6bb5\u5199\u5165ClickHouse\u7684\u8868\u4e2d\u3002\\n\\n### Hive Schema\\n\\n\u6211\u4eec\u5728Hive\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u8868\u7ed3\u6784\u5982\u4e0b\uff0c\u5b58\u50a8\u7684\u662f\u5f88\u5e38\u89c1\u7684Nginx\u65e5\u5fd7\\n\\n```\\nCREATE TABLE `nginx_msg_detail`(\\n   `hostname` string,\\n   `domain` string,\\n   `remote_addr` string,\\n   `request_time` float,\\n   `datetime` string,\\n   `url` string,\\n   `status` int,\\n   `data_size` int,\\n   `referer` string,\\n   `cookie_info` string,\\n   `user_agent` string,\\n   `minute` string)\\n PARTITIONED BY (\\n   `date` string,\\n   `hour` string)\\n\\n```\\n\\n### ClickHouse Schema\\n\\n\u6211\u4eec\u7684ClickHouse\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff0c\u6211\u4eec\u7684\u8868\u6309\u65e5\u8fdb\u884c\u5206\u533a\\n\\n```\\nCREATE TABLE cms.cms_msg\\n(\\n    date Date,\\n    datetime DateTime,\\n    url String,\\n    request_time Float32,\\n    status String,\\n    hostname String,\\n    domain String,\\n    remote_addr String,\\n    data_size Int32\\n) ENGINE = MergeTree PARTITION BY date ORDER BY (date, hostname) SETTINGS index_granularity = 16384\\n```\\n\\n## Seatunnel with ClickHouse\\n\\n\u63a5\u4e0b\u6765\u4f1a\u7ed9\u5927\u5bb6\u4ecb\u7ecd\uff0c\u6211\u4eec\u5982\u4f55\u901a\u8fc7 Seatunnel \u5c06Hive\u4e2d\u7684\u6570\u636e\u5199\u5165ClickHouse\u4e2d\u3002\\n\\n### Seatunnel\\n\\n[Seatunnel](https://github.com/apache/incubator-seatunnel) \u662f\u4e00\u4e2a\u975e\u5e38\u6613\u7528\uff0c\u9ad8\u6027\u80fd\uff0c\u80fd\u591f\u5e94\u5bf9\u6d77\u91cf\u6570\u636e\u7684\u5b9e\u65f6\u6570\u636e\u5904\u7406\u4ea7\u54c1\uff0c\u5b83\u6784\u5efa\u5728Spark\u4e4b\u4e0a\u3002Seatunnel \u62e5\u6709\u7740\u975e\u5e38\u4e30\u5bcc\u7684\u63d2\u4ef6\uff0c\u652f\u6301\u4eceKafka\u3001HDFS\u3001Kudu\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8fdb\u884c\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5904\u7406\uff0c\u5e76\u5c06\u7ed3\u679c\u5199\u5165ClickHouse\u3001Elasticsearch\u6216\u8005Kafka\u4e2d\u3002\\n\\nSeatunnel\u7684\u73af\u5883\u51c6\u5907\u4ee5\u53ca\u5b89\u88c5\u6b65\u9aa4\u8fd9\u91cc\u5c31\u4e0d\u4e00\u4e00\u8d58\u8ff0\u4e86\uff0c\u5177\u4f53\u5b89\u88c5\u6b65\u9aa4\u53ef\u4ee5\u53c2\u8003\u4e0a\u4e00\u7bc7\u6587\u7ae0\u6216\u8005\u8bbf\u95ee [Seatunnel Docs](/docs/intro/about)\\n\\n### Seatunnel Pipeline\\n\\n\u6211\u4eec\u4ec5\u9700\u8981\u7f16\u5199\u4e00\u4e2aSeatunnel Pipeline\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\u3002\\n\\n\u914d\u7f6e\u6587\u4ef6\u5305\u62ec\u56db\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662fSpark\u3001Input\u3001filter\u548cOutput\u3002\\n\\n#### Spark\\n\\n\\n\u8fd9\u4e00\u90e8\u5206\u662fSpark\u7684\u76f8\u5173\u914d\u7f6e\uff0c\u4e3b\u8981\u914d\u7f6eSpark\u6267\u884c\u65f6\u6240\u9700\u7684\u8d44\u6e90\u5927\u5c0f\u3002\\n```\\nspark {\\n  // \u8fd9\u4e2a\u914d\u7f6e\u5fc5\u9700\u586b\u5199\\n  spark.sql.catalogImplementation = \\"hive\\"\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n}\\n```\\n\\n#### Input\\n\\n\u8fd9\u4e00\u90e8\u5206\u5b9a\u4e49\u6570\u636e\u6e90\uff0c\u5982\u4e0b\u662f\u4eceHive\u6587\u4ef6\u4e2d\u8bfb\u53d6text\u683c\u5f0f\u6570\u636e\u7684\u914d\u7f6e\u6848\u4f8b\u3002\\n\\n```\\ninput {\\n    hive {\\n        pre_sql = \\"select * from access.nginx_msg_detail\\"\\n        table_name = \\"access_log\\"\\n    }\\n}\\n```\\n\\n\u770b\uff0c\u5f88\u7b80\u5355\u7684\u4e00\u4e2a\u914d\u7f6e\u5c31\u53ef\u4ee5\u4eceHive\u4e2d\u8bfb\u53d6\u6570\u636e\u4e86\u3002\u5176\u4e2d`pre_sql`\u662f\u4eceHive\u4e2d\u8bfb\u53d6\u6570\u636eSQL\uff0c`table_name`\u662f\u5c06\u8bfb\u53d6\u540e\u7684\u6570\u636e\uff0c\u6ce8\u518c\u6210\u4e3aSpark\u4e2d\u4e34\u65f6\u8868\u7684\u8868\u540d\uff0c\u53ef\u4e3a\u4efb\u610f\u5b57\u6bb5\u3002\\n\\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5fc5\u987b\u4fdd\u8bc1hive\u7684metastore\u662f\u5728\u670d\u52a1\u72b6\u6001\u3002\\n\\n\u5728Cluster\u3001Client\u3001Local\u6a21\u5f0f\u4e0b\u8fd0\u884c\u65f6\uff0c\u5fc5\u987b\u628a`hive-site.xml`\u6587\u4ef6\u7f6e\u4e8e\u63d0\u4ea4\u4efb\u52a1\u8282\u70b9\u7684$HADOOP_CONF\u76ee\u5f55\u4e0b\\n\\n#### Filter\\n\\n\u5728Filter\u90e8\u5206\uff0c\u8fd9\u91cc\u6211\u4eec\u914d\u7f6e\u4e00\u7cfb\u5217\u7684\u8f6c\u5316\uff0c\u6211\u4eec\u8fd9\u91cc\u628a\u4e0d\u9700\u8981\u7684minute\u548chour\u5b57\u6bb5\u4e22\u5f03\u3002\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u8bfb\u53d6Hive\u7684\u65f6\u5019\u901a\u8fc7`pre_sql`\u4e0d\u8bfb\u53d6\u8fd9\u4e9b\u5b57\u6bb5\\n\\n```\\nfilter {\\n    remove {\\n        source_field = [\\"minute\\", \\"hour\\"]\\n    }\\n}\\n```\\n\\n#### Output\\n\u6700\u540e\u6211\u4eec\u5c06\u5904\u7406\u597d\u7684\u7ed3\u6784\u5316\u6570\u636e\u5199\u5165ClickHouse\\n\\n```\\noutput {\\n    clickhouse {\\n        host = \\"your.clickhouse.host:8123\\"\\n        database = \\"seatunnel\\"\\n        table = \\"nginx_log\\"\\n        fields = [\\"date\\", \\"datetime\\", \\"hostname\\", \\"url\\", \\"http_code\\", \\"request_time\\", \\"data_size\\", \\"domain\\"]\\n        username = \\"username\\"\\n        password = \\"password\\"\\n    }\\n}\\n```\\n\\n### Running Seatunnel\\n\\n\u6211\u4eec\u5c06\u4e0a\u8ff0\u56db\u90e8\u5206\u914d\u7f6e\u7ec4\u5408\u6210\u4e3a\u6211\u4eec\u7684\u914d\u7f6e\u6587\u4ef6`config/batch.conf`\u3002\\n\\n    vim config/batch.conf\\n\\n```\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n  // \u8fd9\u4e2a\u914d\u7f6e\u5fc5\u9700\u586b\u5199\\n  spark.sql.catalogImplementation = \\"hive\\"\\n}\\ninput {\\n    hive {\\n        pre_sql = \\"select * from access.nginx_msg_detail\\"\\n        table_name = \\"access_log\\"\\n    }\\n}\\nfilter {\\n    remove {\\n        source_field = [\\"minute\\", \\"hour\\"]\\n    }\\n}\\noutput {\\n    clickhouse {\\n        host = \\"your.clickhouse.host:8123\\"\\n        database = \\"seatunnel\\"\\n        table = \\"access_log\\"\\n        fields = [\\"date\\", \\"datetime\\", \\"hostname\\", \\"uri\\", \\"http_code\\", \\"request_time\\", \\"data_size\\", \\"domain\\"]\\n        username = \\"username\\"\\n        password = \\"password\\"\\n    }\\n}\\n```\\n\\n\u6267\u884c\u547d\u4ee4\uff0c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd0\u884c Seatunnel\uff0c\u5373\u53ef\u5c06\u6570\u636e\u5199\u5165ClickHouse\u3002\u8fd9\u91cc\u6211\u4eec\u4ee5\u672c\u5730\u6a21\u5f0f\u4e3a\u4f8b\u3002\\n\\n    ./bin/start-seatunnel.sh --config config/batch.conf -e client -m \'local[2]\'\\n\\n\\n## Conclusion\\n\\n\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 Seatunnel \u5c06Hive\u4e2d\u7684\u6570\u636e\u5bfc\u5165ClickHouse\u4e2d\u3002\u4ec5\u4ec5\u901a\u8fc7\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u4fbf\u53ef\u5feb\u901f\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\uff0c\u65e0\u9700\u7f16\u5199\u4efb\u4f55\u4ee3\u7801\uff0c\u5341\u5206\u7b80\u5355\u3002\\n\\n\u5e0c\u671b\u4e86\u89e3 Seatunnel \u4e0eClickHouse\u3001Elasticsearch\u3001Kafka\u3001Hadoop\u7ed3\u5408\u4f7f\u7528\u7684\u66f4\u591a\u529f\u80fd\u548c\u6848\u4f8b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5b98\u7f51 [https://seatunnel.apache.org/](https://seatunnel.apache.org/)\\n\\n-- Power by [InterestingLab](https://github.com/InterestingLab)"},{"id":"spark-execute-elasticsearch","metadata":{"permalink":"/zh-CN/blog/spark-execute-elasticsearch","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2021-12-30-spark-execute-elasticsearch.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2021-12-30-spark-execute-elasticsearch.md","title":"\u5982\u4f55\u4f7f\u7528 Spark \u5feb\u901f\u5c06\u6570\u636e\u5199\u5165 Elasticsearch","description":"\u8bf4\u5230\u6570\u636e\u5199\u5165 Elasticsearch\uff0c\u6700\u5148\u60f3\u5230\u7684\u80af\u5b9a\u662fLogstash\u3002Logstash\u56e0\u4e3a\u5176\u7b80\u5355\u4e0a\u624b\u3001\u53ef\u6269\u5c55\u3001\u53ef\u4f38\u7f29\u7b49\u4f18\u70b9\u88ab\u5e7f\u5927\u7528\u6237\u63a5\u53d7\u3002\u4f46\u662f\u5c3a\u6709\u6240\u77ed\uff0c\u5bf8\u6709\u6240\u957f\uff0cLogstash\u80af\u5b9a\u4e5f\u6709\u5b83\u65e0\u6cd5\u9002\u7528\u7684\u5e94\u7528\u573a\u666f\uff0c\u6bd4\u5982\uff1a","date":"2021-12-30T00:00:00.000Z","formattedDate":"2021\u5e7412\u670830\u65e5","tags":[{"label":"Spark","permalink":"/zh-CN/blog/tags/spark"},{"label":"Kafka","permalink":"/zh-CN/blog/tags/kafka"},{"label":"Elasticsearch","permalink":"/zh-CN/blog/tags/elasticsearch"}],"readingTime":7.415,"truncated":false,"authors":[],"frontMatter":{"slug":"spark-execute-elasticsearch","title":"\u5982\u4f55\u4f7f\u7528 Spark \u5feb\u901f\u5c06\u6570\u636e\u5199\u5165 Elasticsearch","tags":["Spark","Kafka","Elasticsearch"]},"prevItem":{"title":"\u5982\u4f55\u5feb\u901f\u5730\u628a Hive \u4e2d\u7684\u6570\u636e\u5bfc\u5165 ClickHouse","permalink":"/zh-CN/blog/hive-to-clickhouse"},"nextItem":{"title":"\u600e\u4e48\u7528 Spark \u5728 TiDB \u4e0a\u505a OLAP \u5206\u6790","permalink":"/zh-CN/blog/spark-execute-tidb"}},"content":"\u8bf4\u5230\u6570\u636e\u5199\u5165 Elasticsearch\uff0c\u6700\u5148\u60f3\u5230\u7684\u80af\u5b9a\u662fLogstash\u3002Logstash\u56e0\u4e3a\u5176\u7b80\u5355\u4e0a\u624b\u3001\u53ef\u6269\u5c55\u3001\u53ef\u4f38\u7f29\u7b49\u4f18\u70b9\u88ab\u5e7f\u5927\u7528\u6237\u63a5\u53d7\u3002\u4f46\u662f\u5c3a\u6709\u6240\u77ed\uff0c\u5bf8\u6709\u6240\u957f\uff0cLogstash\u80af\u5b9a\u4e5f\u6709\u5b83\u65e0\u6cd5\u9002\u7528\u7684\u5e94\u7528\u573a\u666f\uff0c\u6bd4\u5982\uff1a\\n\\n* \u6d77\u91cf\u6570\u636eETL\\n* \u6d77\u91cf\u6570\u636e\u805a\u5408\\n* \u591a\u6e90\u6570\u636e\u5904\u7406\\n\\n\u4e3a\u4e86\u6ee1\u8db3\u8fd9\u4e9b\u573a\u666f\uff0c\u5f88\u591a\u540c\u5b66\u90fd\u4f1a\u9009\u62e9Spark\uff0c\u501f\u52a9Spark\u7b97\u5b50\u8fdb\u884c\u6570\u636e\u5904\u7406\uff0c\u6700\u540e\u5c06\u5904\u7406\u7ed3\u679c\u5199\u5165Elasticsearch\u3002\\n\\n\u6211\u4eec\u90e8\u95e8\u4e4b\u524d\u5229\u7528Spark\u5bf9Nginx\u65e5\u5fd7\u8fdb\u884c\u5206\u6790\uff0c\u7edf\u8ba1\u6211\u4eec\u7684Web\u670d\u52a1\u8bbf\u95ee\u60c5\u51b5\uff0c\u5c06Nginx\u65e5\u5fd7\u6bcf\u5206\u949f\u805a\u5408\u4e00\u6b21\u6700\u540e\u5c06\u7ed3\u679c\u5199\u5165Elasticsearch\uff0c\u7136\u540e\u5229\u7528Kibana\u914d\u7f6e\u5b9e\u65f6\u76d1\u63a7Dashboard\u3002Elasticsearch\u548cKibana\u90fd\u5f88\u65b9\u4fbf\u3001\u5b9e\u7528\uff0c\u4f46\u662f\u968f\u7740\u7c7b\u4f3c\u9700\u6c42\u8d8a\u6765\u8d8a\u591a\uff0c\u5982\u4f55\u5feb\u901f\u901a\u8fc7Spark\u5c06\u6570\u636e\u5199\u5165Elasticsearch\u6210\u4e3a\u4e86\u6211\u4eec\u7684\u4e00\u5927\u95ee\u9898\u3002\\n\\n\u4eca\u5929\u7ed9\u5927\u5bb6\u63a8\u8350\u4e00\u6b3e\u80fd\u591f\u5b9e\u73b0\u6570\u636e\u5feb\u901f\u5199\u5165\u7684\u9ed1\u79d1\u6280 Seatunnel [https://github.com/apache/incubator-seatunnel](https://github.com/apache/incubator-seatunnel) \u4e00\u4e2a\u975e\u5e38\u6613\u7528\uff0c\u9ad8\u6027\u80fd\uff0c\u80fd\u591f\u5e94\u5bf9\u6d77\u91cf\u6570\u636e\u7684\u5b9e\u65f6\u6570\u636e\u5904\u7406\u4ea7\u54c1\uff0c\u5b83\u6784\u5efa\u5728Spark\u4e4b\u4e0a\uff0c\u7b80\u5355\u6613\u7528\uff0c\u7075\u6d3b\u914d\u7f6e\uff0c\u65e0\u9700\u5f00\u53d1\u3002\\n\\n![](/doc/image_zh/wd-struct.png)\\n\\n\\n## Kafka to Elasticsearch\\n\\n\u548cLogstash\u4e00\u6837\uff0cSeatunnel\u540c\u6837\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u6570\u636e\u8f93\u5165\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5\u6700\u5e38\u89c1\u7684Kakfa\u4f5c\u4e3a\u8f93\u5165\u6e90\u4e3a\u4f8b\uff0c\u8bb2\u89e3\u5982\u4f55\u4f7f\u7528 Seatunnel \u5c06\u6570\u636e\u5feb\u901f\u5199\u5165Elasticsearch\\n\\n### Log Sample\\n\\n\u539f\u59cb\u65e5\u5fd7\u683c\u5f0f\u5982\u4e0b:\\n```\\n127.0.0.1 elasticsearch.cn 114.250.140.241 0.001s \\"127.0.0.1:80\\" [26/Oct/2018:21:54:32 +0800] \\"GET /article HTTP/1.1\\" 200 123 \\"-\\" - \\"Dalvik/2.1.0 (Linux; U; Android 7.1.1; OPPO R11 Build/NMF26X)\\"\\n```\\n\\n### Elasticsearch Document\\n\\n\u6211\u4eec\u60f3\u8981\u7edf\u8ba1\uff0c\u4e00\u5206\u949f\u6bcf\u4e2a\u57df\u540d\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u805a\u5408\u5b8c\u7684\u6570\u636e\u6709\u4ee5\u4e0b\u5b57\u6bb5:\\n```\\ndomain String\\nhostname String\\nstatus int\\ndatetime String\\ncount int\\n```\\n\\n## Seatunnel with Elasticsearch\\n\\n\u63a5\u4e0b\u6765\u4f1a\u7ed9\u5927\u5bb6\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u6211\u4eec\u5982\u4f55\u901a\u8fc7 Seatunnel \u8bfb\u53d6Kafka\u4e2d\u7684\u6570\u636e\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u89e3\u6790\u4ee5\u53ca\u805a\u5408\uff0c\u6700\u540e\u5c06\u5904\u7406\u7ed3\u679c\u5199\u5165Elasticsearch\u4e2d\u3002\\n\\n### Seatunnel\\n\\n[Seatunnel](https://github.com/apache/incubator-seatunnel) \u540c\u6837\u62e5\u6709\u7740\u975e\u5e38\u4e30\u5bcc\u7684\u63d2\u4ef6\uff0c\u652f\u6301\u4eceKafka\u3001HDFS\u3001Hive\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8fdb\u884c\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5904\u7406\uff0c\u5e76\u5c06\u7ed3\u679c\u5199\u5165Elasticsearch\u3001Kudu\u6216\u8005Kafka\u4e2d\u3002\\n\\n### Prerequisites\\n\\n\u9996\u5148\u6211\u4eec\u9700\u8981\u5b89\u88c5seatunnel\uff0c\u5b89\u88c5\u5341\u5206\u7b80\u5355\uff0c\u65e0\u9700\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\\n1. \u51c6\u5907Spark\u73af\u5883\\n2. \u5b89\u88c5 Seatunnel\\n3. \u914d\u7f6e Seatunnel\\n\\n\u4ee5\u4e0b\u662f\u7b80\u6613\u6b65\u9aa4\uff0c\u5177\u4f53\u5b89\u88c5\u53ef\u4ee5\u53c2\u7167 [Quick Start](/docs/quick-start)\\n\\n```yaml\\ncd /usr/local\\nwget https://archive.apache.org/dist/spark/spark-2.2.0/spark-2.2.0-bin-hadoop2.7.tgz\\ntar -xvf https://archive.apache.org/dist/spark/spark-2.2.0/spark-2.2.0-bin-hadoop2.7.tgz\\nwget https://github.com/InterestingLab/seatunnel/releases/download/v1.1.1/seatunnel-1.1.1.zip\\nunzip seatunnel-1.1.1.zip\\ncd seatunnel-1.1.1\\n\\nvim config/seatunnel-env.sh\\n# \u6307\u5b9aSpark\u5b89\u88c5\u8def\u5f84\\nSPARK_HOME=${SPARK_HOME:-/usr/local/spark-2.2.0-bin-hadoop2.7}\\n```\\n\\n### Seatunnel Pipeline\\n\\n\u4e0eLogstash\u4e00\u6837\uff0c\u6211\u4eec\u4ec5\u9700\u8981\u7f16\u5199\u4e00\u4e2aSeatunnel Pipeline\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\uff0c\u76f8\u4fe1\u4e86\u89e3Logstash\u7684\u670b\u53cb\u53ef\u4ee5\u5f88\u5feb\u5165\u624b Seatunnel \u914d\u7f6e\u3002\\n\\n\u914d\u7f6e\u6587\u4ef6\u5305\u62ec\u56db\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662fSpark\u3001Input\u3001filter\u548cOutput\u3002\\n\\n#### Spark\\n\\n\\n\u8fd9\u4e00\u90e8\u5206\u662fSpark\u7684\u76f8\u5173\u914d\u7f6e\uff0c\u4e3b\u8981\u914d\u7f6eSpark\u6267\u884c\u65f6\u6240\u9700\u7684\u8d44\u6e90\u5927\u5c0f\u3002\\n```\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n  spark.streaming.batchDuration = 5\\n}\\n```\\n\\n#### Input\\n\\n\u8fd9\u4e00\u90e8\u5206\u5b9a\u4e49\u6570\u636e\u6e90\uff0c\u5982\u4e0b\u662f\u4eceKafka\u4e2d\u8bfb\u53d6\u6570\u636e\u7684\u914d\u7f6e\u6848\u4f8b\uff0c\\n\\n```\\nkafkaStream {\\n    topics = \\"seatunnel-es\\"\\n    consumer.bootstrap.servers = \\"localhost:9092\\"\\n    consumer.group.id = \\"seatunnel_es_group\\"\\n    consumer.rebalance.max.retries = 100\\n}\\n```\\n\\n#### Filter\\n\\n\u5728Filter\u90e8\u5206\uff0c\u8fd9\u91cc\u6211\u4eec\u914d\u7f6e\u4e00\u7cfb\u5217\u7684\u8f6c\u5316\uff0c\u5305\u62ec\u6b63\u5219\u89e3\u6790\u5c06\u65e5\u5fd7\u8fdb\u884c\u62c6\u5206\u3001\u65f6\u95f4\u8f6c\u6362\u5c06HTTPDATE\u8f6c\u5316\u4e3aElasticsearch\u652f\u6301\u7684\u65e5\u671f\u683c\u5f0f\u3001\u5bf9Number\u7c7b\u578b\u7684\u5b57\u6bb5\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u4ee5\u53ca\u901a\u8fc7SQL\u8fdb\u884c\u6570\u636e\u805a\u5408\\n```yaml\\nfilter {\\n    # \u4f7f\u7528\u6b63\u5219\u89e3\u6790\u539f\u59cb\u65e5\u5fd7\\n    # \u6700\u5f00\u59cb\u6570\u636e\u90fd\u5728raw_message\u5b57\u6bb5\u4e2d\\n    grok {\\n        source_field = \\"raw_message\\"\\n        pattern = \'%{NOTSPACE:hostname}\\\\\\\\s%{NOTSPACE:domain}\\\\\\\\s%{IP:remote_addr}\\\\\\\\s%{NUMBER:request_time}s\\\\\\\\s\\\\\\"%{DATA:upstream_ip}\\\\\\"\\\\\\\\s\\\\\\\\[%{HTTPDATE:timestamp}\\\\\\\\]\\\\\\\\s\\\\\\"%{NOTSPACE:method}\\\\\\\\s%{DATA:url}\\\\\\\\s%{NOTSPACE:http_ver}\\\\\\"\\\\\\\\s%{NUMBER:status}\\\\\\\\s%{NUMBER:body_bytes_send}\\\\\\\\s%{DATA:referer}\\\\\\\\s%{NOTSPACE:cookie_info}\\\\\\\\s\\\\\\"%{DATA:user_agent}\'\\n   }\\n    # \u5c06\\"dd/MMM/yyyy:HH:mm:ss Z\\"\u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u4e3a\\n    # Elasticsearch\u4e2d\u652f\u6301\u7684\u683c\u5f0f\\n    date {\\n        source_field = \\"timestamp\\"\\n        target_field = \\"datetime\\"\\n        source_time_format = \\"dd/MMM/yyyy:HH:mm:ss Z\\"\\n        target_time_format = \\"yyyy-MM-dd\'T\'HH:mm:ss.SSS+08:00\\"\\n    }\\n    ## \u5229\u7528SQL\u5bf9\u6570\u636e\u8fdb\u884c\u805a\u5408\\n    sql {\\n        table_name = \\"access_log\\"\\n        sql = \\"select domain, hostname, int(status), datetime, count(*) from access_log group by domain, hostname, status, datetime\\"\\n    }\\n }\\n```\\n\\n#### Output\\n\u6700\u540e\u6211\u4eec\u5c06\u5904\u7406\u597d\u7684\u7ed3\u6784\u5316\u6570\u636e\u5199\u5165Elasticsearch\u3002\\n\\n```yaml\\noutput {\\n    elasticsearch {\\n        hosts = [\\"localhost:9200\\"]\\n        index = \\"seatunnel-${now}\\"\\n        es.batch.size.entries = 100000\\n        index_time_format = \\"yyyy.MM.dd\\"\\n    }\\n}\\n```\\n\\n### Running Seatunnel\\n\\n\u6211\u4eec\u5c06\u4e0a\u8ff0\u56db\u90e8\u5206\u914d\u7f6e\u7ec4\u5408\u6210\u4e3a\u6211\u4eec\u7684\u914d\u7f6e\u6587\u4ef6 `config/batch.conf`\u3002\\n\\n    vim config/batch.conf\\n\\n```\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n  spark.streaming.batchDuration = 5\\n}\\ninput {\\n    kafkaStream {\\n        topics = \\"seatunnel-es\\"\\n        consumer.bootstrap.servers = \\"localhost:9092\\"\\n        consumer.group.id = \\"seatunnel_es_group\\"\\n        consumer.rebalance.max.retries = 100\\n    }\\n}\\nfilter {\\n    # \u4f7f\u7528\u6b63\u5219\u89e3\u6790\u539f\u59cb\u65e5\u5fd7\\n    # \u6700\u5f00\u59cb\u6570\u636e\u90fd\u5728raw_message\u5b57\u6bb5\u4e2d\\n    grok {\\n        source_field = \\"raw_message\\"\\n        pattern = \'%{IP:hostname}\\\\\\\\s%{NOTSPACE:domain}\\\\\\\\s%{IP:remote_addr}\\\\\\\\s%{NUMBER:request_time}s\\\\\\\\s\\\\\\"%{DATA:upstream_ip}\\\\\\"\\\\\\\\s\\\\\\\\[%{HTTPDATE:timestamp}\\\\\\\\]\\\\\\\\s\\\\\\"%{NOTSPACE:method}\\\\\\\\s%{DATA:url}\\\\\\\\s%{NOTSPACE:http_ver}\\\\\\"\\\\\\\\s%{NUMBER:status}\\\\\\\\s%{NUMBER:body_bytes_send}\\\\\\\\s%{DATA:referer}\\\\\\\\s%{NOTSPACE:cookie_info}\\\\\\\\s\\\\\\"%{DATA:user_agent}\'\\n   }\\n    # \u5c06\\"dd/MMM/yyyy:HH:mm:ss Z\\"\u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u4e3a\\n    # Elasticsearch\u4e2d\u652f\u6301\u7684\u683c\u5f0f\\n    date {\\n        source_field = \\"timestamp\\"\\n        target_field = \\"datetime\\"\\n        source_time_format = \\"dd/MMM/yyyy:HH:mm:ss Z\\"\\n        target_time_format = \\"yyyy-MM-dd\'T\'HH:mm:00.SSS+08:00\\"\\n    }\\n    ## \u5229\u7528SQL\u5bf9\u6570\u636e\u8fdb\u884c\u805a\u5408\\n    sql {\\n        table_name = \\"access_log\\"\\n        sql = \\"select domain, hostname, status, datetime, count(*) from access_log group by domain, hostname, status, datetime\\"\\n    }\\n }\\noutput {\\n    elasticsearch {\\n        hosts = [\\"localhost:9200\\"]\\n        index = \\"seatunnel-${now}\\"\\n        es.batch.size.entries = 100000\\n        index_time_format = \\"yyyy.MM.dd\\"\\n    }\\n}\\n```\\n\\n\u6267\u884c\u547d\u4ee4\uff0c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd0\u884c Seatunnel\uff0c\u5373\u53ef\u5c06\u6570\u636e\u5199\u5165Elasticsearch\u3002\u8fd9\u91cc\u6211\u4eec\u4ee5\u672c\u5730\u6a21\u5f0f\u4e3a\u4f8b\u3002\\n\\n    ./bin/start-seatunnel.sh --config config/batch.conf -e client -m \'local[2]\'\\n\\n\u6700\u540e\uff0c\u5199\u5165Elasticsearch\u4e2d\u7684\u6570\u636e\u5982\u4e0b\uff0c\u518d\u914d\u4e0aKibana\u5c31\u53ef\u4ee5\u5b9e\u73b0Web\u670d\u52a1\u7684\u5b9e\u65f6\u76d1\u63a7\u4e86^_^.\\n\\n```\\n\\"_source\\": {\\n    \\"domain\\": \\"elasticsearch.cn\\",\\n    \\"hostname\\": \\"localhost\\",\\n    \\"status\\": \\"200\\",\\n    \\"datetime\\": \\"2018-11-26T21:54:00.000+08:00\\",\\n    \\"count\\": 26\\n  }\\n```\\n\\n## Conclusion\\n\\n\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u901a\u8fc7 Seatunnel \u5c06Kafka\u4e2d\u7684\u6570\u636e\u5199\u5165Elasticsearch\u4e2d\u3002\u4ec5\u4ec5\u901a\u8fc7\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u4fbf\u53ef\u5feb\u901f\u8fd0\u884c\u4e00\u4e2aSpark Application\uff0c\u5b8c\u6210\u6570\u636e\u7684\u5904\u7406\u3001\u5199\u5165\uff0c\u65e0\u9700\u7f16\u5199\u4efb\u4f55\u4ee3\u7801\uff0c\u5341\u5206\u7b80\u5355\u3002\\n\\n\u5f53\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u4e2d\u6709\u9047\u5230Logstash\u65e0\u6cd5\u652f\u6301\u7684\u573a\u666f\u6216\u8005Logstah\u6027\u80fd\u65e0\u6cd5\u8fbe\u5230\u9884\u671f\u7684\u60c5\u51b5\u4e0b\uff0c\u90fd\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 Seatunnel \u89e3\u51b3\u95ee\u9898\u3002\\n\\n\u5e0c\u671b\u4e86\u89e3 Seatunnel \u4e0eElasticsearch\u3001Kafka\u3001Hadoop\u7ed3\u5408\u4f7f\u7528\u7684\u66f4\u591a\u529f\u80fd\u548c\u6848\u4f8b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5b98\u7f51 [https://seatunnel.apache.org/](https://seatunnel.apache.org/)\\n\\n\\n**\u6211\u4eec\u8fd1\u671f\u4f1a\u518d\u53d1\u5e03\u4e00\u7bc7\u300a\u5982\u4f55\u7528Spark\u548cElasticsearch\u505a\u4ea4\u4e92\u5f0f\u6570\u636e\u5206\u6790\u300b\uff0c\u656c\u8bf7\u671f\u5f85.**\\n\\n## Contract us\\n* \u90ae\u4ef6\u5217\u8868 : **dev@seatunnel.apache.org**. \u53d1\u9001\u4efb\u610f\u5185\u5bb9\u81f3 `dev-subscribe@seatunnel.apache.org`\uff0c \u6309\u7167\u56de\u590d\u8ba2\u9605\u90ae\u4ef6\u5217\u8868\u3002\\n* Slack: \u53d1\u9001 `Request to join SeaTunnel slack` \u90ae\u4ef6\u5230\u90ae\u4ef6\u5217\u8868 (`dev@seatunnel.apache.org`), \u6211\u4eec\u4f1a\u9080\u8bf7\u4f60\u52a0\u5165\uff08\u5728\u6b64\u4e4b\u524d\u8bf7\u786e\u8ba4\u5df2\u7ecf\u6ce8\u518cSlack\uff09.\\n* [bilibili B\u7ad9 \u89c6\u9891](https://space.bilibili.com/1542095008)"},{"id":"spark-execute-tidb","metadata":{"permalink":"/zh-CN/blog/spark-execute-tidb","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2021-12-30-spark-execute-tidb.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2021-12-30-spark-execute-tidb.md","title":"\u600e\u4e48\u7528 Spark \u5728 TiDB \u4e0a\u505a OLAP \u5206\u6790","description":"TiDB \u662f\u4e00\u6b3e\u5b9a\u4f4d\u4e8e\u5728\u7ebf\u4e8b\u52a1\u5904\u7406/\u5728\u7ebf\u5206\u6790\u5904\u7406\u7684\u878d\u5408\u578b\u6570\u636e\u5e93\u4ea7\u54c1\uff0c\u5b9e\u73b0\u4e86\u4e00\u952e\u6c34\u5e73\u4f38\u7f29\uff0c\u5f3a\u4e00\u81f4\u6027\u7684\u591a\u526f\u672c\u6570\u636e\u5b89\u5168\uff0c\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u5b9e\u65f6 OLAP \u7b49\u91cd\u8981\u7279\u6027\u3002","date":"2021-12-30T00:00:00.000Z","formattedDate":"2021\u5e7412\u670830\u65e5","tags":[{"label":"Spark","permalink":"/zh-CN/blog/tags/spark"},{"label":"TiDB","permalink":"/zh-CN/blog/tags/ti-db"}],"readingTime":8.58,"truncated":false,"authors":[],"frontMatter":{"slug":"spark-execute-tidb","title":"\u600e\u4e48\u7528 Spark \u5728 TiDB \u4e0a\u505a OLAP \u5206\u6790","tags":["Spark","TiDB"]},"prevItem":{"title":"\u5982\u4f55\u4f7f\u7528 Spark \u5feb\u901f\u5c06\u6570\u636e\u5199\u5165 Elasticsearch","permalink":"/zh-CN/blog/spark-execute-elasticsearch"},"nextItem":{"title":"\u5982\u4f55\u652f\u6301\u7684 Spark StructuredStreaming","permalink":"/zh-CN/blog/spark-structured-streaming"}},"content":"![](https://download.pingcap.com/images/tidb-planet.jpg)\\n\\n[TiDB](https://github.com/pingcap/tidb) \u662f\u4e00\u6b3e\u5b9a\u4f4d\u4e8e\u5728\u7ebf\u4e8b\u52a1\u5904\u7406/\u5728\u7ebf\u5206\u6790\u5904\u7406\u7684\u878d\u5408\u578b\u6570\u636e\u5e93\u4ea7\u54c1\uff0c\u5b9e\u73b0\u4e86\u4e00\u952e\u6c34\u5e73\u4f38\u7f29\uff0c\u5f3a\u4e00\u81f4\u6027\u7684\u591a\u526f\u672c\u6570\u636e\u5b89\u5168\uff0c\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u5b9e\u65f6 OLAP \u7b49\u91cd\u8981\u7279\u6027\u3002\\n\\nTiSpark \u662f PingCAP \u4e3a\u89e3\u51b3\u7528\u6237\u590d\u6742 OLAP \u9700\u6c42\u800c\u63a8\u51fa\u7684\u4ea7\u54c1\u3002\u5b83\u501f\u52a9 Spark \u5e73\u53f0\uff0c\u540c\u65f6\u878d\u5408 TiKV \u5206\u5e03\u5f0f\u96c6\u7fa4\u7684\u4f18\u52bf\u3002\\n\\n\u76f4\u63a5\u4f7f\u7528 TiSpark \u5b8c\u6210 OLAP \u64cd\u4f5c\u9700\u8981\u4e86\u89e3 Spark\uff0c\u8fd8\u9700\u8981\u4e00\u4e9b\u5f00\u53d1\u5de5\u4f5c\u3002\u90a3\u4e48\uff0c\u6709\u6ca1\u6709\u4e00\u4e9b\u5f00\u7bb1\u5373\u7528\u7684\u5de5\u5177\u80fd\u5e2e\u6211\u4eec\u66f4\u5feb\u901f\u5730\u4f7f\u7528 TiSpark \u5728 TiDB \u4e0a\u5b8c\u6210 OLAP \u5206\u6790\u5462\uff1f\\n\\n\u76ee\u524d\u5f00\u6e90\u793e\u533a\u4e0a\u6709\u4e00\u6b3e\u5de5\u5177 **Seatunnel**\uff0c\u9879\u76ee\u5730\u5740 [https://github.com/apache/incubator-seatunnel](https://github.com/apache/incubator-seatunnel) \uff0c\u53ef\u4ee5\u57fa\u4e8eSpark\uff0c\u5728 TiSpark \u7684\u57fa\u7840\u4e0a\u5feb\u901f\u5b9e\u73b0 TiDB \u6570\u636e\u8bfb\u53d6\u548c OLAP \u5206\u6790\u3002\\n\\n\\n## \u4f7f\u7528 Seatunnel \u64cd\u4f5cTiDB\\n\\n\u5728\u6211\u4eec\u7ebf\u4e0a\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u4ece TiDB \u4e2d\u8bfb\u53d6\u67d0\u4e00\u5929\u7684\u7f51\u7ad9\u8bbf\u95ee\u6570\u636e\uff0c\u7edf\u8ba1\u6bcf\u4e2a\u57df\u540d\u4ee5\u53ca\u670d\u52a1\u8fd4\u56de\u72b6\u6001\u7801\u7684\u8bbf\u95ee\u6b21\u6570\uff0c\u6700\u540e\u5c06\u7edf\u8ba1\u7ed3\u679c\u5199\u5165 TiDB \u53e6\u5916\u4e00\u4e2a\u8868\u4e2d\u3002 \u6211\u4eec\u6765\u770b\u770b Seatunnel \u662f\u5982\u4f55\u5b9e\u73b0\u8fd9\u4e48\u4e00\u4e2a\u529f\u80fd\u7684\u3002\\n\\n### Seatunnel\\n\\n[Seatunnel](https://github.com/apache/incubator-seatunnel) \u662f\u4e00\u4e2a\u975e\u5e38\u6613\u7528\uff0c\u9ad8\u6027\u80fd\uff0c\u80fd\u591f\u5e94\u5bf9\u6d77\u91cf\u6570\u636e\u7684\u5b9e\u65f6\u6570\u636e\u5904\u7406\u4ea7\u54c1\uff0c\u5b83\u6784\u5efa\u5728 Spark \u4e4b\u4e0a\u3002Seatunnel \u62e5\u6709\u7740\u975e\u5e38\u4e30\u5bcc\u7684\u63d2\u4ef6\uff0c\u652f\u6301\u4ece TiDB\u3001Kafka\u3001HDFS\u3001Kudu \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8fdb\u884c\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5904\u7406\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5199\u5165 TiDB\u3001ClickHouse\u3001Elasticsearch \u6216\u8005 Kafka \u4e2d\u3002\\n\\n\\n#### \u51c6\u5907\u5de5\u4f5c\\n\\n##### 1. TiDB \u8868\u7ed3\u6784\u4ecb\u7ecd\\n\\n**Input**\uff08\u5b58\u50a8\u8bbf\u95ee\u65e5\u5fd7\u7684\u8868\uff09\\n\\n```\\nCREATE TABLE access_log (\\n    domain VARCHAR(255),\\n    datetime VARCHAR(63),\\n    remote_addr VARCHAR(63),\\n    http_ver VARCHAR(15),\\n    body_bytes_send INT,\\n    status INT,\\n    request_time FLOAT,\\n    url TEXT\\n)\\n```\\n\\n```\\n+-----------------+--------------+------+------+---------+-------+\\n| Field           | Type         | Null | Key  | Default | Extra |\\n+-----------------+--------------+------+------+---------+-------+\\n| domain          | varchar(255) | YES  |      | NULL    |       |\\n| datetime        | varchar(63)  | YES  |      | NULL    |       |\\n| remote_addr     | varchar(63)  | YES  |      | NULL    |       |\\n| http_ver        | varchar(15)  | YES  |      | NULL    |       |\\n| body_bytes_send | int(11)      | YES  |      | NULL    |       |\\n| status          | int(11)      | YES  |      | NULL    |       |\\n| request_time    | float        | YES  |      | NULL    |       |\\n| url             | text         | YES  |      | NULL    |       |\\n+-----------------+--------------+------+------+---------+-------+\\n```\\n\\n**Output**\uff08\u5b58\u50a8\u7ed3\u679c\u6570\u636e\u7684\u8868\uff09\\n\\n```\\nCREATE TABLE access_collect (\\n    date VARCHAR(23),\\n    domain VARCHAR(63),\\n    status INT,\\n    hit INT\\n)\\n```\\n\\n```\\n+--------+-------------+------+------+---------+-------+\\n| Field  | Type        | Null | Key  | Default | Extra |\\n+--------+-------------+------+------+---------+-------+\\n| date   | varchar(23) | YES  |      | NULL    |       |\\n| domain | varchar(63) | YES  |      | NULL    |       |\\n| status | int(11)     | YES  |      | NULL    |       |\\n| hit    | int(11)     | YES  |      | NULL    |       |\\n+--------+-------------+------+------+---------+-------+\\n```\\n\\n##### 2. \u5b89\u88c5 Seatunnel\\n\\n\u6709\u4e86 TiDB \u8f93\u5165\u548c\u8f93\u51fa\u8868\u4e4b\u540e\uff0c \u6211\u4eec\u9700\u8981\u5b89\u88c5 Seatunnel\uff0c\u5b89\u88c5\u5341\u5206\u7b80\u5355\uff0c\u65e0\u9700\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\\n1. \u51c6\u5907 Spark\u73af\u5883\\n2. \u5b89\u88c5 Seatunnel\\n3. \u914d\u7f6e Seatunnel\\n\\n\u4ee5\u4e0b\u662f\u7b80\u6613\u6b65\u9aa4\uff0c\u5177\u4f53\u5b89\u88c5\u53ef\u4ee5\u53c2\u7167 [Quick Start](/docs/quick-start)\\n\\n```\\n# \u4e0b\u8f7d\u5b89\u88c5Spark\\ncd /usr/local\\nwget https://archive.apache.org/dist/spark/spark-2.1.0/spark-2.1.0-bin-hadoop2.7.tgz\\ntar -xvf https://archive.apache.org/dist/spark/spark-2.1.0/spark-2.1.0-bin-hadoop2.7.tgz\\nwget\\n# \u4e0b\u8f7d\u5b89\u88c5seatunnel\\nhttps://github.com/InterestingLab/seatunnel/releases/download/v1.2.0/seatunnel-1.2.0.zip\\nunzip seatunnel-1.2.0.zip\\ncd seatunnel-1.2.0\\n\\nvim config/seatunnel-env.sh\\n# \u6307\u5b9aSpark\u5b89\u88c5\u8def\u5f84\\nSPARK_HOME=${SPARK_HOME:-/usr/local/spark-2.1.0-bin-hadoop2.7}\\n```\\n\\n\\n### \u5b9e\u73b0 Seatunnel \u5904\u7406\u6d41\u7a0b\\n\\n\u6211\u4eec\u4ec5\u9700\u8981\u7f16\u5199\u4e00\u4e2a Seatunnel \u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6570\u636e\u7684\u8bfb\u53d6\u3001\u5904\u7406\u3001\u5199\u5165\u3002\\n\\nSeatunnel \u914d\u7f6e\u6587\u4ef6\u7531\u56db\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u5206\u522b\u662f `Spark`\u3001`Input`\u3001`Filter` \u548c `Output`\u3002`Input` \u90e8\u5206\u7528\u4e8e\u6307\u5b9a\u6570\u636e\u7684\u8f93\u5165\u6e90\uff0c`Filter` \u90e8\u5206\u7528\u4e8e\u5b9a\u4e49\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5904\u7406\u3001\u805a\u5408\uff0c`Output` \u90e8\u5206\u8d1f\u8d23\u5c06\u5904\u7406\u4e4b\u540e\u7684\u6570\u636e\u5199\u5165\u6307\u5b9a\u7684\u6570\u636e\u5e93\u6216\u8005\u6d88\u606f\u961f\u5217\u3002\\n\\n\u6574\u4e2a\u5904\u7406\u6d41\u7a0b\u4e3a `Input` -> `Filter` -> `Output`\uff0c\u6574\u4e2a\u6d41\u7a0b\u7ec4\u6210\u4e86 Seatunnel \u7684 \u5904\u7406\u6d41\u7a0b\uff08Pipeline\uff09\u3002\\n\\n> \u4ee5\u4e0b\u662f\u4e00\u4e2a\u5177\u4f53\u914d\u7f6e\uff0c\u6b64\u914d\u7f6e\u6765\u6e90\u4e8e\u7ebf\u4e0a\u5b9e\u9645\u5e94\u7528\uff0c\u4f46\u662f\u4e3a\u4e86\u6f14\u793a\u6709\u6240\u7b80\u5316\u3002\\n\\n\\n##### Input (TiDB)\\n\\n\u8fd9\u91cc\u90e8\u5206\u914d\u7f6e\u5b9a\u4e49\u8f93\u5165\u6e90\uff0c\u5982\u4e0b\u662f\u4ece TiDB \u4e00\u5f20\u8868\u4e2d\u8bfb\u53d6\u6570\u636e\u3002\\n\\n    input {\\n        tidb {\\n            database = \\"nginx\\"\\n            pre_sql = \\"select * from nginx.access_log\\"\\n            table_name = \\"spark_nginx_input\\"\\n        }\\n    }\\n\\n##### Filter\\n\\n\u5728Filter\u90e8\u5206\uff0c\u8fd9\u91cc\u6211\u4eec\u914d\u7f6e\u4e00\u7cfb\u5217\u7684\u8f6c\u5316, \u5927\u90e8\u5206\u6570\u636e\u5206\u6790\u7684\u9700\u6c42\uff0c\u90fd\u662f\u5728Filter\u5b8c\u6210\u7684\u3002Seatunnel \u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u63d2\u4ef6\uff0c\u8db3\u4ee5\u6ee1\u8db3\u5404\u79cd\u6570\u636e\u5206\u6790\u9700\u6c42\u3002\u8fd9\u91cc\u6211\u4eec\u901a\u8fc7 SQL \u63d2\u4ef6\u5b8c\u6210\u6570\u636e\u7684\u805a\u5408\u64cd\u4f5c\u3002\\n\\n    filter {\\n        sql {\\n            table_name = \\"spark_nginx_log\\"\\n            sql = \\"select count(*) as hit, domain, status, substring(datetime, 1, 10) as date from spark_nginx_log where substring(datetime, 1, 10)=\'2019-01-20\' group by domain, status, substring(datetime, 1, 10)\\"\\n        }\\n    }\\n\\n\\n##### Output (TiDB)\\n\\n\u6700\u540e\uff0c \u6211\u4eec\u5c06\u5904\u7406\u540e\u7684\u7ed3\u679c\u5199\u5165TiDB\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\u3002TiDB Output\u662f\u901a\u8fc7JDBC\u5b9e\u73b0\u7684\\n\\n    output {\\n        tidb {\\n            url = \\"jdbc:mysql://127.0.0.1:4000/nginx?useUnicode=true&characterEncoding=utf8\\"\\n            table = \\"access_collect\\"\\n            user = \\"username\\"\\n            password = \\"password\\"\\n            save_mode = \\"append\\"\\n        }\\n    }\\n\\n##### Spark\\n\\n\u8fd9\u4e00\u90e8\u5206\u662f Spark \u7684\u76f8\u5173\u914d\u7f6e\uff0c\u4e3b\u8981\u914d\u7f6e Spark \u6267\u884c\u65f6\u6240\u9700\u7684\u8d44\u6e90\u5927\u5c0f\u4ee5\u53ca\u5176\u4ed6 Spark \u914d\u7f6e\u3002\\n\\n\u6211\u4eec\u7684 TiDB Input \u63d2\u4ef6\u662f\u57fa\u4e8e TiSpark \u5b9e\u73b0\u7684\uff0c\u800c TiSpark \u4f9d\u8d56\u4e8e TiKV \u96c6\u7fa4\u548c Placement Driver (PD)\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u6307\u5b9a PD \u8282\u70b9\u4fe1\u606f\u4ee5\u53ca TiSpark \u76f8\u5173\u914d\u7f6e`spark.tispark.pd.addresses`\u548c`spark.sql.extensions`\u3002\\n\\n\\n    spark {\\n      spark.app.name = \\"seatunnel-tidb\\"\\n      spark.executor.instances = 2\\n      spark.executor.cores = 1\\n      spark.executor.memory = \\"1g\\"\\n      # Set for TiSpark\\n      spark.tispark.pd.addresses = \\"localhost:2379\\"\\n      spark.sql.extensions = \\"org.apache.spark.sql.TiExtensions\\"\\n    }\\n\\n\\n#### \u8fd0\u884c Seatunnel\\n\\n\u6211\u4eec\u5c06\u4e0a\u8ff0\u56db\u90e8\u5206\u914d\u7f6e\u7ec4\u5408\u6210\u6211\u4eec\u6700\u7ec8\u7684\u914d\u7f6e\u6587\u4ef6 `conf/tidb.conf`\\n\\n```\\nspark {\\n    spark.app.name = \\"seatunnel-tidb\\"\\n    spark.executor.instances = 2\\n    spark.executor.cores = 1\\n    spark.executor.memory = \\"1g\\"\\n    # Set for TiSpark\\n    spark.tispark.pd.addresses = \\"localhost:2379\\"\\n    spark.sql.extensions = \\"org.apache.spark.sql.TiExtensions\\"\\n}\\ninput {\\n    tidb {\\n        database = \\"nginx\\"\\n        pre_sql = \\"select * from nginx.access_log\\"\\n        table_name = \\"spark_table\\"\\n    }\\n}\\nfilter {\\n    sql {\\n        table_name = \\"spark_nginx_log\\"\\n        sql = \\"select count(*) as hit, domain, status, substring(datetime, 1, 10) as date from spark_nginx_log where substring(datetime, 1, 10)=\'2019-01-20\' group by domain, status, substring(datetime, 1, 10)\\"\\n    }\\n}\\noutput {\\n    tidb {\\n        url = \\"jdbc:mysql://127.0.0.1:4000/nginx?useUnicode=true&characterEncoding=utf8\\"\\n        table = \\"access_collect\\"\\n        user = \\"username\\"\\n        password = \\"password\\"\\n        save_mode = \\"append\\"\\n    }\\n}\\n```\\n\\n\u6267\u884c\u547d\u4ee4\uff0c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd0\u884c Seatunnel \uff0c\u5373\u53ef\u5b9e\u73b0\u6211\u4eec\u7684\u6570\u636e\u5904\u7406\u903b\u8f91\u3002\\n\\n* Local\\n\\n> ./bin/start-seatunnel.sh --config config/tidb.conf --deploy-mode client --master \'local[2]\'\\n\\n* yarn-client\\n\\n> ./bin/start-seatunnel.sh --config config/tidb.conf --deploy-mode client --master yarn\\n\\n* yarn-cluster\\n\\n> ./bin/start-seatunnel.sh --config config/tidb.conf --deploy-mode cluster -master yarn\\n\\n\u5982\u679c\u662f\u672c\u673a\u6d4b\u8bd5\u9a8c\u8bc1\u903b\u8f91\uff0c\u7528\u672c\u5730\u6a21\u5f0f\uff08Local\uff09\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e00\u822c\u751f\u4ea7\u73af\u5883\u4e0b\uff0c\u90fd\u662f\u4f7f\u7528`yarn-client`\u6216\u8005`yarn-cluster`\u6a21\u5f0f\u3002\\n\\n#### \u68c0\u67e5\u7ed3\u679c\\n\\n```\\nmysql> select * from access_collect;\\n+------------+--------+--------+------+\\n| date       | domain | status | hit  |\\n+------------+--------+--------+------+\\n| 2019-01-20 | b.com  |    200 |   63 |\\n| 2019-01-20 | a.com  |    200 |   85 |\\n+------------+--------+--------+------+\\n2 rows in set (0.21 sec)\\n```\\n\\n\\n\\n## \u603b\u7ed3\\n\\n\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528 Seatunnel \u4ece TiDB \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u505a\u7b80\u5355\u7684\u6570\u636e\u5904\u7406\u4e4b\u540e\u5199\u5165 TiDB \u53e6\u5916\u4e00\u4e2a\u8868\u4e2d\u3002\u4ec5\u901a\u8fc7\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u4fbf\u53ef\u5feb\u901f\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\uff0c\u65e0\u9700\u7f16\u5199\u4efb\u4f55\u4ee3\u7801\u3002\\n\\n\u9664\u4e86\u652f\u6301 TiDB \u6570\u636e\u6e90\u4e4b\u5916\uff0cSeatunnel \u540c\u6837\u652f\u6301Elasticsearch, Kafka, Kudu, ClickHouse\u7b49\u6570\u636e\u6e90\u3002\\n\\n**\u4e8e\u6b64\u540c\u65f6\uff0c\u6211\u4eec\u6b63\u5728\u7814\u53d1\u4e00\u4e2a\u91cd\u8981\u529f\u80fd\uff0c\u5c31\u662f\u5728 Seatunnel \u4e2d\uff0c\u5229\u7528 TiDB \u7684\u4e8b\u52a1\u7279\u6027\uff0c\u5b9e\u73b0\u4ece Kafka \u5230 TiDB \u6d41\u5f0f\u6570\u636e\u5904\u7406\uff0c\u5e76\u4e14\u652f\u6301\u7aef\uff08Kafka\uff09\u5230\u7aef\uff08TiDB\uff09\u7684 Exactly-Once \u6570\u636e\u4e00\u81f4\u6027\u3002**\\n\\n\u5e0c\u671b\u4e86\u89e3 Seatunnel \u548c TiDB\uff0cClickHouse\u3001Elasticsearch\u3001Kafka\u7ed3\u5408\u4f7f\u7528\u7684\u66f4\u591a\u529f\u80fd\u548c\u6848\u4f8b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5b98\u7f51 [https://seatunnel.apache.org/](https://seatunnel.apache.org/)\\n\\n## \u8054\u7cfb\u6211\u4eec\\n* \u90ae\u4ef6\u5217\u8868 : **dev@seatunnel.apache.org**. \u53d1\u9001\u4efb\u610f\u5185\u5bb9\u81f3 `dev-subscribe@seatunnel.apache.org`\uff0c \u6309\u7167\u56de\u590d\u8ba2\u9605\u90ae\u4ef6\u5217\u8868\u3002\\n* Slack: \u53d1\u9001 `Request to join SeaTunnel slack` \u90ae\u4ef6\u5230\u90ae\u4ef6\u5217\u8868 (`dev@seatunnel.apache.org`), \u6211\u4eec\u4f1a\u9080\u8bf7\u4f60\u52a0\u5165\uff08\u5728\u6b64\u4e4b\u524d\u8bf7\u786e\u8ba4\u5df2\u7ecf\u6ce8\u518cSlack\uff09.\\n* [bilibili B\u7ad9 \u89c6\u9891](https://space.bilibili.com/1542095008)\\n\\n-- Power by [InterestingLab](https://github.com/InterestingLab)"},{"id":"spark-structured-streaming","metadata":{"permalink":"/zh-CN/blog/spark-structured-streaming","editUrl":"https://github.com/apache/incubator-seatunnel-website/edit/main/blog/2021-12-30-spark-structured-streaming.md","source":"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2021-12-30-spark-structured-streaming.md","title":"\u5982\u4f55\u652f\u6301\u7684 Spark StructuredStreaming","description":"\u524d\u8a00","date":"2021-12-30T00:00:00.000Z","formattedDate":"2021\u5e7412\u670830\u65e5","tags":[{"label":"Spark","permalink":"/zh-CN/blog/tags/spark"},{"label":"StructuredStreaming","permalink":"/zh-CN/blog/tags/structured-streaming"}],"readingTime":10.075,"truncated":false,"authors":[],"frontMatter":{"slug":"spark-structured-streaming","title":"\u5982\u4f55\u652f\u6301\u7684 Spark StructuredStreaming","tags":["Spark","StructuredStreaming"]},"prevItem":{"title":"\u600e\u4e48\u7528 Spark \u5728 TiDB \u4e0a\u505a OLAP \u5206\u6790","permalink":"/zh-CN/blog/spark-execute-tidb"}},"content":"### \u524d\u8a00\\n\\nStructuredStreaming\u662fSpark 2.0\u4ee5\u540e\u65b0\u5f00\u653e\u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u76f8\u6bd4SparkStreaming\uff0c\u5b83\u6709\u4e00\u4e9b\u6bd4\u8f83\u7a81\u51fa\u7684\u4f18\u70b9\uff1a<br/> &emsp;&emsp;\u4e00\u3001\u5b83\u80fd\u505a\u5230\u66f4\u4f4e\u7684\u5ef6\u8fdf;<br/>\\n&emsp;&emsp;\u4e8c\u3001\u53ef\u4ee5\u505a\u5b9e\u65f6\u7684\u805a\u5408\uff0c\u4f8b\u5982\u5b9e\u65f6\u8ba1\u7b97\u6bcf\u5929\u6bcf\u4e2a\u5546\u54c1\u7684\u9500\u552e\u603b\u989d\uff1b<br/>\\n&emsp;&emsp;\u4e09\u3001\u53ef\u4ee5\u505a\u6d41\u4e0e\u6d41\u4e4b\u95f4\u7684\u5173\u8054\uff0c\u4f8b\u5982\u8ba1\u7b97\u5e7f\u544a\u7684\u70b9\u51fb\u7387\uff0c\u9700\u8981\u5c06\u5e7f\u544a\u7684\u66dd\u5149\u8bb0\u5f55\u548c\u70b9\u51fb\u8bb0\u5f55\u5173\u8054\u3002<br/>\\n\u4ee5\u4e0a\u51e0\u70b9\u5982\u679c\u4f7f\u7528SparkStreaming\u6765\u5b9e\u73b0\u53ef\u80fd\u4f1a\u6bd4\u8f83\u9ebb\u70e6\u6216\u8005\u8bf4\u662f\u5f88\u96be\u5b9e\u73b0\uff0c\u4f46\u662f\u4f7f\u7528StructuredStreaming\u5b9e\u73b0\u8d77\u6765\u4f1a\u6bd4\u8f83\u8f7b\u677e\u3002\\n### \u5982\u4f55\u4f7f\u7528StructuredStreaming\\n\u53ef\u80fd\u4f60\u6ca1\u6709\u8be6\u7ec6\u7814\u7a76\u8fc7StructuredStreaming\uff0c\u4f46\u662f\u53d1\u73b0StructuredStreaming\u80fd\u5f88\u597d\u7684\u89e3\u51b3\u4f60\u7684\u9700\u6c42\uff0c\u5982\u4f55\u5feb\u901f\u5229\u7528StructuredStreaming\u6765\u89e3\u51b3\u4f60\u7684\u9700\u6c42\uff1f\u76ee\u524d\u793e\u533a\u6709\u4e00\u6b3e\u5de5\u5177 **Seatunnel**\uff0c\u9879\u76ee\u5730\u5740\uff1a[https://github.com/apache/incubator-seatunnel](https://github.com/apache/incubator-seatunnel) ,\\n\u53ef\u4ee5\u9ad8\u6548\u4f4e\u6210\u672c\u7684\u5e2e\u52a9\u4f60\u5229\u7528StructuredStreaming\u6765\u5b8c\u6210\u4f60\u7684\u9700\u6c42\u3002\\n\\n### Seatunnel\\n\\nSeatunnel \u662f\u4e00\u4e2a\u975e\u5e38\u6613\u7528\uff0c\u9ad8\u6027\u80fd\uff0c\u80fd\u591f\u5e94\u5bf9\u6d77\u91cf\u6570\u636e\u7684\u5b9e\u65f6\u6570\u636e\u5904\u7406\u4ea7\u54c1\uff0c\u5b83\u6784\u5efa\u5728Spark\u4e4b\u4e0a\u3002Seatunnel \u62e5\u6709\u7740\u975e\u5e38\u4e30\u5bcc\u7684\u63d2\u4ef6\uff0c\u652f\u6301\u4eceKafka\u3001HDFS\u3001Kudu\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8fdb\u884c\u5404\u79cd\u5404\u6837\u7684\u6570\u636e\u5904\u7406\uff0c\u5e76\u5c06\u7ed3\u679c\u5199\u5165ClickHouse\u3001Elasticsearch\u6216\u8005Kafka\u4e2d\\n\\n### \u51c6\u5907\u5de5\u4f5c\\n\\n\u9996\u5148\u6211\u4eec\u9700\u8981\u5b89\u88c5 Seatunnel\uff0c\u5b89\u88c5\u5341\u5206\u7b80\u5355\uff0c\u65e0\u9700\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\\n\\n1. \u51c6\u5907Spark\u73af\u5883\\n2. \u5b89\u88c5 Seatunnel\\n3. \u914d\u7f6e Seatunnel\\n\\n\u4ee5\u4e0b\u662f\u7b80\u6613\u6b65\u9aa4\uff0c\u5177\u4f53\u5b89\u88c5\u53ef\u4ee5\u53c2\u7167 [Quick Start](/docs/quick-start)\\n\\n```\\ncd /usr/local\\nwget https://archive.apache.org/dist/spark/spark-2.2.0/spark-2.2.0-bin-hadoop2.7.tgz\\ntar -xvf https://archive.apache.org/dist/spark/spark-2.2.0/spark-2.2.0-bin-hadoop2.7.tgz\\nwget https://github.com/InterestingLab/seatunnel/releases/download/v1.3.0/seatunnel-1.3.0.zip\\nunzip seatunnel-1.3.0.zip\\ncd seatunnel-1.3.0\\n\\nvim config/seatunnel-env.sh\\n# \u6307\u5b9aSpark\u5b89\u88c5\u8def\u5f84\\nSPARK_HOME=${SPARK_HOME:-/usr/local/spark-2.2.0-bin-hadoop2.7}\\n```\\n\\n### Seatunnel Pipeline\\n\\n\u6211\u4eec\u4ec5\u9700\u8981\u7f16\u5199\u4e00\u4e2a Seatunnel Pipeline\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\u5b8c\u6210\u6570\u636e\u7684\u5bfc\u5165\u3002\\n\\n\u914d\u7f6e\u6587\u4ef6\u5305\u62ec\u56db\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662fSpark\u3001Input\u3001filter\u548cOutput\u3002\\n\\n#### Spark\\n\\n\u8fd9\u4e00\u90e8\u5206\u662fSpark\u7684\u76f8\u5173\u914d\u7f6e\uff0c\u4e3b\u8981\u914d\u7f6eSpark\u6267\u884c\u65f6\u6240\u9700\u7684\u8d44\u6e90\u5927\u5c0f\u3002\\n\\n```\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n}\\n```\\n\\n#### Input\\n\\n\u4e0b\u9762\u662f\u4e00\u4e2a\u4ecekafka\u8bfb\u53d6\u6570\u636e\u7684\u4f8b\u5b50\\n\\n```\\nkafkaStream {\\n    topics = \\"seatunnel\\"\\n    consumer.bootstrap.servers = \\"localhost:9092\\"\\n    schema = \\"{\\\\\\"name\\\\\\":\\\\\\"string\\\\\\",\\\\\\"age\\\\\\":\\\\\\"integer\\\\\\",\\\\\\"addrs\\\\\\":{\\\\\\"country\\\\\\":\\\\\\"string\\\\\\",\\\\\\"city\\\\\\":\\\\\\"string\\\\\\"}}\\"\\n}\\n```\\n\\n\u901a\u8fc7\u4e0a\u9762\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u8bfb\u53d6kafka\u91cc\u7684\u6570\u636e\u4e86 \uff0ctopics\u662f\u8981\u8ba2\u9605\u7684kafka\u7684topic\uff0c\u540c\u65f6\u8ba2\u9605\u591a\u4e2atopic\u53ef\u4ee5\u4ee5\u9017\u53f7\u9694\u5f00\uff0cconsumer.bootstrap.servers\u5c31\u662fKafka\u7684\u670d\u52a1\u5668\u5217\u8868\uff0cschema\u662f\u53ef\u9009\u9879\uff0c\u56e0\u4e3aStructuredStreaming\u4ecekafka\u8bfb\u53d6\u5230\u7684\u503c(\u5b98\u65b9\u56fa\u5b9a\u5b57\u6bb5value)\u662fbinary\u7c7b\u578b\u7684\uff0c\u8be6\u89c1http://spark.apache.org/docs/latest/structured-streaming-kafka-integration.html\\n\u4f46\u662f\u5982\u679c\u4f60\u786e\u5b9a\u4f60kafka\u91cc\u7684\u6570\u636e\u662fjson\u5b57\u7b26\u4e32\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u6307\u5b9aschema\uff0cinput\u63d2\u4ef6\u5c06\u6309\u7167\u4f60\u6307\u5b9a\u7684schema\u89e3\u6790\\n\\n#### Filter\\n\\n\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684filter\u4f8b\u5b50\\n\\n```\\nfilter{\\n    sql{\\n        table_name = \\"student\\"\\n        sql = \\"select name,age from student\\"\\n    }\\n}\\n```\\n`table_name`\u662f\u6ce8\u518c\u6210\u7684\u4e34\u65f6\u8868\u540d\uff0c\u4ee5\u4fbf\u4e8e\u5728\u4e0b\u9762\u7684sql\u4f7f\u7528\\n\\n#### Output\\n\\n\u5904\u7406\u597d\u7684\u6570\u636e\u5f80\u5916\u8f93\u51fa\uff0c\u5047\u8bbe\u6211\u4eec\u7684\u8f93\u51fa\u4e5f\u662fkafka\\n\\n```\\noutput{\\n    kafka {\\n        topic = \\"seatunnel\\"\\n        producer.bootstrap.servers = \\"localhost:9092\\"\\n        streaming_output_mode = \\"update\\"\\n        checkpointLocation = \\"/your/path\\"\\n    }\\n}\\n```\\n\\n`topic` \u662f\u4f60\u8981\u8f93\u51fa\u7684topic\uff0c` producer.bootstrap.servers`\u662fkafka\u96c6\u7fa4\u5217\u8868\uff0c`streaming_output_mode`\u662fStructuredStreaming\u7684\u4e00\u4e2a\u8f93\u51fa\u6a21\u5f0f\u53c2\u6570\uff0c\u6709\u4e09\u79cd\u7c7b\u578b`append|update|complete`\uff0c\u5177\u4f53\u4f7f\u7528\u53c2\u89c1\u6587\u6863http://spark.apache.org/docs/latest/structured-streaming-programming-guide.html#output-modes\\n\\n`checkpointLocation`\u662fStructuredStreaming\u7684checkpoint\u8def\u5f84\uff0c\u5982\u679c\u914d\u7f6e\u4e86\u7684\u8bdd\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4f1a\u5b58\u50a8\u7a0b\u5e8f\u7684\u8fd0\u884c\u4fe1\u606f\uff0c\u6bd4\u5982\u7a0b\u5e8f\u9000\u51fa\u518d\u542f\u52a8\u7684\u8bdd\u4f1a\u63a5\u7740\u4e0a\u6b21\u7684offset\u8fdb\u884c\u6d88\u8d39\u3002\\n\\n### \u573a\u666f\u5206\u6790\\n\\n\u4ee5\u4e0a\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u6765\u4ecb\u7ecd\u7684\u7a0d\u5fae\u590d\u6742\u4e00\u4e9b\u7684\u4e1a\u52a1\u573a\u666f\\n\\n#### \u573a\u666f\u4e00\uff1a\u5b9e\u65f6\u805a\u5408\u573a\u666f\\n\\n\u5047\u8bbe\u73b0\u5728\u6709\u4e00\u4e2a\u5546\u57ce\uff0c\u4e0a\u9762\u670910\u79cd\u5546\u54c1\uff0c\u73b0\u5728\u9700\u8981\u5b9e\u65f6\u6c42\u6bcf\u5929\u6bcf\u79cd\u5546\u54c1\u7684\u9500\u552e\u989d\uff0c\u751a\u81f3\u662f\u6c42\u6bcf\u79cd\u5546\u54c1\u7684\u8d2d\u4e70\u4eba\u6570\uff08\u4e0d\u8981\u6c42\u5341\u5206\u7cbe\u786e\uff09\u3002\\n\u8fd9\u4e48\u505a\u7684\u5de8\u5927\u7684\u4f18\u52bf\u5c31\u662f\u6d77\u91cf\u6570\u636e\u53ef\u4ee5\u5728\u5b9e\u65f6\u5904\u7406\u7684\u65f6\u5019\uff0c\u5b8c\u6210\u805a\u5408\uff0c\u518d\u4e5f\u4e0d\u9700\u8981\u5148\u5c06\u6570\u636e\u5199\u5165\u6570\u636e\u4ed3\u5e93\uff0c\u518d\u8dd1\u79bb\u7ebf\u7684\u5b9a\u65f6\u4efb\u52a1\u8fdb\u884c\u805a\u5408\uff0c\\n\u64cd\u4f5c\u8d77\u6765\u8fd8\u662f\u5f88\u65b9\u4fbf\u7684\u3002\\n\\nkafka\u7684\u6570\u636e\u5982\u4e0b\\n\\n```\\n{\\"good_id\\":\\"abc\\",\\"price\\":300,\\"user_id\\":123456,\\"time\\":1553216320}\\n```\\n\\n\u90a3\u6211\u4eec\u8be5\u600e\u4e48\u5229\u7528 Seatunnel \u6765\u5b8c\u6210\u8fd9\u4e2a\u9700\u6c42\u5462\uff0c\u5f53\u7136\u8fd8\u662f\u53ea\u9700\u8981\u914d\u7f6e\u5c31\u597d\u4e86\u3002\\n\\n```\\n#spark\u91cc\u7684\u914d\u7f6e\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u914d\u7f6e\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n}\\n\\n#\u914d\u7f6einput\\ninput {\\n    kafkaStream {\\n        topics = \\"good_topic\\"\\n        consumer.bootstrap.servers = \\"localhost:9092\\"\\n        schema = \\"{\\\\\\"good_id\\\\\\":\\\\\\"string\\\\\\",\\\\\\"price\\\\\\":\\\\\\"integer\\\\\\",\\\\\\"user_id\\\\\\":\\\\\\"Long\\\\\\",\\\\\\"time\\\\\\":\\\\\\"Long\\\\\\"}\\"\\n    }\\n}\\n\\n#\u914d\u7f6efilter    \\nfilter {\\n    \\n    #\u5728\u7a0b\u5e8f\u505a\u805a\u5408\u7684\u65f6\u5019\uff0c\u5185\u90e8\u4f1a\u53bb\u5b58\u50a8\u7a0b\u5e8f\u4ece\u542f\u52a8\u5f00\u59cb\u7684\u805a\u5408\u72b6\u6001\uff0c\u4e45\u800c\u4e45\u4e4b\u4f1a\u5bfc\u81f4OOM,\u5982\u679c\u8bbe\u7f6e\u4e86watermark\uff0c\u7a0b\u5e8f\u81ea\u52a8\u7684\u4f1a\u53bb\u6e05\u7406watermark\u4e4b\u5916\u7684\u72b6\u6001\\n    #\u8fd9\u91cc\u8868\u793a\u4f7f\u7528ts\u5b57\u6bb5\u8bbe\u7f6ewatermark\uff0c\u754c\u9650\u4e3a1\u5929\\n\\n    Watermark {\\n        time_field = \\"time\\"\\n        time_type = \\"UNIX\\"              #UNIX\u8868\u793a\u65f6\u95f4\u5b57\u6bb5\u4e3a10\u4e3a\u7684\u65f6\u95f4\u6233\uff0c\u8fd8\u6709\u5176\u4ed6\u7684\u7c7b\u578b\u8be6\u7ec6\u53ef\u4ee5\u67e5\u770b\u63d2\u4ef6\u6587\u6863\\n        time_pattern = \\"yyyy-MM-dd\\"     #\u8fd9\u91cc\u4e4b\u6240\u4ee5\u8981\u628ats\u5bf9\u5176\u5230\u5929\u662f\u56e0\u4e3a\u6c42\u6bcf\u5929\u7684\u9500\u552e\u989d\uff0c\u5982\u679c\u662f\u6c42\u6bcf\u5c0f\u65f6\u7684\u9500\u552e\u989d\u53ef\u4ee5\u5bf9\u5176\u5230\u5c0f\u65f6`yyyy-MM-dd HH`\\n        delay_threshold = \\"1 day\\"\\n        watermark_field = \\"ts\\"          #\u8bbe\u7f6ewatermark\u4e4b\u540e\u4f1a\u65b0\u589e\u4e00\u4e2a\u5b57\u6bb5\uff0c`ts`\u5c31\u662f\u8fd9\u4e2a\u5b57\u6bb5\u7684\u540d\u5b57\\n    }\\n    \\n    #\u4e4b\u6240\u4ee5\u8981group by ts\u662f\u8981\u8ba9watermark\u751f\u6548\uff0capprox_count_distinct\u662f\u4e00\u4e2a\u4f30\u503c\uff0c\u5e76\u4e0d\u662f\u7cbe\u786e\u7684count_distinct\\n    sql {\\n        table_name = \\"good_table_2\\"\\n        sql = \\"select good_id,sum(price) total,\\tapprox_count_distinct(user_id) person from good_table_2 group by ts,good_id\\"\\n    }\\n}\\n\\n#\u63a5\u4e0b\u6765\u6211\u4eec\u9009\u62e9\u5c06\u7ed3\u679c\u5b9e\u65f6\u8f93\u51fa\u5230Kafka\\noutput{\\n    kafka {\\n        topic = \\"seatunnel\\"\\n        producer.bootstrap.servers = \\"localhost:9092\\"\\n        streaming_output_mode = \\"update\\"\\n        checkpointLocation = \\"/your/path\\"\\n    }\\n}\\n\\n```\\n\u5982\u4e0a\u914d\u7f6e\u5b8c\u6210\uff0c\u542f\u52a8 Seatunnel\uff0c\u5c31\u53ef\u4ee5\u83b7\u53d6\u4f60\u60f3\u8981\u7684\u7ed3\u679c\u4e86\u3002\\n\\n#### \u573a\u666f\u4e8c\uff1a\u591a\u4e2a\u6d41\u5173\u8054\u573a\u666f\\n\\n\u5047\u8bbe\u4f60\u5728\u67d0\u4e2a\u5e73\u53f0\u6295\u653e\u4e86\u5e7f\u544a\uff0c\u73b0\u5728\u8981\u5b9e\u65f6\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u5e7f\u544a\u7684CTR(\u70b9\u51fb\u7387)\uff0c\u6570\u636e\u5206\u522b\u6765\u81ea\u4e24\u4e2atopic\uff0c\u4e00\u4e2a\u662f\u5e7f\u544a\u66dd\u5149\u65e5\u5fd7\uff0c\u4e00\u4e2a\u662f\u5e7f\u544a\u70b9\u51fb\u65e5\u5fd7,\\n\u6b64\u65f6\u6211\u4eec\u5c31\u9700\u8981\u628a\u4e24\u4e2a\u6d41\u6570\u636e\u5173\u8054\u5230\u4e00\u8d77\u505a\u8ba1\u7b97\uff0c\u800c Seatunnel \u6700\u8fd1\u4e5f\u652f\u6301\u4e86\u6b64\u529f\u80fd\uff0c\u8ba9\u6211\u4eec\u4e00\u8d77\u770b\u4e00\u4e0b\u8be5\u600e\u4e48\u505a\uff1a\\n\\n\\n\u70b9\u51fbtopic\u6570\u636e\u683c\u5f0f\\n\\n```\\n{\\"ad_id\\":\\"abc\\",\\"click_time\\":1553216320,\\"user_id\\":12345}\\n\\n```\\n\\n\u66dd\u5149topic\u6570\u636e\u683c\u5f0f\\n\\n```\\n{\\"ad_id\\":\\"abc\\",\\"show_time\\":1553216220,\\"user_id\\":12345}\\n\\n```\\n\\n```\\n#spark\u91cc\u7684\u914d\u7f6e\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u914d\u7f6e\\nspark {\\n  spark.app.name = \\"seatunnel\\"\\n  spark.executor.instances = 2\\n  spark.executor.cores = 1\\n  spark.executor.memory = \\"1g\\"\\n}\\n\\n#\u914d\u7f6einput\\ninput {\\n    \\n    kafkaStream {\\n        topics = \\"click_topic\\"\\n        consumer.bootstrap.servers = \\"localhost:9092\\"\\n        schema = \\"{\\\\\\"ad_id\\\\\\":\\\\\\"string\\\\\\",\\\\\\"user_id\\\\\\":\\\\\\"Long\\\\\\",\\\\\\"click_time\\\\\\":\\\\\\"Long\\\\\\"}\\"\\n        table_name = \\"click_table\\"\\n    }\\n    \\n    kafkaStream {\\n        topics = \\"show_topic\\"\\n        consumer.bootstrap.servers = \\"localhost:9092\\"\\n        schema = \\"{\\\\\\"ad_id\\\\\\":\\\\\\"string\\\\\\",\\\\\\"user_id\\\\\\":\\\\\\"Long\\\\\\",\\\\\\"show_time\\\\\\":\\\\\\"Long\\\\\\"}\\"\\n        table_name = \\"show_table\\"\\n    }\\n}\\n\\nfilter {\\n    \\n    #\u5de6\u5173\u8054\u53f3\u8868\u5fc5\u987b\u8bbe\u7f6ewatermark\\n    #\u53f3\u5173\u5de6\u53f3\u8868\u5fc5\u987b\u8bbe\u7f6ewatermark\\n    #http://spark.apache.org/docs/latest/structured-streaming-programming-guide.html#inner-joins-with-optional-watermarking\\n    Watermark {\\n              source_table_name = \\"click_table\\" #\u8fd9\u91cc\u53ef\u4ee5\u6307\u5b9a\u4e3a\u67d0\u4e2a\u4e34\u65f6\u8868\u6dfb\u52a0watermark\uff0c\u4e0d\u6307\u5b9a\u7684\u8bdd\u5c31\u662f\u4e3ainput\u4e2d\u7684\u7b2c\u4e00\u4e2a\\n              time_field = \\"time\\"\\n              time_type = \\"UNIX\\"               \\n              delay_threshold = \\"3 hours\\"\\n              watermark_field = \\"ts\\" \\n              result_table_name = \\"click_table_watermark\\" #\u6dfb\u52a0\u5b8cwatermark\u4e4b\u540e\u53ef\u4ee5\u6ce8\u518c\u6210\u4e34\u65f6\u8868\uff0c\u65b9\u4fbf\u540e\u7eed\u5728sql\u4e2d\u4f7f\u7528\\n    }\\n    \\n    Watermark {\\n                source_table_name = \\"show_table\\" \\n                time_field = \\"time\\"\\n                time_type = \\"UNIX\\"               \\n                delay_threshold = \\"2 hours\\"\\n                watermark_field = \\"ts\\" \\n                result_table_name = \\"show_table_watermark\\" \\n     }\\n    \\n    \\n    sql {\\n        table_name = \\"show_table_watermark\\"\\n        sql = \\"select a.ad_id,count(b.user_id)/count(a.user_id) ctr from show_table_watermark as a left join click_table_watermark as b on a.ad_id = b.ad_id and a.user_id = b.user_id \\"\\n    }\\n    \\n}\\n\\n#\u63a5\u4e0b\u6765\u6211\u4eec\u9009\u62e9\u5c06\u7ed3\u679c\u5b9e\u65f6\u8f93\u51fa\u5230Kafka\\noutput {\\n    kafka {\\n        topic = \\"seatunnel\\"\\n        producer.bootstrap.servers = \\"localhost:9092\\"\\n        streaming_output_mode = \\"append\\" #\u6d41\u5173\u8054\u53ea\u652f\u6301append\u6a21\u5f0f\\n        checkpointLocation = \\"/your/path\\"\\n    }\\n}\\n```\\n\\n\u901a\u8fc7\u914d\u7f6e\uff0c\u5230\u8fd9\u91cc\u6d41\u5173\u8054\u7684\u6848\u4f8b\u4e5f\u5b8c\u6210\u4e86\u3002\\n\\n### \u7ed3\u8bed\\n\u901a\u8fc7\u914d\u7f6e\u80fd\u5f88\u5feb\u7684\u5229\u7528StructuredStreaming\u505a\u5b9e\u65f6\u6570\u636e\u5904\u7406\uff0c\u4f46\u662f\u8fd8\u662f\u9700\u8981\u5bf9StructuredStreaming\u7684\u4e00\u4e9b\u6982\u5ff5\u4e86\u89e3\uff0c\u6bd4\u5982\u5176\u4e2d\u7684watermark\u673a\u5236\uff0c\u8fd8\u6709\u7a0b\u5e8f\u7684\u8f93\u51fa\u6a21\u5f0f\u3002\\n\\n\u6700\u540e\uff0cSeatunnel \u5f53\u7136\u8fd8\u652f\u6301spark streaming\u548cspark \u6279\u5904\u7406\u3002\\n\u5982\u679c\u4f60\u5bf9\u8fd9\u4e24\u4e2a\u4e5f\u611f\u5174\u8da3\u7684\u8bdd\uff0c\u53ef\u4ee5\u9605\u8bfb\u6211\u4eec\u4ee5\u524d\u53d1\u5e03\u7684\u6587\u7ae0\u300a[\u5982\u4f55\u5feb\u901f\u5730\u5c06Hive\u4e2d\u7684\u6570\u636e\u5bfc\u5165ClickHouse](i18n/zh-CN/docusaurus-plugin-content-blog/current/2021-12-30-hive-to-clickhouse.mdtent-blog/current/2021-12-30-hive-to-clickhouse.md)\u300b\u3001\\n\u300a[\u4f18\u79c0\u7684\u6570\u636e\u5de5\u7a0b\u5e08\uff0c\u600e\u4e48\u7528Spark\u5728TiDB\u4e0a\u505aOLAP\u5206\u6790](i18n/zh-CN/docusaurus-plugin-content-blog/current/2021-12-30-spark-execute-tidb.mdtent-blog/current/2021-12-30-spark-execute-tidb.md)\u300b\u3001\\n\u300a[\u5982\u4f55\u4f7f\u7528Spark\u5feb\u901f\u5c06\u6570\u636e\u5199\u5165Elasticsearch](i18n/zh-CN/docusaurus-plugin-content-blog/2021-12-30-spark-execute-elasticsearch.md/current/2021-12-30-spark-execute-elasticsearch.md)\u300b\\n\\n\u5e0c\u671b\u4e86\u89e3 Seatunnel \u548c HBase, ClickHouse\u3001Elasticsearch\u3001Kafka\u3001MySQL \u7b49\u6570\u636e\u6e90\u7ed3\u5408\u4f7f\u7528\u7684\u66f4\u591a\u529f\u80fd\u548c\u6848\u4f8b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5b98\u7f51 [https://seatunnel.apache.org/](https://seatunnel.apache.org/)\\n\\n## \u8054\u7cfb\u6211\u4eec\\n* \u90ae\u4ef6\u5217\u8868 : **dev@seatunnel.apache.org**. \u53d1\u9001\u4efb\u610f\u5185\u5bb9\u81f3 `dev-subscribe@seatunnel.apache.org`\uff0c \u6309\u7167\u56de\u590d\u8ba2\u9605\u90ae\u4ef6\u5217\u8868\u3002\\n* Slack: \u53d1\u9001 `Request to join SeaTunnel slack` \u90ae\u4ef6\u5230\u90ae\u4ef6\u5217\u8868 (`dev@seatunnel.apache.org`), \u6211\u4eec\u4f1a\u9080\u8bf7\u4f60\u52a0\u5165\uff08\u5728\u6b64\u4e4b\u524d\u8bf7\u786e\u8ba4\u5df2\u7ecf\u6ce8\u518cSlack\uff09.\\n* [bilibili B\u7ad9 \u89c6\u9891](https://space.bilibili.com/1542095008)"}]}')}}]);